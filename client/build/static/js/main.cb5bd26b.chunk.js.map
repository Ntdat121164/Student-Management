{"version":3,"sources":["_state/alert.js","_state/auth.js","_state/users.js","_state/students.js","_state/bach.js","_state/classes.js","_state/current_class.js","_state/profile.js","_state/app.js","_state/alert_bach.js","_state/dashboard.js","_state/score.js","_actions/alert.actions.js","_helpers/fake-backend.js","_helpers/fetch-wrapper.js","_helpers/class-wrapper.js","_helpers/auth-wrapper.js","_helpers/history.js","_actions/user.actions.js","_actions/profile.actions.js","_actions/studentInfo.actions.js","_actions/studentScore.actions.js","_components/Nav.jsx","_components/PrivateRoute.jsx","_components/ClassPicker.jsx","home/Home.jsx","_components/account/Account.jsx","_components/account/Login.jsx","_components/account/PasswordRecover.jsx","_components/dashboard/Dashboard.jsx","_components/dashboard/GPADash.jsx","_components/dashboard/StatisticBoard.jsx","_components/studentInfoList/StudentInfoList-table.js","_components/profile/Profile-form.js","_components/profile/Profile.jsx","_components/studentInfoList/StudentProfile.js","_components/dbportal/UploadForm.jsx","_components/studentInfoList/AddStudent-form.js","_components/studentInfoList/StudentInfoList.jsx","_components/bach_component/Post/NewPost.js","_state/feed_page.js","_helpers/Constant.js","_state/socket.js","_helpers/socket-wrapper.js","_helpers/feed_page_wrapper.js","_components/bach_component/Post/Post.js","_components/feed/Feed.jsx","_actions/feed.actions.js","_components/bach_component/ConversationListItem/index.js","_components/bach_component/Toolbar/index.js","_components/bach_component/ToolbarButton/index.js","_components/bach_component/ConversationList/conservationlistFake.js","_state/chat.js","_helpers/chat-wrapper.js","_actions/chat.action.js","_components/bach_component/ConversationList/index.js","_components/bach_component/Compose/index.js","_components/bach_component/Message/index.js","_components/bach_component/MessageList/index.js","_components/bach_component/Messenger/index.js","_components/chat/Chat.jsx","_components/studentScoreList/StudentScoreList.jsx","_components/studentScoreList/StudentScore.js","_components/studentScoreList/PersonalScore.js","_components/studentScoreList/Scoreboard.js","_components/studentScoreList/StudentScore-table.js","_components/studentScoreList/DownloadForm.js","_components/bach_component/Notification/Notification.js","_actions/socket.action.js","_components/bach_component/Socket/socket.js","_components/dbportal/DBPortal.jsx","home/StuHome.jsx","App.jsx","index.js"],"names":["alertAtom","atom","key","default","authAtom","cname","name","ca","decodeURIComponent","document","cookie","split","i","length","c","charAt","substring","indexOf","getCookie","userAtom","initClassAtom","usersAtom","studentsAtom","_id","tags","date_of_birth","email","vnu_id","classesAtom","currentClassAtom","JSON","parse","localStorage","getItem","profileAtom","classPickerVisibleAtom","loadingVisibleAtom","alertBachAtom","message","description","dashboardGPAAtom","gpa","dashboardLevelGPAAtom","data","dashboardGPAStatusAtom","dashboardLevelStatusAtom","scoreAtom","pscoreAtom","user_ref","role","gender","phone_number","location","scores","useAlertActions","setAlert","useSetRecoilState","success","type","error","clear","useResetRecoilState","usersKey","useFetchWrapper","useRecoilState","setAuth","get","request","post","put","delete","requestFile","method","requestor","url","header","body","a","myHeaders","Headers","append","requestOptions","mode","headers","redirect","fetch","response","clone","json","rawjson","status","console","log","useClassWrapper","param","fetchWrapper","alertActions","studentInfoAction","useStudentInfoAction","studentScoreAction","useStudentScoreAction","classes","setClasses","curClass","setCurClass_","getClassList","then","urlencoded","URLSearchParams","setCurClass","cls","setItem","chooseClass","stringify","toString","undefined","getStudentList","getScoreList","classId","myClass","class_id","getCurrentClassTeacherInfo","createClass","chooseClassById","useAuthWrapper","auth","profileAction","useProfileAction","setLoginToken","token","loadUser","printLoginToken","now","Date","setMinutes","getMinutes","toUTCString","userProfile","getMyProfile","params","Error","login","logout","tokenValue","getUserInfo","forgetPassword","loadLoginToken","async","cookiearray","namae","value","history","createBrowserHistory","useUserActions","baseUrl","process","REACT_APP_API_URL","authWrapper","setUsers","register","user","update","id","x","users","map","isDeleting","filter","resetUsers","resetUser","username","password","state","from","pathname","push","setProfile","currentClass","useRecoilValue","Id","setMyProfile","info","isTable","Object","entries","val","getProfileById","handleSubmit","setStudents","Class","setStudentData","emails","replace","emailArr","convertedEmails","forEach","element","idx","array","registered","failed","deleteStudent","AddStudent","setScore","setScoreData","semesterId","getScoreByID","getMyScore","getSemesterByID","getAllSemester","handleData","refinedData","object","CPA","tempLevel","Cplus","C","Dplus","D","F","scoreObj","totalCredit","totalScore","moment","utc","format","scoreElement","score","subject","credits_number","toFixed","Array","trim","toLocaleLowerCase","cpa","Sider","Layout","Nav","props","classID","useLocation","useState","collapsed","setCollapsed","userActions","classWrapper","userData","onLogout","useEffect","style","overflow","height","left","top","position","collapsible","onCollapse","className","theme","defaultSelectedKeys","selectedKeys","Item","HomeOutlined","to","DashboardOutlined","MessageOutlined","BellOutlined","InfoCircleOutlined","TableOutlined","UserOutlined","UploadOutlined","onClick","LoginOutlined","PrivateRoute","Component","component","rest","render","cardStyle","textAlign","marginTop","marginLeft","width","cardHeadStyle","backgroundColor","border","padding","ClassPicker","React","visible","setVisible","setConfirmLoading","drawerVisible","onDrawerClose","setDrawerVisible","input","Cards","title","class_name","headStyle","cover","alt","src","hoverable","placement","onClose","wrap","onCreate","values","onCancel","CollectionCreateForm","Form","useForm","form","animation","okText","cancelText","onOk","validateFields","resetFields","catch","layout","initialValues","modifier","label","rules","required","Home","studentFirstClassLoaded","setStudentFirstClassLoaded","loadFirstClassForStudent","flex","AppstoreTwoTone","twoToneColor","fontSize","display","verticalAlign","LeftCircleTwoTone","InfoCircleTwoTone","BellTwoTone","MessageTwoTone","DashboardTwoTone","LayoutTwoTone","HddTwoTone","Account","match","path","Login","PasswordRecover","loginDone","setLoginDone","validationSchema","Yup","shape","formOptions","resolver","yupResolver","formState","errors","isSubmitting","onSubmit","disabled","Dashboard","student","teacherName","studentCount","studentThieuTinChi","studentThieuHocPhi","dashProperties","setDashProperties","classNameTemp","classIDTemp","teacherNameTemp","studentCountTemp","studentThieuTinChiTemp","studentThieuHocPhiTemp","includes","initDashboard","justify","icon","GPADash","StatisticBoard","Option","Select","COLORS","GPAstate","setGPAState","levelGPAstate","setlevelGPAState","filterState","setFilterState","semFilterState","setSemFilterState","semesterData","setSemesterData","getSemesterData","tempSem","semester_name","Aplus","A","Bplus","B","GPA","semester_id","levelVisualized","levelPush","sort","b","keyA","keyB","initGPADash","PieChart","margin","right","bottom","Pie","cx","cy","outerRadius","fill","dataKey","entry","index","Cell","Tooltip","defaultValue","onChange","dataSource","renderItem","item","Meta","setGPAStatus","levelStatus","setlevelStatus","tempStatus","Normal","Warning","Expelling","statusVisualized","BinhThuong","CanhCao","DuoiHoc","initStatisticBoard","BarChart","CartesianGrid","strokeDasharray","XAxis","YAxis","Legend","wrapperStyle","Bar","legendType","StudentInfoTable","searchText","searchedColumn","visibleAdding","visiblePopup","currentRow","setState","searchInput","dataIndex","handleSearch","confirm","columns","filterDropdown","setSelectedKeys","clearFilters","ref","node","placeholder","e","target","onPressEnter","marginBottom","SearchOutlined","size","handleReset","closeDropdown","filterIcon","filtered","color","onFilter","record","toLowerCase","onFilterDropdownVisibleChange","setTimeout","select","text","highlightStyle","searchWords","autoEscape","textToHighlight","sorter","compare","multiple","defaultSortOrder","fixed","handleEditProfile","EditTwoTone","danger","showPopconfirm","DeleteFilled","WechatOutlined","align","bordered","scroll","y","footer","StudentProfile","AddStudentForm","okType","Background","backgroundImage","backgroundSize","backgroundPosition","avatarStyle","transform","dateFormat","Header","Content","ProfileForm","passwordSwitch","setPasswordSwitch","submitButtonLoading","setSubmitButtonLoading","newData","timestamp","changedFields","pickBy","identity","labelCol","span","wrapperCol","parent_number","checked","checkedChildren","unCheckedChildren","Password","colon","htmlType","loading","Profile","profile","students","studentId","find","Input","TextArea","UploadForm","fileList","setFileList","isModalVisible","setIsModalVisible","modalTitle","setModalTitle","setLog","result","setResult","showModal","file","formData","FormData","formurl","newRawJson","cprops","onRemove","newFileList","slice","splice","beforeUpload","window","reload","CheckCircleTwoTone","CloseCircleTwoTone","col","abc","delError","upload_form","StudentInfoList","NewPost","open","setOpen","postContent","setPostContent","setLoading","disableInput","setDisableInput","handleSendPost","onSendPost","setNotification","handleClose","Button","variant","endIcon","borderRadius","autoSize","minRows","maxRows","Grid","container","xs","LoadingButton","loadingPosition","feedPageAtom","posts","API_PATH","REG_ACC","LOGIN","PROFILE_BY_ID","SET_PROFILE_BY_ID","CREATE_CLASS","ADD_MEMBER_CLASS","DELETE_MEMBER_CLASS","MY_CLASS","MY_CLASS_MEMBERS_INFORS","GET_CLASS_BY_ID","POST_TO_FEED","GET_POST_BY_ID","GET_ALL_POSTS","COMMENT_TO_POST","GET_COMMENT_POST","RECENT_CHAT","RECENT_CONTACT","MESSAGES_BY_VNU_ID","ADD_SUBJECT","UPLOAD_DSSV","UPLOAD_DSSV_CLASS","UPLOAD_DSCV","UPLOAD_DSMH","UPLOAD_SV_MH_SCORE","UPLOAD_FILE","ADD_SCORE_BY_VNU_ID","GET_SCORES_BY_ID","PUBLIC_DATA","LIKE_POST","HOST_NAME","socketConnected","socketWrapper","initiated","socket","io","reconnectionDelayMax","query","useFeedPageWrapper","fetcher","feedPageState","setFeedPageState","Configs","temp","getAllPosts","isConnected","Comment","Avatar","stringAvatar","senderName","commentContent","stringToColor","string","hash","charCodeAt","substr","sx","bgcolor","children","Post","postInstance","onSendComment","liked","onLikePost","showListLiked","likedList","likedForRender","count","comments","textInput","useRef","hiddenComment","setHiddenComment","renderComment","comment","content","sm","created_date","toDateString","ImageList","cols","rowHeight","ImageListItem","img","srcSet","ThumbUp","ChatBubbleOutline","paddingTop","contentEditable","onKeyPress","preventDefault","current","innerHTML","Feed","feedPageWrapper","loaded","setloaded","setModalVisible","curModalContent","setCurModalContent","showPostLiked","list","feedAction","callback","postId","sendPost","sendComment","likePost","useFeedActions","fetchMyAPI","renderPosts","modalRender","ModalElement","paddingRight","paddingLeft","ConversationListItem","shave","picked","truncateString","str","num","Toolbar","leftItems","rightItems","ToolbarButton","curChatPersonAtom","curListMessagesAtom","curListContactAtom","waitToAddContactAtom","waitForUpdateLatestMsgAtom","useChatWrapper","curChatPerson","setCurChatPerson","curListMessages","setCurListMessage","curListContact","setCurListContact","waitingToAddContact","setWaitingToAddContact","listUpdateLatestMsg","setListUpdateLatestMsg","res","ok","getRecentContact","fetchCurListMessageById","useChatAction","setLoadingVisible","chatWrapper","emit","findContactInList","contact","obj","latest_message","latest_sender","isSender","newList","getCurChatMessageById","onSendMessage","addContactToList","updateLatestMsg","latest","newContact","curListContact_","ConversationList","chatAction","setLoaded","addContact","conservationsList","conversation","Compose","inputValue","setInputValue","onKeyDown","SendOutlined","Message","isMine","startsSequence","endsSequence","showTimestamp","friendlyTimestamp","join","MessageList","useParams","fetchDone","setFetchDone","isHidden","setIsHidden","messageEnd","NOT_MY_USER_ID","targetName","setTargetName","axios","getTargetName","messages","author","createdDate","scrollIntoView","messageCount","tempMessages","previous","next","currentMoment","previousMoment","previousDuration","duration","diff","as","nextMoment","nextDuration","renderMessages","float","Messenger","conversationLoaded","setConservationLoaded","exact","Chat","isSocketConnected","initConnection","StudentScoreList","StudentScoreTable","StudentScore","scoreboard","setScoreboard","setPScore","scoreTotal","setScoreTotal","semList","setSemList","isPersonal","semesters","fetchedScore","convertedScore","convertedSemester","semester","semesterList","subject_name","subject_code","scoref","Number","parseFloat","total_credits","stt","initScore","Scoreboard","PersonalScore","Title","Typography","Text","decimal","scoreType","setScoreType","filters","filterSearch","level","summary","pageData","summCredit","summScore","Summary","Row","colSpan","downloadPanelVisible","setDownloadPanelVisible","tag","toUpperCase","handleShowScoreboard","DownloadForm","initDownloadForm","openInNewTab","newWindow","opener","generated","Notification","notification_","notification","useSocketAction","onNewPost","newPost","getRecoil","setRecoil","onNewMessage","selfSend","newListMessages","listToAdd","newUpdate","listUpdating","onConnected","onNewComment","newComment","new_comment","newComments","onUpdatePost","newPosts","Socket","socketAction","setSocketConnected","removeAllListeners","on","setInterval","clearInterval","upload_form_semester","upload_form_subject","upload_score_student","upload_form_student","upload_form_teacher","upload_form_status","DBPortal","StuHome","teacherState","setTeacherState","initStuHome","Footer","App","loadingVisible","zIndex","gutter","marginRight","ClassNameDisplay","Child","LinearProgress","visibility","removeItem","ReactDOM","StrictMode","RecoilNexus","getElementById"],"mappings":"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","file":"static/js/main.cb5bd26b.chunk.js","sourcesContent":["import { atom } from 'recoil';\n\nconst alertAtom = atom({\n    key: 'alert',\n    default: null\n});\n\nexport { alertAtom };","import { atom } from 'recoil';\n\nconst authAtom = atom({\n    key: 'token',\n    // get initial state from local storage to enable user to stay logged in\n    default: getCookie(\"token\")\n    // default: null\n});\n\nfunction getCookie(cname) {\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for(let i = 0; i <ca.length; i++) {\n      let c = ca[i];\n      while (c.charAt(0) == ' ') {\n        c = c.substring(1);\n      }\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length);\n      }\n    }\n    return \"\";\n  }\n\nexport { authAtom };","import { atom } from 'recoil';\n\nexport {userAtom, usersAtom, initClassAtom };\n\nconst userAtom = atom({\n    key: 'userAtom',\n    default: null\n  });\n  //2 role student, teacher\n  \nconst initClassAtom = atom({\n    key: 'initClassAtom',\n    default: null\n  })\n  \n  \nconst usersAtom = atom({\n    key: 'usersAtom',\n    default: null\n  });\n\n","import { atom } from 'recoil';\n\nexport { studentsAtom };\n\nconst studentsAtom = atom({\n    key: {\n        name: 'students'\n    },\n    default:  [{\n        _id: '',\n        key: 1,\n        name: 'Nguyễn văn A ' + 1,\n        tags: (1 % 2) ? ['Bình thường'] : ['Cảnh cáo'],\n        date_of_birth: 1%30 + 1 + '/1/2001',\n        email: 1 + 19021000 + '@vnu.edu.vn',\n        vnu_id: 19020000 + 1,\n    }]\n});\n\n   ","import { atom } from 'recoil';\n\nexport { bachAtom };\n\nconst bachAtom = atom({\n    key: {\n        name: ''\n    },\n    default: {\n        name: 'Trần Xuân Bách'\n    }\n});","import { atom } from 'recoil';\n\nexport { classesAtom };\n\nconst classesAtom = atom({\n    key: {\n        name: 'classes'\n    },\n    default:  [{\n        \"id\" : \"4\",\n        \"className\" : \"K64CACLC4\",\n        \"background\" : \"https://maisienoble.github.io/jig/images/backgrounds/blueish.jpg\"\n    }]\n});\n","import { atom } from 'recoil';\n\nexport { currentClassAtom };\n\nconst currentClassAtom = atom({\n    key: {\n        name: 'currentclass'\n    },\n    default: JSON.parse(localStorage.getItem('currentClass'))\n});\n\n\n","import { atom } from 'recoil';\nexport { profileAtom };\nconst profileAtom = atom({\n    key: {\n        name: 'profile'\n    },\n    default:  null\n});","import { atom } from 'recoil';\nconst classPickerVisibleAtom = atom({\n    key: 'classpickerdrawervisible',\n    // get initial state from local storage to enable user to stay logged in\n    default: false,\n    // default: null\n});\n\nconst loadingVisibleAtom = atom({\n    key: \"loadingVisible\",\n    default: false\n})\n\nexport {classPickerVisibleAtom, loadingVisibleAtom}","\nimport { atom } from 'recoil';\n\nconst alertBachAtom = atom({\n    key: 'alertBach',\n    default: {message: null, description: null}\n});\n\nexport { alertBachAtom };","import { atom } from 'recoil';\n\nexport { dashboardGPAAtom, dashboardLevelGPAAtom, dashboardFilterGPAAtom, dashboardGPAStatusAtom, dashboardLevelStatusAtom };\n\nconst dashboardGPAAtom = atom({\n    key: {\n        name: 'GPA'\n    },\n    default: [{\n        vnu_id: 0,\n        name: 0,\n        email: 0,\n        gpa: 0\n    }]\n});\n\nconst dashboardLevelGPAAtom = atom({\n    key: {\n        name: 'levelGPA'\n    },\n    default: {\n        data: []\n    }\n});\n\nconst dashboardFilterGPAAtom = atom({\n    key: {\n        name: 'filterGPA'\n    },\n    default: 'nofilter'\n});\n\nconst dashboardGPAStatusAtom = atom({\n    key: {\n        name: 'GPA'\n    },\n    default: [{\n        vnu_id: 0,\n        name: 0,\n        email: 0,\n        gpa: 0\n    }]\n});\n\nconst dashboardLevelStatusAtom = atom({\n    key: {\n        name: 'levelGPA'\n    },\n    default: {\n        data: []\n    }\n});\n\n\n","import { atom } from 'recoil';\n\nexport { scoreAtom, pscoreAtom };\n\nconst scoreAtom = atom({\n    key: {\n        name: 'score'\n    },\n    default: []\n});\n\nconst pscoreAtom = atom({\n    key: {\n        name: 'pscore'\n    },\n    default: {\n        user_ref: {\n            _id: \"61996dec7a29489204522710\",\n            name: \"Trần Xuân Bách\",\n            role: \"student\",\n            gender: \"male\",\n            phone_number: \"55121565\",\n            location: \"Nam Định\",\n            date_of_birth: 1637435218661,\n            email: \"19020001@vnu.edu.vn\",\n            vnu_id: \"19020001\",\n        },\n        scores: [\n            {\n                \"_id\": \"619a0c53f28cb184224c262c\",\n                \"score\": 10,\n                \"subject\": {\n                    \"_id\": \"61996e397a2948920454aab3\",\n                    \"subject_name\": \"Tin học cơ sở\",\n                    \"subject_code\": \"INT1002\",\n                    \"credits_number\": 4,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            }]\n    }\n});","import { useSetRecoilState, useResetRecoilState } from 'recoil';\n\nimport { alertAtom } from '_state';\n\nexport { useAlertActions };\n\nfunction useAlertActions () {\n    const setAlert = useSetRecoilState(alertAtom);\n    const resetAlert = useResetRecoilState(alertAtom);\n\n    return {\n        success: message => setAlert({ message, type: 'alert-success' }),\n        error: message => setAlert({ message, type: 'alert-danger' }),\n        clear: resetAlert\n    }\n}\n","export { fakeBackend };\n\n// array in local storage for registered users\nconst usersKey = 'react-recoil-registration-login-example-users';\nlet users = JSON.parse(localStorage.getItem(usersKey)) || [];\n\nfunction fakeBackend() {\n    let realFetch = window.fetch;\n    window.fetch = function (url, opts) {\n        return new Promise((resolve, reject) => {\n            // wrap in timeout to simulate server api call\n            setTimeout(handleRoute, 500);\n\n            function handleRoute() {\n                switch (true) {\n                    case url.endsWith('/users/authenticate') && opts.method === 'POST':\n                        return authenticate();\n                    case url.endsWith('/users/register') && opts.method === 'POST':\n                        return register();\n                    case url.endsWith('/users') && opts.method === 'GET':\n                        return getUsers();\n                    case url.match(/\\/users\\/\\d+$/) && opts.method === 'GET':\n                        return getUserById();\n                    case url.match(/\\/users\\/\\d+$/) && opts.method === 'PUT':\n                        return updateUser();\n                    case url.match(/\\/users\\/\\d+$/) && opts.method === 'DELETE':\n                        return deleteUser();\n                    default:\n                        // pass through any requests not handled above\n                        return realFetch(url, opts)\n                            .then(response => resolve(response))\n                            .catch(error => reject(error));\n                }\n            }\n\n            // route functions\n\n            function authenticate() {\n                const { username, password } = body();\n                const user = users.find(x => x.username === username && x.password === password);\n\n                if (!user) return error('Username or password is incorrect');\n\n                return ok({\n                    ...basicDetails(user),\n                    token: 'fake-jwt-token'\n                });\n            }\n\n            function register() {\n                const user = body();\n    \n                if (users.find(x => x.username === user.username)) {\n                    return error('Username \"' + user.username + '\" is already taken')\n                }\n    \n                user.id = users.length ? Math.max(...users.map(x => x.id)) + 1 : 1;\n                users.push(user);\n                localStorage.setItem(usersKey, JSON.stringify(users));\n                return ok();\n            }\n    \n            function getUsers() {\n                if (!isAuthenticated()) return unauthorized();\n                return ok(users.map(x => basicDetails(x)));\n            }\n\n            function getUserById() {\n                if (!isAuthenticated()) return unauthorized();\n    \n                const user = users.find(x => x.id === idFromUrl());\n                return ok(basicDetails(user));\n            }\n    \n            function updateUser() {\n                if (!isAuthenticated()) return unauthorized();\n    \n                let params = body();\n                let user = users.find(x => x.id === idFromUrl());\n    \n                // only update password if entered\n                if (!params.password) {\n                    delete params.password;\n                }\n    \n                // update and save user\n                Object.assign(user, params);\n                localStorage.setItem(usersKey, JSON.stringify(users));\n    \n                return ok();\n            }\n    \n            function deleteUser() {\n                if (!isAuthenticated()) return unauthorized();\n    \n                users = users.filter(x => x.id !== idFromUrl());\n                localStorage.setItem(usersKey, JSON.stringify(users));\n                return ok();\n            }\n    \n            // helper functions\n\n            function ok(body) {\n                resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(body)) })\n            }\n\n            function unauthorized() {\n                resolve({ status: 401, text: () => Promise.resolve(JSON.stringify({ message: 'Unauthorized' })) })\n            }\n\n            function error(message) {\n                resolve({ status: 400, text: () => Promise.resolve(JSON.stringify({ message })) })\n            }\n\n            function basicDetails(user) {\n                const { id, username, firstName, lastName } = user;\n                return { id, username, firstName, lastName };\n            }\n    \n            function isAuthenticated() {\n                return opts.headers['Authorization'] === 'Bearer fake-jwt-token';\n            }\n\n            function body() {\n                return opts.body && JSON.parse(opts.body);    \n            }\n\n            function idFromUrl() {\n                const urlParts = url.split('/');\n                return parseInt(urlParts[urlParts.length - 1]);\n            }\n        });\n    }\n}\n","import { useRecoilState } from 'recoil';\n\nimport { history } from '_helpers';\nimport { authAtom } from '_state';\nimport { useAlertActions } from '_actions';\n\nexport { useFetchWrapper };\n\n\n\nfunction useFetchWrapper() {\n    // const authWrapper = useAuthWrapper();\n    const [auth, setAuth] = useRecoilState(authAtom);\n    const alertActions = useAlertActions();\n\n    return {\n        get: request('GET'),\n        post: request('POST'),\n        put: request('PUT'),\n        delete: request('DELETE'),\n        requestFile: requestFile('GET')\n    };\n\n    function request(method) {\n\n        async function requestor(url, header, body) {\n            var myHeaders = new Headers();\n            if (header) myHeaders.append(\"Content-Type\", header);\n            const requestOptions = {\n                method: method,\n                mode: \"no-cors\",\n                headers: myHeaders,\n                redirect: 'follow'\n            };\n            if(method == 'DELETE'){\n                requestOptions.mode = 'cors';\n            }\n            if (body) {\n                requestOptions.headers['Content-Type'] = header;\n                requestOptions.body = body;\n            }\n            return await fetch(url, requestOptions);\n        }\n     \n         return async (url, header, body) => {\n            let response = await requestor(url, header, body);\n            let rawjson = await response.clone().json();\n            if (url != \"http://localhost:3000/api/profile/me\"){\n                if (\"message\" in rawjson) {\n                    if (rawjson.status === \"Error\" && (rawjson.message.name === \"TokenNotFound\" || rawjson.message.name === \"UserNotFound\")){\n                        console.log(rawjson.status);\n                        setAuth(null);\n                        // localStorage.removeItem('userData');\n                        localStorage.clear();\n                    }\n                }\n            }\n            return response;\n        }\n    }\n\n    function requestFile(method) {\n\n        async function requestor(url, header, body) {\n            var myHeaders = new Headers();\n            if (header) myHeaders.append(\"Content-Type\", header);\n            const requestOptions = {\n                method: method,\n                mode: \"no-cors\",\n                headers: myHeaders,\n                redirect: 'follow'\n            };\n            if(method == 'DELETE'){\n                requestOptions.mode = 'cors';\n            }\n            if (body) {\n                requestOptions.headers['Content-Type'] = header;\n                requestOptions.body = body;\n            }\n            return await fetch(url, requestOptions);\n        }\n     \n         return async (url, header, body) => {\n            let response = await requestor(url, header, body);\n            return response;\n        }\n    }\n    // function loginrequest(method){\n    //     console.log(\"Test Login request\");\n    // }\n    \n    // helper functions\n    \n    function authHeader(url) {\n        // return auth header with jwt if user is logged in and request is to the api url\n        const token = auth?.token;\n        const isLoggedIn = !!token;\n        const isApiUrl = url.startsWith(process.env.REACT_APP_API_URL);\n        if (isLoggedIn && isApiUrl) {\n            return { Authorization: `Bearer ${token}` };\n        } else {\n            return {};\n        }\n    }\n    \n    function handleResponse(response) {\n        return response.text().then(text => {\n            const data = text && JSON.parse(text);\n            \n            if (!response.ok) {\n                if ([401, 403].includes(response.status) && auth?.token) {\n                    // auto logout if 401 Unauthorized or 403 Forbidden response returned from api\n                    localStorage.removeItem('user');\n                    setAuth(null);\n                    history.push('/account/login');\n                }\n                const error = (data && data.message) || response.statusText;\n                alertActions.error(error);\n                return Promise.reject(error);\n            }\n            \n            return data;\n        });\n    }    \n}\n","import { useRecoilState } from 'recoil';\nimport { useFetchWrapper } from '_helpers';\nimport { useAlertActions, useStudentInfoAction, useStudentScoreAction } from '_actions';\nimport { classesAtom } from '_state';\nimport {currentClassAtom} from '_state'\nexport { useClassWrapper };\n\nfunction useClassWrapper(param) {\n    const fetchWrapper = useFetchWrapper();\n    const alertActions = useAlertActions();\n    const studentInfoAction = useStudentInfoAction();\n    const studentScoreAction = useStudentScoreAction();\n    const [classes, setClasses] = useRecoilState(classesAtom);\n    const [curClass, setCurClass_] = useRecoilState(currentClassAtom);\n    async function getClassList(){\n        console.log(\"Get class list wrapper called.\");\n        const response = await fetchWrapper.get(\"http://localhost:3000/api/classes/me\", null, null);\n        if (response == null) {\n            console.log(\"No response.\");\n        }\n        response.json().then(rawjson => { \n            setClasses(rawjson.message);\n          });\n    }\n\n    async function createClass(param){\n        var urlencoded = new URLSearchParams();\n        urlencoded.append(\"class_name\", param);\n        console.log(\"Create class wrapper called\");\n          const response = await fetchWrapper.post(\"http://localhost:3000/api/classes/create\", \"application/x-www-form-urlencoded\", urlencoded);\n          if (response == null) {\n            console.log(\"No response\");\n          }\n          response.json().then(rawjson => { \n            console.log(rawjson);\n            if (rawjson.status == \"Success\"){\n              getClassList();\n            } else {\n              alertActions.error(\"Không thể tạo lớp\");\n            }\n          }); \n    }\n    \n    function setCurClass(cls) {\n      setCurClass_(cls);\n      localStorage.setItem(\"curClass\", cls)\n    }\n\n    function chooseClass(cls) {\n      setCurClass(cls);\n      localStorage.setItem('currentClass', JSON.stringify(cls).toString());\n      console.log(\"Choosen class :\", cls)\n      if (cls !== undefined) {\n        studentInfoAction.getStudentList(cls);\n        studentScoreAction.getScoreList(cls);\n      } \n  }\n\n    async function chooseClassById(classId) {\n      let response = await fetchWrapper.get(\"http://localhost:3000/api/classes/me\", null, null);\n      response = await response.json();\n      response = response.message\n      console.log(response)\n\t\t  for (var myClass of response) {\n        if (classId == null) {\n          chooseClass(myClass)\n          break;\n        }\n    \t\tif(classId == myClass.class_id) {\n\t\t\t\t  chooseClass(myClass);\n\t\t\t\t  break;\n\t\t\t  }\n      }\n\n    } \n\n    async function getCurrentClassTeacherInfo() {\n      if (curClass) {\n        let response = await fetchWrapper.get(`http://localhost:3000/api/classes/${curClass.class_id}?teacher=true`, null, null);\n        response = await response.json();\n        return response;\n      }\n    }\n\n    return {\n        classes : classes,\n        curClass,\n        getCurrentClassTeacherInfo:getCurrentClassTeacherInfo,\n        getClassList: getClassList,\n        createClass: createClass,\n        chooseClass: chooseClass,\n\t\t    chooseClassById,\n        setCurClass\n    };\n}\n\n\n\n","import { authAtom} from '_state';\nimport { useRecoilState } from 'recoil';\nimport { useFetchWrapper } from '_helpers';\nimport { useAlertActions ,useProfileAction} from '_actions';\nimport { alertBachAtom } from '_state';\nexport { useAuthWrapper };\n\nfunction useAuthWrapper(param) {\n      // console.log(\"Login in wrapper called\");\n      const [auth, setAuth] = useRecoilState(authAtom);\n      // const [user, setUser] = useRecoilState(userAtom);\n      const [alert, setAlert] = useRecoilState(alertBachAtom)\n      const fetchWrapper = useFetchWrapper();\n      const alertActions = useAlertActions();\n      const profileAction = useProfileAction();\n\n      async function login(param){\n          console.log(\"Login in wrapper called\");\n          const response = await fetchWrapper.post(\"http://localhost:3000/auth/login\", \"application/x-www-form-urlencoded\", param);\n          if (response == null) {\n            console.log(\"No response\");\n          }\n          console.log(response);\n          let rawjson = await response.json()\n            console.log(rawjson);\n            if (rawjson.status === \"Logged In Success\"){\n              console.log(rawjson.status);\n              setLoginToken(rawjson.message.token);\n              await loadUser();\n            } else {\n              setAlert({message: \"Thất bại\", description: \"Sai tên đăng nhập hoặc mật khẩu\"});\n            }\n            console.log(\"Token registered in Recoil is: \" + auth);\n            return rawjson\n        }\n\n        async function logout(){\n            console.log(\"Logout in authWrapper called\")\n            setLoginToken(\"\");\n            // localStorage.removeItem('userData');\n            localStorage.clear();\n            printLoginToken();\n        }\n  \n        function setLoginToken(token){\n          setAuth(token);\n          //setInterval(() => console.log(auth), 1000);\n          var now = new Date();\n          now.setMinutes( now.getMinutes() + 1000 );\n          document.cookie = `token=${token};expires=${now.toUTCString()};path=/`;\n          console.log(\"1 minute token registered.\");\n        }\n\n        function printLoginToken(token){\n          console.log(document.cookie);\n          console.log(auth);\n        }\n\n        async function loadUser(){\n          const response = await fetchWrapper.get(\"http://localhost:3000/api/profile/me\", null, null);\n          if (response == null) {\n            console.log(\"No response.\");\n          }\n          // console.log(response);\n          let rawjson = await response.json()\n          console.log(rawjson);\n          rawjson = rawjson.message\n          var userProfile = {\n            name: rawjson.name,\n            role: rawjson.role,\n            date_of_birth: rawjson.date_of_birth,\n            email: rawjson.email,\n            vnu_id: rawjson.vnu_id\n          }\n          console.log(userProfile)\n          profileAction.getMyProfile();\n          localStorage.setItem('userData', JSON.stringify(userProfile));\n        }\n\n        async function getUserInfo() {\n          let data = JSON.parse(localStorage.getItem(\"userData\"))\n          if (data  && data.vnu_id) {\n            return data\n          }\n            \n          else {\n            await loadUser();\n          }\n          return JSON.parse(localStorage.getItem(\"userData\"))\n        }\n  \n        function loadLoginToken(){\n          return async => {\n            var allcookies = document.cookie;\n            var cookiearray = allcookies.split(';');\n            var token = ''\n            for(var i=0; i<cookiearray.length; i++){\n              var namae = cookiearray[i].split('=')[0];\n              var value = cookiearray[i].split('=')[1];\n              if (namae=='token') \n                token = value;\n            }\n            setLoginToken(token);\n          }\n        }\n\n        async function forgetPassword(params) {\n          console.log(params)\n          var urlencoded = new URLSearchParams();\n          urlencoded.append(\"email\", params.email);\n          let response = {message: \"\"};\n          try {\n            response = await fetchWrapper.post(\"http://localhost:3000/api/auth/forget_password\", \"application/x-www-form-urlencoded\", urlencoded);\n            response = await response.json();\n            // console.log(response)\n            if (response.status == \"Success\") {\n              setAlert({message: \"Thành công\", description: response.message})\n            } else throw Error(\"Forget Password fail\")\n          } catch (e) {\n            setAlert({message: \"Thất bại\", description: response.message})\n          }\n        }\n\n        return {\n          login : login,\n          logout : logout,\n          tokenValue : auth,\n          getUserInfo : getUserInfo,\n          forgetPassword: forgetPassword,\n          // user: user,\n          // loadUserAtom: loadUserAtom,\n          loadLoginToken: loadLoginToken,\n          loadUser\n       };\n      }\n\n\n\n","import { createBrowserHistory } from 'history';\n\nconst history = createBrowserHistory();\n\nexport { history };","import { useRecoilState, useSetRecoilState, useResetRecoilState } from 'recoil';\n\nimport { history, useFetchWrapper, useAuthWrapper } from '_helpers';\nimport { authAtom, usersAtom, userAtom, currentClassAtom } from '_state';\nimport { alertBachAtom } from '_state';\nexport { useUserActions };\n\nfunction useUserActions () {\n    const baseUrl = `${process.env.REACT_APP_API_URL}/users`;\n    const fetchWrapper = useFetchWrapper();\n    const authWrapper = useAuthWrapper();\n    const [alert, setAlert] = useRecoilState(alertBachAtom)\n    const [auth, setAuth] = useRecoilState(authAtom);\n    const setUsers = useSetRecoilState(usersAtom);\n    const setUser = useSetRecoilState(userAtom);\n    const [curClass, setCurClass] = useRecoilState(currentClassAtom)\n    return {\n        login,\n        logout,\n        register,\n        update,\n        delete: _delete,\n        resetUsers: useResetRecoilState(usersAtom),\n        resetUser: useResetRecoilState(userAtom)\n    }\n\n    async function login({ username, password }) {\n        var details = {\n            'userName': username,\n            'password': password\n        };\n        \n        var urlencoded = new URLSearchParams();\n        urlencoded.append(\"username\", username);\n        urlencoded.append(\"password\", password);\n        let response = {message: \"\"};\n        try {\n        response = await authWrapper.login(urlencoded)\n        if (response.status == \"Error\") throw Error(\"Đăng nhập thất bại\") \n        console.log(response);\n        const { from } = history.location.state || { from: { pathname: '/' } };\n        history.push(from);\n        } catch(e) {\n            setAlert({message: \"Lỗi\", description: response.message})\n        }\n    }\n\n    async function logout() {\n        // remove user from local storage, set auth state to null and redirect to login page\n        // localStorage.removeItem('token');\n        console.log(\"Logout called.\");\n        await authWrapper.logout();\n        setCurClass(null);\n        history.push('/account/login');\n    }\n\n    function register(user) {\n        return fetchWrapper.post(`${baseUrl}/register`, user);\n    }\n\n    // function getAll() {\n    //     return fetchWrapper.get(baseUrl).then(setUsers);\n    // }\n\n    // function getById(id) {\n    //     return fetchWrapper.get(`${baseUrl}/${id}`).then(setUser);\n    // //}\n\n    function update(id, params) {\n        return fetchWrapper.put(`${baseUrl}/${id}`, params)\n            .then(x => {\n                // update stored user if the logged in user updated their own record\n                if (id === auth?.id) {\n                    // update local storage\n                    const user = { ...auth, ...params };\n                    localStorage.setItem('user', JSON.stringify(user));\n\n                    // update auth user in recoil state\n                    setAuth(user);\n                }\n                return x;\n            });\n    }\n\n    // prefixed with underscored because delete is a reserved word in javascript\n    function _delete(id) {\n        setUsers(users => users.map(x => {\n            // add isDeleting prop to user being deleted\n            if (x.id === id) \n                return { ...x, isDeleting: true };\n\n            return x;\n        }));\n\n        return fetchWrapper.delete(`${baseUrl}/${id}`)\n            .then(() => {\n                // remove user from list after deleting\n                setUsers(users => users.filter(x => x.id !== id));\n\n                // auto logout if the logged in user deleted their own record\n                if (id === auth?.id) {\n                    logout();\n                }\n            });\n    }\n}\n","import { useEffect } from 'react';\nimport { useRecoilState, useRecoilValue } from 'recoil';\n\nimport {useFetchWrapper} from '_helpers';\nimport { profileAtom , currentClassAtom, alertBachAtom} from '_state';\nimport { useAlertActions , useStudentInfoAction} from '_actions';\n\n\nexport {useProfileAction} \n\nfunction useProfileAction() {\n\n    const fetchWrapper = useFetchWrapper();\n    const [profile,setProfile] = useRecoilState(profileAtom);\n    const currentClass = useRecoilValue(currentClassAtom);\n    const alertActions = useAlertActions();\n    const studentInfoAction = useStudentInfoAction();\n    const [alert, setAlert] = useRecoilState(alertBachAtom);\n\n    async function getProfileById(Id) {\n        console.log(\"get profile by id\");\n        const response = await fetchWrapper.get(`http://localhost:3000/api/profile/${Id}`, null, null);\n        if (response == null) {\n            console.log(\"No response.\");\n            return null;\n        }\n        response.json().then(rawjson => { \n            console.log(rawjson);\n            return rawjson;\n          }); \n    }\n\n    async function getMyProfile() {\n        console.log(\"get my profile\");\n        const response = await fetchWrapper.get(`http://localhost:3000/api/profile/me`, null, null);\n        if (response == null) {\n            console.log(\"No response.\");\n            return null;\n        }   \n        response.json().then(rawjson => {   \n            console.log(rawjson);\n            setMyProfile(rawjson);\n            console.log('set my profile here');\n            return rawjson;\n          }); \n    }\n\n    function setMyProfile(rawjson) {\n        console.log('set my profile', rawjson);\n        setProfile(rawjson.message);\n    }\n\n    async function handleSubmit (info,Id,isTable){\n        var urlencoded = new URLSearchParams();\n        console.log('from profile action',info);\n        Object.entries(info).map(([key, val]) => {\n            urlencoded.append(key,val);\n            }\n        )\n        const response = await fetchWrapper.post(`http://localhost:3000/api/profile/edit/${Id}`, \"application/x-www-form-urlencoded\", urlencoded);\n        if (response == null) {\n          console.log(\"No response\");\n        }\n        response.json().then(rawjson => { \n          console.log(rawjson);\n          if (rawjson.status == \"Success\"){\n            getMyProfile();\n            if(isTable) {\n              studentInfoAction.getStudentList(currentClass);\n            }\n            setAlert({message: \"Thành công\", description: \"Cập nhật thông tin thành công\"});\n          } else {\n            setAlert({message: \"Lỗi\", description: rawjson.message});\n          }\n        }); \n    }\n\n    return {\n        getProfileById : getProfileById,\n        getMyProfile : getMyProfile,\n        setMyProfile : setMyProfile,\n        handleSubmit : handleSubmit,\n    }\n}","import { useEffect } from 'react';\nimport { useRecoilState, useRecoilValue } from 'recoil';\n\nimport {useFetchWrapper} from '_helpers';\nimport {studentsAtom, currentClassAtom, alertBachAtom} from '_state';\n\nexport{ useStudentInfoAction };\n\nfunction useStudentInfoAction (param) {\n    const fetchWrapper = useFetchWrapper();\n    const [students, setStudents] = useRecoilState(studentsAtom);\n    const currentClass = useRecoilValue(currentClassAtom);\n    const [alert, setAlert] = useRecoilState(alertBachAtom);\n\n    async function getStudentList(Class){\n        console.log(\"get student list called from studentInfo-action\");\n        const response = await fetchWrapper.get(`http://localhost:3000/api/classes/${Class.class_id}/members/infors`, null, null);\n        if (response == null) {\n            console.log(\"No response.\");\n            return null;\n        }\n        response.json().then(rawjson => { \n            console.log(rawjson);\n            setStudentData (rawjson);\n            return rawjson;\n          }); \n    }\n\n    function setStudentData (rawjson) {\n        let data = rawjson.message\n        console.log(\"Students info : \", data);\n        setStudents(data);\n        // console.log(students);\n    }\n\n    async function deleteStudent(Id){\n        console.log('from delete Student ',Id);\n        var urlencoded = new URLSearchParams();\n        urlencoded.append(\"members\", `[\"${Id}\"]`); \n        const response = await fetchWrapper.delete(`http://localhost:3000/api/classes/${currentClass.class_id}/members/delete`, \"application/x-www-form-urlencoded\", urlencoded);\n        if (response == null) {\n            console.log(\"No response.\");\n            setAlert({message: \"Lỗi\", description: \"Không thể xóa thành viên !\"});\n            return null;\n        }\n        response.json().then(rawjson => { \n            console.log(rawjson);\n            if (rawjson.status == \"Success\") {\n                getStudentList(currentClass);\n                setAlert({message: \"Thành công\", description: \"Xóa thành viên thành công !\"});\n            }\n            return rawjson;\n          }); \n    }\n\n    async function AddStudent(emails) {\n        emails = emails.replace(/\\s+/g, '');\n        var emailArr = emails.split(',');\n        var convertedEmails = '';\n        emailArr.forEach(function(element, idx, array){\n            \n            if (idx === array.length - 1){\n                convertedEmails +=  `\\\"${element}\\\"`;\n            } else {\n                convertedEmails +=  `\\\"${element}\\\",`;\n            }\n        });\n        var urlencoded = new URLSearchParams();\n        urlencoded.append(\"members\",`[${convertedEmails}]`);\n        console.log(urlencoded);\n        const response = await fetchWrapper.post(`http://localhost:3000/api/classes/${currentClass.class_id}/members/add`, \"application/x-www-form-urlencoded\", urlencoded);\n        if (response == null) {\n            console.log(\"No response.\");\n            setAlert({message: \"Lỗi\", description: \"Không thể thêm thành viên !\"});\n            return null;\n        }\n        response.json().then(rawjson => { \n            if (rawjson.status == \"Success\") {\n                getStudentList(currentClass);\n                var description;\n                var message = 'Thành công';\n                description = `Thêm các thành viên :${rawjson.message.registered} thành công ! Không thể các thành viên :${rawjson.message.failed}`\n                if (rawjson.message.registered.length === 0) {\n                    description = `Không thể thêm thành viên` ;\n                    message = \"Thất bại\";\n                }\n                if (rawjson.message.failed.length === 0){\n                    description = `Thêm thành viên thành công !`;\n                    } \n                setAlert({message: message, description: description});\n            }\n            return rawjson;\n          }); \n    }\n\n    return {\n        getStudentList : getStudentList,\n        deleteStudent : deleteStudent,\n        AddStudent : AddStudent,\n    }\n}\n","import { useRecoilState } from 'recoil';\nimport moment from 'moment';\n\nimport {useFetchWrapper} from '_helpers';\nimport {scoreAtom, pscoreAtom, alertBachAtom} from '_state';\nimport { ConsoleSqlOutlined } from '@ant-design/icons';\n\nexport{ useStudentScoreAction };\n\nfunction useStudentScoreAction (param) {\n    const fetchWrapper = useFetchWrapper();\n    const [score, setScore] = useRecoilState(scoreAtom);\n    const [pscore, setpScore] = useRecoilState(pscoreAtom);\n    const [alert, setAlert] = useRecoilState(alertBachAtom);\n\n    async function getScoreList(Class){\n        console.log(\"get student list called from studentInfo-action\");\n        const response = await fetchWrapper.get(`http://localhost:3000/api/classes/${Class.class_id}/members/scores`, null, null);\n        if (response == null) {\n            console.log(\"No response.\");\n            return null;\n        }\n        response.json().then(rawjson => { \n            console.log(rawjson);\n            setScoreData (rawjson);\n            return rawjson;\n          }); \n    }\n\n    async function getScoreByID(vnu_id){\n        // console.log(\"get score by id called from studentInfo-action\");\n        const response = await fetchWrapper.get(`http://localhost:3000/api/scores/${vnu_id}`, null, null);\n        if (response == null) {\n            console.log(\"No response.\");\n            return null;\n        }\n        let rawjson = await response.json();\n        return rawjson.message;\n    }\n\n    async function getMyScore(){\n        // console.log(\"get score by id called from studentInfo-action\");\n        const response = await fetchWrapper.get(`http://localhost:3000/api/scores/me`, null, null);\n        if (response == null) {\n            console.log(\"No response.\");\n            return null;\n        }\n        let rawjson = await response.json();\n        return rawjson.message;\n    }\n\n    async function getSemesterByID(semesterId){\n        // console.log(\"get semester by id called from studentInfo-action\");\n        const response = await fetchWrapper.get(`http://localhost:3000/api/semesters/${semesterId}`, null, null);\n        if (response == null) {\n            console.log(\"No response.\");\n            return {\n                    \"_id\": \"0000\",\n                    \"semester_id\": \"0000\",\n                    \"semester_name\": \"Kì học không xác định\",\n                };\n        }\n        let rawjson = await response.json();\n        return rawjson.message;\n    }\n\n    async function getAllSemester(){\n        // console.log(\"get semester by id called from studentInfo-action\");\n        const response = await fetchWrapper.get(`http://localhost:3000/api/semesters/all`, null, null);\n        if (response == null) {\n            console.log(\"No response.\");\n            return [];\n        }\n        let rawjson = await response.json();\n        return rawjson.message;\n    }\n\n\n    function setScoreData (rawjson) {\n        let data = rawjson.message\n        setScore(data);\n    }\n\n    function handleData(data) {\n        var refinedData = [];\n        if (data!=null){\n            data.forEach(object => {\n                var tempLevel = { Cplus: 0, C: 0, Dplus:0, D:0, F:0 }\n                var vnu_id = object.user_ref.vnu_id;\n                var name = object.user_ref.name;\n                var scoreObj = object.scores;  \n                var CPA = 0;\n                var totalCredit = 0;\n                var totalScore = 0;\n                var date_of_birth = object.user_ref.date_of_birth = moment.utc(object.user_ref.date_of_birth).format(\"DD/MM/YYYY\");\n                \n                scoreObj.forEach(scoreElement => { \n                    var score = scoreElement.score / 10 * 4;\n                    totalCredit += scoreElement.subject.credits_number;\n                    totalScore += scoreElement.subject.credits_number*scoreElement.score;  \n                    tempLevel.Cplus = (score<=2.5 && score>2) ? tempLevel.Cplus + 1 : tempLevel.Cplus;\n                    tempLevel.C = (score<=2 && score>1.5) ? tempLevel.C + 1 : tempLevel.C;\n                    tempLevel.Dplus =  (score<=2 && score>1.5) ? tempLevel.Dplus + 1 : tempLevel.Dplus;\n                    tempLevel.D =  (score<=1.5 && score>=1) ? tempLevel.D + 1 : tempLevel.D;\n                    tempLevel.F = (score<1 && score>0) ? tempLevel.F + 1 : tempLevel.F;          \n                });\n                CPA = ((totalScore/totalCredit)/10*4).toFixed(2); \n                var state = (CPA > 2.5) ? ['Bình thường'] : ['Cảnh cáo'];\n                state = (CPA < 1) ? ['Đuổi học'] : state;\n                state = Array.from(state);\n                const status = object.status.map(element => {\n\n                    return element.trim();\n                  });\n                state.push(...status);\n                state = state.map(element => {\n                    return element.toLocaleLowerCase();\n                  });\n                refinedData.push({\n                    vnu_id: vnu_id,\n                    name: name,\n                    date_of_birth: date_of_birth,\n                    cpa: CPA,\n                    tags: state,\n                    Cplus: tempLevel.Cplus,\n                    C: tempLevel.C,\n                    Dplus: tempLevel.Dplus,\n                    D: tempLevel.D,\n                    F: tempLevel.F,\n                })\n            });\n        }\n        \n        return refinedData\n    }\n\n    return {\n        getScoreList : getScoreList,\n        getScoreByID : getScoreByID,\n        getMyScore : getMyScore,\n        getSemesterByID : getSemesterByID,\n        getAllSemester : getAllSemester,\n        handleData : handleData,\n    }\n}\n","import React, { useEffect, useState } from 'react';\n\nimport { Link, useLocation, useParams } from 'react-router-dom';\nimport { useRecoilValue } from 'recoil';\nimport { authAtom } from '_state';\nimport {useClassWrapper} from '../_helpers/class-wrapper'\nimport { useUserActions } from '_actions';\nimport 'antd/dist/antd.css';\n\n\nimport { Layout, Menu } from 'antd';\nimport {\n  HomeOutlined,\n  MessageOutlined,\n  BellOutlined,\n  InfoCircleOutlined,\n  UserOutlined,\n  DashboardOutlined,\n  TableOutlined,\n  LoginOutlined,\n  UploadOutlined\n} from '@ant-design/icons';\n\nconst { Sider } = Layout;\n\nexport { Nav };\n\nfunction Nav(props) {\n    var classID = props.classID ? props.classID : \"\";\n    const location = useLocation();\n\n\t// const [pathname, setPathname] = useState(location.pathname);\n    const [collapsed, setCollapsed] = useState(false);\n    const onCollapse = (collapsed) => setCollapsed(collapsed);\n    const userActions = useUserActions();\n    const classWrapper = useClassWrapper();\n    const auth = props.auth;\n    const onLogout = props.onLogout;\n    var userData = JSON.parse(localStorage.getItem(\"userData\"));\n    // only show nav when logged in\n\n    useEffect(()=> {\n\t\tconsole.log(location.pathname)\n      console.log(\"NAV constructing \", classID);\n      userData = JSON.parse(localStorage.getItem(\"userData\"));\n    }, [])\n\n\t\n\n    if (!auth) return null;\n    // const currentClassID = JSON.parse(localStorage.getItem('currentClass')).class_id;\n\n    return (\n        <Sider style={{\n          overflow: 'auto',\n          height: '90vh',\n          left: 0,\n          top: 64,\n          position: \"sticky\"\n        }}\n        collapsible collapsed={collapsed} \n        onCollapse={onCollapse}\n        >\n          <div className=\"logo\" />\n          <Menu\n            theme=\"dark\"\n            mode=\"inline\"\n            defaultSelectedKeys={[location.pathname]}\n\t\t\t      selectedKeys={[location.pathname]}\n          >\n            {!classWrapper.curClass && \n              <Menu.Item key=\"/\">\n                <HomeOutlined />\n                <span>Trang chủ</span>\n                <Link to=\"/\"></Link>\n              </Menu.Item>\n              \n            }\n\n            {(classWrapper.curClass) &&\n              <>\n              {(userData.role == \"teacher\") &&\n              \n                <Menu.Item key={`/${classWrapper.curClass.class_id}/`}>\n                  <HomeOutlined />\n                  <span>Trang chủ</span>\n                  <Link to={`/${classWrapper.curClass.class_id}/`}></Link>\n                </Menu.Item>\n              }\n              {(userData.role == \"student\") &&\n              <Menu.Item key={`/stuhome`}>\n                <HomeOutlined />\n                <span>Trang chủ</span>\n                <Link to={`/stuhome`}></Link>\n              </Menu.Item>\n              }\n              \n              {(userData.role == \"teacher\") &&\n              <>\n                <Menu.Item key={`/${classWrapper.curClass.class_id}/dashboard`}>\n                  <DashboardOutlined />\n                  <span>Dashboard</span>\n                  <Link to={`/${classWrapper.curClass.class_id}/dashboard`}></Link>\n                </Menu.Item>\n                <Menu.Item key=\"/chat\">\n                <MessageOutlined />\n                <span>Tin nhắn</span>\n                <Link to=\"/chat\"></Link>\n              </Menu.Item>\n              </>\n              }\n               <Menu.Item key={`/${classWrapper.curClass.class_id}/feed`}>\n                  <BellOutlined />\n                  <span>Diễn đàn</span>\n                  <Link to={`/${classWrapper.curClass.class_id}/feed`}></Link>\n                </Menu.Item>\n              {(userData.role == \"teacher\") &&\n                <Menu.Item key={`/${classWrapper.curClass.class_id}/studentinfo`}>\n                  <InfoCircleOutlined />\n                  <span>Thông tin SV</span>\n                  <Link to={`/${classWrapper.curClass.class_id}/studentinfo`}></Link>\n                </Menu.Item>\n              }\n               \n              {(userData.role == \"teacher\") &&\n                <Menu.Item key={`/${classWrapper.curClass.class_id}/studentscore`}>\n                  <TableOutlined />\n                  <span>Bảng điểm SV</span>\n                  <Link to={`/${classWrapper.curClass.class_id}/studentscore`}></Link>\n                </Menu.Item>\n              }\n\n              {(userData.role == \"student\") &&\n                <Menu.Item key={`/personalscore`}>\n                  <UserOutlined />\n                  <span>Bảng điểm cá nhân</span>\n                  <Link to={`/personalscore`}></Link>\n                </Menu.Item>\n              }\n              </>\n            }\n            <>\n              {(userData?.role === \"teacher\") &&\n                <Menu.Item key={`/dbportal`}>\n                  <UploadOutlined />\n                  <span>Quản lý CSDL</span>\n                  <Link to={`/dbportal`}></Link>\n                </Menu.Item>}\n            </>\n            \n            \n            <Menu.Item key=\"/profile\">\n              <UserOutlined />\n              <span>Hồ sơ cá nhân</span>\n              <Link to=\"/profile\"></Link>\n            </Menu.Item>\n            <Menu.Item key=\"nothing\">\n            </Menu.Item>\n            <Menu.Item key=\"logout\" onClick={userActions.logout}>\n              <LoginOutlined />\n              <span>Đăng xuất</span>\n            </Menu.Item>\n          </Menu>\n\n        </Sider>\n    );\n}\n","import { Route, Redirect } from 'react-router-dom';\nimport { useRecoilValue } from 'recoil';\n\nimport { useAuthWrapper } from '_helpers';\n\nexport { PrivateRoute };\n\nfunction PrivateRoute({ component: Component, ...rest }) {\n    const authWrapper = useAuthWrapper();\n    return (\n        <Route {...rest} render={props => {\n    \n            if (authWrapper.tokenValue) {\n                return <Component {...props} />\n            } else\n            \n            //not logged in\n          \n            return <Redirect to={{ pathname: '/account/login', state: { from: props.location } }} />\n        }} />\n    );\n}","import React, {useState} from 'react'\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css';\nimport { Card , Row, Col, Modal, Form, Input, Space, Button, Drawer} from 'antd';\nimport { useRecoilState } from 'recoil';\nimport { classesAtom } from '_state';\nimport { useClassWrapper } from '_helpers';\nimport { Link } from 'react-router-dom';\n// import { useClassActions } from '_actions';\n\nexport { ClassPicker };\n\nconst cardStyle = {\n    textAlign: 'center',\n    marginTop : '30px',\n    marginLeft : '30px',\n    width: 240 \n  };\n\nconst cardHeadStyle = {\n   backgroundColor : '#1E90FF',\n   border : 0,\n   padding : 0,\n}\n\nfunction ClassPicker(props) {\n    const classWrapper = useClassWrapper();\n    const [classes, setClasses] = useRecoilState(classesAtom);\n    const [visible, setVisible] = React.useState(false);\n    const [confirmLoading, setConfirmLoading] = React.useState(false);\n  \n    const showModal = () => {\n      setVisible(true);\n    };\n  \n    const handleOk = (values) => {\n      // console.log(\"Sending.\");\n      setConfirmLoading(true);\n      classWrapper.createClass(values.class_name);\n      setVisible(false);\n      setConfirmLoading(false);\n      // console.log(classes);\n    };\n\n    var drawerVisible = props.drawerVisible;\n    var setDrawerVisible = props.setDrawerVisible;\n    var onDrawerClose = props.onDrawerClose;\n    var input = classWrapper.classes;\n  \n    // console.log(input);\n\n    let Cards = [];\n    for(let i = 0; i < input.length; i++) {\n        Cards.push(\n            <div key = {input[i].class_id} onClick = {() => {\n                        classWrapper.chooseClass(input[i]);\n                    }}>\n                <Col>\n                    <Link to={\"/\" + input[i].class_id + \"/\"} onClick={onDrawerClose}>\n                        <Card title = {input[i].class_name} \n                        style = {cardStyle} headStyle = {cardHeadStyle}\n                        cover={<img alt=\"example\" src={'https://maisienoble.github.io/jig/images/backgrounds/blueish.jpg'} />}\n                        hoverable = 'true'>\n                            <p>Lớp đại học</p>\n                        </Card>\n                    </Link>\n                </Col>\n            </div>)\n    }\n    \n    Cards.push(\n        <div key = 'abcdef' onClick = {() => {\n                    showModal();\n                }}>\n            <Col>\n                <Card title = \"Thêm lớp học\" \n                style = {cardStyle}\n                // cover={<img alt=\"example\" src={'https://maisienoble.github.io/jig/images/backgrounds/blueish.jpg'} />}\n                hoverable = 'true'>\n                    <p>\n                        Nhấn vào để thêm lớp mới\n                    </p>\n                </Card>\n            </Col>\n        </div>)\n\n    return (\n        <Drawer title=\"Chọn một lớp...\" placement=\"right\" onClose={onDrawerClose} visible={drawerVisible} width=\"640\">\n            <Row wrap = 'true'> \n            <CollectionCreateForm\n                visible={visible}\n                onCreate={handleOk}\n                onCancel={() => {\n                    setVisible(false);\n                }}\n            />     \n            {Cards}       \n        </Row>\n        </Drawer>\n    )\n}\n\nconst CollectionCreateForm = ({ visible, onCreate, onCancel }) => {\n    const [form] = Form.useForm();\n    return (\n      <Modal\n        animation={false}\n        visible={visible}\n        title=\"Tạo lớp học mới\"\n        okText=\"Tạo\"\n        cancelText=\"Hủy\"\n        onCancel={onCancel}\n        onOk={() => {\n          form\n            .validateFields()\n            .then((values) => {\n              form.resetFields();\n              onCreate(values);\n            })\n            .catch((info) => {\n              console.log('Validate Failed:', info);\n            });\n        }}\n      >\n        <Form\n          animation={false}\n          form={form}\n          layout=\"vertical\"\n          name=\"form_in_modal\"\n          initialValues={{\n            modifier: 'public',\n          }}\n        >\n          <Form.Item\n            name=\"class_name\"\n            label=\"Tên lớp:\"\n            rules={[\n              {\n                required: true,\n                message: 'Please input the title of collection!',\n              },\n            ]}\n            >\n            <Input />\n          </Form.Item>\n        </Form>\n      </Modal>\n    );\n};\n\n// const input = [{\n//         \"id\" : \"1\",\n//         \"className\" : \"K64CACLC1\",\n//         \"background\" : \"https://maisienoble.github.io/jig/images/backgrounds/blueish.jpg\"},\n//     {\n//         \"id\" : \"2\",\n//         \"className\" : \"K64CACLC2\",\n//         \"background\" : \"https://maisienoble.github.io/jig/images/backgrounds/brilliant-shapes.jpg\"},\n//     {\n//         \"id\" : \"3\",\n//         \"className\" : \"K64CACLC3\",\n//         \"background\" : \"https://maisienoble.github.io/jig/images/backgrounds/dark-light-blue.jpg\"},\n//     {\n//         \"id\" : \"4\",\n//         \"className\" : \"K64CACLC4\",\n//         \"background\" : \"https://maisienoble.github.io/jig/images/backgrounds/blueish.jpg\"},\n//     {\n//         \"id\" : \"5\",\n//         \"className\" : \"K64CLC1\",\n//         \"background\" : \"https://maisienoble.github.io/jig/images/backgrounds/blueish.jpg\"},\n//     {\n//         \"id\" : \"2\",\n//         \"className\" : \"K64CACLC2\",\n//         \"background\" : \"https://maisienoble.github.io/jig/images/backgrounds/blueish.jpg\"},\n//     {\n//         \"id\" : \"3\",\n//         \"className\" : \"K64CACLC3\",\n//         \"background\" : \"https://maisienoble.github.io/jig/images/backgrounds/blueish.jpg\"},\n//     {\n//         \"id\" : \"4\",\n//         \"className\" : \"K64CACLC4\",\n//         \"background\" : \"https://maisienoble.github.io/jig/images/backgrounds/blueish.jpg\"},\n//     {\n//         \"id\" : \"5\",\n//         \"className\" : \"K64CLC1\",\n//         \"background\" : \"https://maisienoble.github.io/jig/images/backgrounds/blueish.jpg\"}, \n//     {\n//         \"id\" : \"2\",\n//         \"className\" : \"K64CACLC2\",\n//         \"background\" : \"https://maisienoble.github.io/jig/images/backgrounds/blueish.jpg\"},\n//     {\n//         \"id\" : \"3\",\n//         \"className\" : \"K64CACLC3\",\n//         \"background\" : \"https://maisienoble.github.io/jig/images/backgrounds/blueish.jpg\"},\n//     {\n//         \"id\" : \"4\",\n//         \"className\" : \"K64CACLC4\",\n//         \"background\" : \"https://maisienoble.github.io/jig/images/backgrounds/blueish.jpg\"},\n//     {\n//         \"id\" : \"5\",\n//         \"className\" : \"K64CLC1\",\n//         \"background\" : \"https://maisienoble.github.io/jig/images/backgrounds/blueish.jpg\"}\n// ];\n","import { Link } from 'react-router-dom';\nimport { useRecoilValue, useRecoilState } from 'recoil';\nimport {useEffect, useState} from 'react'\nimport { authAtom } from '_state';\nimport { useAuthWrapper, useClassWrapper } from '_helpers';\nimport { classPickerVisibleAtom } from '_state';\nimport {Redirect} from 'react-router-dom';\nimport {Button, Card , Row, Col} from 'antd';\n\nimport {\n    HomeOutlined,\n    MessageTwoTone,\n    BellTwoTone,\n    InfoCircleTwoTone,\n    AppstoreTwoTone,\n    DashboardTwoTone,\n    LayoutTwoTone,\n    LeftCircleTwoTone,\n    HddTwoTone\n} from '@ant-design/icons';\nimport { useUserActions } from '_actions';\n\nexport { Home };\n\n\n\nfunction Home() {\n    const [drawerVisible, setDrawerVisible] = useRecoilState(classPickerVisibleAtom);\n    const authWrapper = useAuthWrapper()\n    const userData = JSON.parse(localStorage.getItem(\"userData\"));\n    const [studentFirstClassLoaded, setStudentFirstClassLoaded] = useState(false);\n    const classWrapper = useClassWrapper();\n    const userActions = useUserActions();\n    \n\n    const onClick = () => {\n        classWrapper.getClassList();\n        setDrawerVisible(true);\n    };\n\n    useEffect(() => {\n        \n        async function loadFirstClassForStudent(){\n            console.log(userData)\n            if (userData.role == \"student\") {\n               \n                // choose first class if student\n                await classWrapper.chooseClassById(null);\n                setStudentFirstClassLoaded(true);\n                \n            }\n        }\n        loadFirstClassForStudent()\n    }) \n    return (userData.role && <>\n    \n            {(userData.role === \"teacher\") && \n                <>\n                    <div className=\"p-4\">\n                        <div className=\"container\">\n                            <h3>Chào mừng đến với Ứng dụng Quản lý Sinh viên - Cố vấn học tập!</h3>\n                            <br/>\n                            <Row>\n                            <Col flex='520px'>\n                                        <Link to={`/profile`}>\n                                        <Card hoverable style={{ width: 500, height: 310 }}>\n                                            <h5>Thông tin cá nhân</h5>\n                                            <h3>{userData.name}</h3><br/>\n                                            Vai trò<br/>\n                                            <h4>{userData.role == \"student\"? \"Sinh viên\" : \"Cố vấn học tập\"}</h4>\n                                            Lớp hiện tại<br/>\n                                            <h4>{classWrapper.curClass? classWrapper.curClass.class_name : \"Vui lòng chọn lớp để bắt đầu\" }</h4>\n                                        </Card></Link>\n                            </Col>\n                            <Col flex='200px'>\n                                <Row>  \n                                    <Card style={{ width: 240, height: 145}} onClick = {onClick} hoverable>\n                                        <AppstoreTwoTone twoToneColor=\"#205ec9\"style={{ fontSize: '40px', display: 'inline-block', verticalAlign: 'middle' }}/>\n                                        <br/><br/><h5>{classWrapper.curClass ? \"Đổi lớp\" : \"Chọn lớp\"}</h5>\n                                    </Card>\n                                </Row>\n                                <br/>\n                                {/* For tuition fee status */}\n                                <Row>  \n                                    <Card style={{ width: 240, height: 145}} hoverable onClick={userActions.logout}>\n                                        <LeftCircleTwoTone twoToneColor=\"#cf1b4b\"style={{ fontSize: '40px', display: 'inline-block', verticalAlign: 'middle' }}/>\n                                        <br/><br/><h5>Đăng xuất</h5>\n                                    </Card>\n                                </Row>\n                            </Col>\n                            </Row>\n                            <br/><br/>\n\n                            {(classWrapper.curClass) &&\n                                <>\n                                    <h4>Tiện ích liên lạc </h4>\n                                    <Row>\n                                    <Col flex='260px'>\n                                        <Link to={`/${classWrapper.curClass.class_id}/studentinfo`}>\n                                        <Card hoverable style={{ width: 240 }}>\n                                            <InfoCircleTwoTone twoToneColor=\"#206cc9\"style={{ fontSize: '30px', display: 'inline-block', verticalAlign: 'middle' }}/>\n                                            <br/><br/><h4>Thông tin liên hệ</h4>\n                                        </Card></Link>\n                                    </Col>\n                                    <Col flex='260px'>\n                                        <Link to={`/${classWrapper.curClass.class_id}/feed`}>\n                                        <Card hoverable style={{ width: 240 }}>\n                                            <BellTwoTone twoToneColor=\"#c98e20\"style={{ fontSize: '30px', display: 'inline-block', verticalAlign: 'middle' }}/>\n                                            <br/><br/><h4>Diễn đàn</h4>\n                                        </Card></Link>\n                                    </Col>\n                                    <Col flex='260px'>\n                                        <Link to={`/chat`}>\n                                        <Card hoverable style={{ width: 240 }}>\n                                            <MessageTwoTone twoToneColor=\"#5e20c9\"style={{ fontSize: '30px', display: 'inline-block', verticalAlign: 'middle' }}/>\n                                            <br/><br/><h4>Nhắn tin</h4>\n                                        </Card></Link>\n                                    </Col>\n                                    </Row>\n                                    <br/><br/>\n                                    <h4>Tiện ích theo dõi & thống kê</h4>\n                                    <Row>\n                                    <Col flex='260px'>\n                                        <Link to={`/${classWrapper.curClass.class_id}/dashboard`}>\n                                        <Card hoverable style={{ width: 240 }}>\n                                            <DashboardTwoTone twoToneColor=\"#52c41a\"style={{ fontSize: '30px', display: 'inline-block', verticalAlign: 'middle' }}/>\n                                            <br/><br/><h4>Bảng theo dõi</h4>\n                                        </Card></Link>\n                                    </Col>\n                                    \n                                    <Col flex='260px'>\n                                        <Link to={`/${classWrapper.curClass.class_id}/studentscore`}>\n                                        <Card hoverable style={{ width: 240 }}>\n                                            <LayoutTwoTone twoToneColor=\"#52c41a\"style={{ fontSize: '30px', display: 'inline-block', verticalAlign: 'middle' }}/>\n                                            <br/><br/><h4>Bảng điểm</h4>\n                                        </Card></Link>\n                                    </Col>\n                                    <Col flex='260px'>\n                                        <Link to={`/dbportal`}>\n                                        <Card hoverable style={{ width: 240 }}>\n                                            <HddTwoTone twoToneColor=\"#52c41a\"style={{ fontSize: '30px', display: 'inline-block', verticalAlign: 'middle' }}/>\n                                            <br/><br/><h4>Quản lý CSDL</h4>\n                                        </Card></Link>\n                                    </Col>\n                                    </Row>\n                                                                        \n                                </>\n                            }\n\n                            \n                            <br/>\n                            <b>Website Quản lý Sinh viên - Cố vấn học tập</b><br/>\n                            <b>Bài tập lớn môn Lập trình ứng dụng Web</b><br/>\n                            <b>Thực hiện bởi:</b> {\" Trần Xuân Bách, Đặng Thế Hoàng Anh, Nguyễn Việt Anh, Hoàng Hữu Bách, Nguyễn Bá Anh Tuấn\"}\n                            \n                            <br/>\n                        </div>\n                    </div>\n                </>\n            }\n            {(userData.role === \"student\") && \n                <>\n                    {(studentFirstClassLoaded && !classWrapper.curClass) &&\n                        <>\n                            <div className=\"p-4\">\n                                <div className=\"container\">\n                                    <h1>Xin chào, bạn là sinh viên nhưng chưa có lớp!</h1><br>\n                                    </br>\n                                    <h5>Vui lòng liên hệ với admin hệ thống và nhà trường để được thêm vào trang lớp học của bạn.</h5>\n                                </div>\n                            </div>\n                        </>\n                    }\n                </>\n            }\n            {(studentFirstClassLoaded && classWrapper.curClass) &&\n                <>\n                    <Redirect from=\"*\" to={`/stuhome`} />\n                </>\n            }\n            \n            {(userData.role === \"admin\") && \n                <>\n                    <div className=\"p-4\">\n                        <div className=\"container\">\n                            <h1>Xin chào Admin!</h1>\n                        </div>\n                    </div>\n                </>\n            }\n        </>)\n}","import { useEffect } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { useRecoilValue, RecoilRoot } from 'recoil';\n\nimport { authAtom, initClassAtom } from '_state';\nimport { Login, PasswordRecover } from './';\n\nexport { Account };\n\nfunction Account({ history, match }) {\n    const auth = useRecoilValue(authAtom);\n    const classPicked = useRecoilValue(initClassAtom);\n    const { path } = match;\n\n    useEffect(() => {\n        if (auth) history.push('/');\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return (\n        <div className=\"container\">\n            <div className=\"row\">\n                <div className=\"col-sm-8 offset-sm-2 mt-5\">\n                    <Switch>\n                        <Route path={`${path}/login`} component={Login} />\n                        <Route path={`${path}/passwordrecover`} component={PasswordRecover} />\n                    </Switch>\n                </div>\n            </div>\n        </div>\n\n    );\n}\n","import {  Form, Input, Button, Checkbox  } from 'antd';\nimport { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as Yup from 'yup';\n\nimport { useAlertActions, useUserActions } from '_actions';\nimport { Redirect } from 'react-router-dom';\nimport { authAtom } from '_state';\nimport { useRecoilValue } from 'recoil';\nimport { useAuthWrapper } from '_helpers';\nexport { Login };\n\nfunction Login(props) {\n    const userActions = useUserActions();\n    const auth = useRecoilValue(authAtom);\n    const authWrapper = useAuthWrapper();\n    const [loginDone, setLoginDone] = useState(false)\n    // form validation rules \n    const validationSchema = Yup.object().shape({\n        username: Yup.string().required('Vui lòng điền tên người dùng'),\n        password: Yup.string().required('Vui lòng điền mật khẩu')\n    });\n    const formOptions = { resolver: yupResolver(validationSchema) };\n\n    // get functions to build form with useForm() hook\n    const { register, handleSubmit, formState } = useForm(formOptions);\n    const { errors, isSubmitting } = formState;\n\n    useEffect(() => {\n        async function loadUser(){\n            await authWrapper.loadUser();\n            setLoginDone(true);\n        }\n        if (auth)\n            loadUser();\n        else {\n            userActions.logout();\n        }\n    }, [auth])\n    return (loginDone ? \n            // logged in \n            <Redirect to={{ pathname: '/', state: { from: props.location } }} />\n        :\n        \n        <div className=\"card m-3\">\n            <h4 className=\"card-header\">Đăng nhập hệ thống</h4>\n            <div className=\"card-body\">\n                <form onSubmit={handleSubmit(userActions.login)}>\n                    <div className=\"form-group\">\n                        <label>Tài khoản</label>\n                        <input name=\"username\" type=\"text\" {...register('username')} className={`form-control ${errors.username ? 'is-invalid' : ''}`} />\n                        <div className=\"invalid-feedback\">{errors.username?.message}</div>\n                    </div>\n                    <div className=\"form-group\">\n                        <label>Mật khẩu</label>\n                        <input name=\"password\" type=\"password\" {...register('password')} className={`form-control ${errors.password ? 'is-invalid' : ''}`} />\n                        <div className=\"invalid-feedback\">{errors.password?.message}</div>\n                    </div>\n                    <button disabled={isSubmitting} className=\"btn btn-primary\">\n                        {isSubmitting && <span className=\"spinner-border spinner-border-sm mr-1\"></span>}\n                        Đăng nhập\n                    </button>\n                    <Link to=\"passwordrecover\" className=\"btn btn-link\">Quên mật khẩu</Link>\n                </form>\n                \n            </div>\n        </div>\n\n    )\n}\n","import { Link } from 'react-router-dom';\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as Yup from 'yup';\n\nimport { useUserActions, useAlertActions } from '_actions';\nimport { useAuthWrapper } from '_helpers';\nexport { PasswordRecover };\n\nfunction PasswordRecover({ history }) {\n    const userActions = useUserActions();\n    const alertActions = useAlertActions();\n    const authWrapper = useAuthWrapper();\n    // form validation rules \n    const validationSchema = Yup.object().shape({\n        email: Yup.string()\n            .required('Username is required'),\n    });\n    const formOptions = { resolver: yupResolver(validationSchema) };\n\n    // get functions to build form with useForm() hook\n    const { register, handleSubmit, formState } = useForm(formOptions);\n    const { errors, isSubmitting } = formState;\n\n    async function onSubmit(data) {\n        await authWrapper.forgetPassword(data)\n    }\n\n    return (\n        <div className=\"card m-3\">\n            <h4 className=\"card-header\">Khôi phục tài khoản</h4>\n            <div className=\"card-body\">\n                <form onSubmit={handleSubmit(onSubmit)}>\n                    <div className=\"form-group\">\n                        <label>Vui lòng nhập email đã đăng ký với tài khoản của bạn</label>\n                        <input name=\"email\" type=\"text\" {...register('email')} className={`form-control ${errors.email ? 'is-invalid' : ''}`} />\n                        <div className=\"invalid-feedback\">{errors.username?.message}</div>\n                    </div>\n                    <button disabled={isSubmitting} className=\"btn btn-primary\">\n                        {isSubmitting && <span className=\"spinner-border spinner-border-sm mr-1\"></span>}\n                        Khôi phục\n                    </button>\n                    <Link to=\"login\" className=\"btn btn-link\">Quay lại</Link>\n                </form>\n            </div>\n        </div>\n    )\n}\n","import { useRecoilState } from 'recoil';\nimport React ,{useEffect, useState } from 'react';\nimport { dashboardGPAAtom, studentsAtom, scoreAtom, profileAtom } from '_state';\nimport { BachComponent } from '_components/subcomponents';\nimport { InfoCircleOutlined} from '@ant-design/icons';\nimport { Link } from 'react-router-dom';\n\nimport { GPADash } from '_components/dashboard';\nimport { StatisticBoard } from '_components/dashboard';\nimport { Row, Col, Card, Button } from 'antd';\nimport { useStudentScoreAction } from '_actions';\nimport { useClassWrapper } from '_helpers';\n\nexport { Dashboard };\n\n\nfunction Dashboard() {\n    const [student, setstudent] = useRecoilState(studentsAtom);\n    const [score, setScore] = useRecoilState(scoreAtom);\n    const classWrapper = useClassWrapper();\n    const studentScoreAction = useStudentScoreAction();\n    const userData = JSON.parse(localStorage.getItem(\"userData\"));\n    // const [profile,setProfile] = useRecoilState(profileAtom);\n\n    const [dashProperties, setDashProperties] = useState({\n        className: \"Không hiển thị được tên lớp\",\n        teacherName: \"Không hiển thị được tên CVHT\",\n        studentCount: 0,\n        studentThieuTinChi: 0,\n        studentThieuHocPhi: 0,\n        classID: \"\"\n    })\n\n    useEffect(() =>{\n        console.log(\"Reconstruct GPADash\")\n        async function initDashboard() {\n            var classNameTemp = classWrapper.curClass.class_name;\n            var classIDTemp = classWrapper.curClass.class_id;\n            var teacherNameTemp = userData.name;\n            var studentCountTemp = 0;\n            var studentThieuTinChiTemp = 0;\n            var studentThieuHocPhiTemp = 0;\n            if (\"length\" in student) studentCountTemp = student.length;\n            if (score!= null) {\n                if (score!= \"You are not teacher in this class\")  {\n                    console.log(score);\n                    score.forEach(object => {\n                        if (object.status.includes(\"Chưa nộp học phí\")) studentThieuHocPhiTemp++;\n                        if (object.status.includes(\"Chưa đủ tín\")) studentThieuTinChiTemp++;\n                    })\n                }\n            }\n            // console.log(student);\n            setDashProperties({\n                className : classNameTemp,\n                teacherName : teacherNameTemp,\n                studentCount : studentCountTemp,\n                studentThieuTinChi: studentThieuTinChiTemp,\n                studentThieuHocPhi: studentThieuHocPhiTemp,\n                classID : classIDTemp\n            });\n        };\n        initDashboard();\n    },[classWrapper.curClass]);\n\n    return (\n        <div className=\"p-4\" style = {{overflow : \"auto\"}}>\n            <center style =  {{padding : -0.25}}>\n                <Card title=\"Bảng theo dõi\" style={{ width: 1200 , height: 1400 , overflow: 'auto' }}>\n                    <Row justify = \"center\">\n                        {/* For Class name renderer */}\n                        <Col>\n                            <div className=\"p-4\">\n                                <Card style={{width: 600, height: 220}} hoverable>\n                                    <span style={{\"font-size\": '17px'}}>Lớp hiện tại</span><br/>\n                                    <h3>{dashProperties.className}</h3><br/>\n                                    <span style={{\"font-size\": '17px'}}>Cố vấn học tập</span>\n                                    <h3>{dashProperties.teacherName}</h3><br/>\n                                </Card>\n                            </div>\n                        </Col>\n                        {/* For Class student number renderer */}\n                        <Col>\n                            <div className=\"p-4\">\n                                <Card style={{width: 300, height: 220}} hoverable>\n                                    <span style={{\"font-size\": '17px'}}>Sĩ số lớp</span><br/>\n                                    <span style={{\"font-size\": '48px', \"line-height\": 'normal' }}>{dashProperties.studentCount}</span><br/>\n                                    <span style={{\"font-size\": '27px', \"line-height\": 'normal' }}> sinh viên</span><br/> <br/>\n                                    <Link to={`/${dashProperties.classID}/studentinfo`}>\n                                        <Button icon={<InfoCircleOutlined />}>Xem danh sách</Button>\n                                    </Link>\n                                    \n                                </Card>\n                            </div>\n                        </Col>\n                    </Row>\n                    <Row justify = 'center'>\n                        <Col>\n                            <GPADash score = {score}>\n                            </GPADash>\n                        </Col>\n                        <Col>\n                            <div className=\"p-4\">\n                                {/* For Class warning  status renderer */}\n                                <Row>  \n                                    <Card style={{ width: 300, height: 220}} hoverable>\n                                        <span style={{\"font-size\": '17px'}}>Sinh viên thiếu tín chỉ</span><br/>\n                                        <span style={{\"font-size\": '48px', \"line-height\": 'normal' }}>{dashProperties.studentThieuTinChi}</span><br/>\n                                        <span style={{\"font-size\": '27px', \"line-height\": 'normal' }}> sinh viên</span><br/> <br/>\n                                        <Link to={`/${dashProperties.classID}/studentscore`}>\n                                        <Button icon={<InfoCircleOutlined />}>Xem tình trạng</Button>\n                                        </Link>\n                                    </Card>\n                                </Row>\n                                {/* For tuition fee status */}\n                                <Row>  \n                                    <Card style={{ width: 300, height: 220}} hoverable>\n                                        <span style={{\"font-size\": '17px'}}>Sinh viên thiếu học phí</span><br/>\n                                        <span style={{\"font-size\": '48px', \"line-height\": 'normal' }}>{dashProperties.studentThieuHocPhi}</span><br/>\n                                        <span style={{\"font-size\": '27px', \"line-height\": 'normal' }}> sinh viên</span><br/> <br/>\n                                        <Link to={`/${dashProperties.classID}/studentscore`}>\n                                        <Button icon={<InfoCircleOutlined />}>Xem tình trạng</Button>\n                                        </Link>\n                                    </Card>\n                                </Row>\n\n                            </div>\n                        </Col>\n                    </Row>\n                    <StatisticBoard score = {score}>\n                    </StatisticBoard>\n                </Card>\n            </center>\n        </div>\n    )\n}\n\nconst data = [\n    {\n        \"_id\": \"618954e38d701d9ce220efd6\",\n        \"user_ref\": {\n            \"_id\": \"61890aee03ab0fa21bc50227\",\n            \"name\": \"Nguyễn Việt Anh\",\n            \"role\": \"teacher\",\n            \"location\": \"ABC\",\n            \"date_of_birth\": 1636466043,\n            \"email\": \"bach2@gmail.com\",\n            \"vnu_id\": \"19021212\",\n            \"__v\": 0\n        },\n        \"scores\": [\n            {\n                \"_id\": \"618954e38d701d9ce220efd8\",\n                \"score\": 9,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50255\",\n                    \"subject_name\": \"Mon 1\",\n                    \"subject_code\": \"INT1100\",\n                    \"credits_number\": 3,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            },\n            {\n                \"_id\": \"618954e38d701d9ce220effc\",\n                \"score\": 8,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50257\",\n                    \"subject_name\": \"Mon 2\",\n                    \"subject_code\": \"INT1111\",\n                    \"credits_number\": 4,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            }\n        ],\n        \"__v\": 2\n    },\n    {\n        \"_id\": \"618954e38d701d9ce220efdf\",\n        \"user_ref\": {\n            \"_id\": \"61890b1703ab0fa21bc5023f\",\n            \"name\": \"Trần Xuân Bách\",\n            \"role\": \"student\",\n            \"location\": \"ABC\",\n            \"date_of_birth\": 1037197791,\n            \"email\": \"bach2@gmail.com\",\n            \"vnu_id\": \"19021222\",\n            \"__v\": 0\n        },\n        \"scores\": [\n            {\n                \"_id\": \"618954e38d701d9ce220efe1\",\n                \"score\": 7,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50255\",\n                    \"subject_name\": \"Mon 1\",\n                    \"subject_code\": \"INT1100\",\n                    \"credits_number\": 3,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            },\n            {\n                \"_id\": \"618954e38d701d9ce220f005\",\n                \"score\": 8,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50257\",\n                    \"subject_name\": \"Mon 2\",\n                    \"subject_code\": \"INT1111\",\n                    \"credits_number\": 4,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            }\n        ],\n        \"__v\": 2\n    },\n    {\n        \"_id\": \"618954e38d701d9ce220efe8\",\n        \"user_ref\": {\n            \"_id\": \"61890aee03ab0fa21bc5022d\",\n            \"name\": \"Đặng Thế Hoàng Anh\",\n            \"role\": \"teacher\",\n            \"location\": \"XYZ\",\n            \"date_of_birth\": 1636986616,\n            \"email\": \"doanxem3@gmail.com\",\n            \"vnu_id\": \"19021215\",\n            \"__v\": 0\n        },\n        \"scores\": [\n            {\n                \"_id\": \"618954e38d701d9ce220efea\",\n                \"score\": 5,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50255\",\n                    \"subject_name\": \"Mon 1\",\n                    \"subject_code\": \"INT1100\",\n                    \"credits_number\": 3,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            },\n            {\n                \"_id\": \"618954e38d701d9ce220f00e\",\n                \"score\": 8,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50257\",\n                    \"subject_name\": \"Mon 2\",\n                    \"subject_code\": \"INT1111\",\n                    \"credits_number\": 4,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            }\n        ],\n        \"__v\": 2\n    },{\n        \"_id\": \"618954e38d701d9ce220eff1\",\n        \"user_ref\": {\n            \"_id\": \"61890aee03ab0fa21bc50233\",\n            \"name\": \"Hoàng Hữu Bách\",\n            \"role\": \"teacher\",\n            \"location\": \"IJK\",\n            \"date_of_birth\": 1636383440,\n            \"email\": \"doanxem4@gmail.com\",\n            \"vnu_id\": \"19022222\",\n            \"__v\": 0\n        },\n        \"scores\": [\n            {\n                \"_id\": \"618954e38d701d9ce220eff3\",\n                \"score\": 3,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50255\",\n                    \"subject_name\": \"Mon 1\",\n                    \"subject_code\": \"INT1100\",\n                    \"credits_number\": 3,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            },\n            {\n                \"_id\": \"618954e38d701d9ce220f017\",\n                \"score\": 8,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50257\",\n                    \"subject_name\": \"Mon 2\",\n                    \"subject_code\": \"INT1111\",\n                    \"credits_number\": 4,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            }\n        ],\n        \"__v\": 2\n    },\n\n]","import { useRecoilState, atom, useResetRecoilState } from 'recoil';\nimport React ,{useEffect, useState } from 'react';\nimport { dashboardGPAAtom, dashboardLevelGPAAtom, dashboardFilterGPAAtom, scoreAtom} from '_state';\nimport { PieChart, Pie, Sector, Cell,Tooltip, ResponsiveContainer } from 'recharts';\nimport {useStudentScoreAction} from '_actions';\n\nimport { Card} from 'antd';\n\nimport { Button, Row, List, Select } from 'antd';\nimport { useFetchWrapper } from '_helpers';\n\nconst { Option } = Select;\n\nexport { GPADash };\n\nconst COLORS = ['#2f77eb', '#2f93eb', '#2fbceb', '#2febcc', '#2feb8d', '#b9eb2f', '#e8eb2f', '#eb932f', '#eb2f2f'];\n\nfunction GPADash(props) {\n    const [GPAstate, setGPAState] = useRecoilState(dashboardGPAAtom);\n    const [levelGPAstate, setlevelGPAState] = useRecoilState(dashboardLevelGPAAtom);\n    const [filterState, setFilterState] = useState(\"nofilter\");\n    const [semFilterState, setSemFilterState] = useState(\"nofilter\");\n    const [semesterData, setSemesterData] = useState([]);\n    var refinedData = [];\n    const fetchWrapper = useFetchWrapper();\n    \n    useEffect(() =>{\n        console.log(\"Reconstruct GPADash\")\n\n        async function getSemesterData(){\n            var tempSem = [];\n            let response = await fetchWrapper.get(\"http://localhost:3000/api/semesters/all\", null, null);\n            response = await response.json();\n            console.log(response);\n            if (response?.status === \"Success\"){\n                for (const object of response.message ) {\n                    tempSem.push({\n                        label: object.semester_name,\n                        value: object._id\n                    })\n                }\n                setSemesterData(tempSem);\n            }\n        }\n\n        async function initGPADash() {\n\n            await getSemesterData();\n            var tempLevel = {\n                Aplus: 0, A:0, Bplus: 0, B: 0, Cplus: 0, C: 0, Dplus:0, D:0, F:0 \n            }\n            \n            if (props?.score!=null) {\n                if (props.score.length !== 0) {\n                    console.log(\"Score for dashboard here\");\n                    console.log(props.score);\n                    if (props.score!= \"You are not teacher in this class\")  {\n                        for (const object of props.score ) {\n                            var vnu_id = object.user_ref.vnu_id;\n                            var name = object.user_ref.name;\n                            var email = object.user_ref.email;\n                            var scoreObj = object.scores;  \n                            var GPA = 0;\n                            var totalCredit = 0;\n                            var totalScore = 0;\n                            scoreObj.forEach(scoreElement => { \n                                if (semFilterState == \"nofilter\" ) {\n                                    totalCredit += scoreElement.subject.credits_number;\n                                    totalScore += scoreElement.subject.credits_number*scoreElement.score;\n                                }\n                                else {\n                                    if (scoreElement.semester_id == semFilterState) {\n                                        totalCredit += scoreElement.subject.credits_number;\n                                        totalScore += scoreElement.subject.credits_number*scoreElement.score;\n                                    }\n                                }  \n                            });\n                            GPA = totalScore/totalCredit;\n                            GPA = (GPA/10*4).toFixed(2);\n                            \n                            \n                            if (GPA != \"NaN\" && (filterState == \"nofilter\" ||  (filterState == \"cchv\" && GPA < 2.5) || (filterState == \"duoihoc\" && GPA < 1))) {\n                                refinedData.push({\n                                    vnu_id: vnu_id,\n                                    name: name,\n                                    email: email,\n                                    gpa: GPA\n                                })\n        \n                                tempLevel.Aplus = (GPA<=4.0 && GPA>=3.7) ? tempLevel.Aplus + 1 : tempLevel.Aplus;\n                                tempLevel.A = (GPA<3.7 && GPA>3.5) ? tempLevel.A + 1 : tempLevel.A;\n                                tempLevel.Bplus = (GPA<=3.5 && GPA>3.0) ? tempLevel.Bplus + 1 : tempLevel.Bplus;\n                                tempLevel.B = (GPA<=3 && GPA>2.5) ? tempLevel.B + 1 : tempLevel.B;\n                                tempLevel.Cplus = (GPA<=2.5 && GPA>2) ? tempLevel.Cplus + 1 : tempLevel.Cplus;\n                                tempLevel.C = (GPA<=2 && GPA>1.5) ? tempLevel.C + 1 : tempLevel.C;\n                                tempLevel.Dplus =  (GPA<=2 && GPA>1.5) ? tempLevel.Dplus + 1 : tempLevel.Dplus;\n                                tempLevel.D =  (GPA<=1.5 && GPA>=1) ? tempLevel.D + 1 : tempLevel.D;\n                                tempLevel.F = (GPA<1 && GPA>0) ? tempLevel.F + 1 : tempLevel.F;\n        \n                            }\n                            console.log(refinedData);\n                            \n                        };\n                    }\n                    \n                }\n                \n            }\n            \n           var levelVisualized = [];\n           levelVisualized.push({name: 'A+', value: tempLevel.Aplus},{name: 'A', value: tempLevel.A});\n           levelVisualized.push({name: 'B+', value: tempLevel.Bplus},{name: 'B', value: tempLevel.B});\n           levelVisualized.push({name: 'C+', value: tempLevel.Cplus}, {name: 'C', value: tempLevel.C});\n           levelVisualized.push({name: 'D+', value: tempLevel.Dplus}, {name: 'D', value: tempLevel.D});\n           levelVisualized.push({name: 'F', value: tempLevel.F});\n           var levelPush = {\n               data: levelVisualized\n           }\n           refinedData.sort(function(a, b) {\n            var keyA = a.gpa,\n              keyB = b.gpa;\n            if (keyA < keyB) return 1;\n            if (keyA > keyB) return -1;\n            return 0;\n            });\n           setlevelGPAState(levelPush);\n           setGPAState(refinedData);\n        };\n        initGPADash();\n        // console.log(\"LevelGPAState\");\n        // console.log(levelGPAstate);\n    },[props.score, filterState, semFilterState]);\n    \n    \n    function handleFilterChange(value) {\n        setFilterState(value);\n        console.log(filterState);\n    }\n    function handleSemFilterChange(value) {\n        setSemFilterState(value);\n        console.log(semFilterState);\n    }\n\n    return (\n            <div className=\"p-4\">\n                <Row wrap = 'true'>\n                    <Card title=\"Trạng thái GPA\" style={{ width: 300, height: 440 }}>\n                    <PieChart width={800} height={200} margin={{ top: 0, right: 0, bottom: 0, left: 0 }}>\n                        <Pie\n                          data={levelGPAstate.data}\n                          cx={120}\n                          cy={100}\n                          outerRadius={90}\n                          fill=\"#8884d8\"\n                          dataKey=\"value\"\n                        >\n                          {levelGPAstate.data.map((entry, index) => (\n                            <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                          ))}\n                        </Pie>\n                        <Tooltip />\n                    </PieChart>\n                    <b>Lọc theo GPA</b>\n                    <br/>\n                    <Select defaultValue={filterState} style={{ width: 180 }} onChange={handleFilterChange} >\n                            <Option value=\"nofilter\">Tất cả GPA</Option>\n                            <Option value=\"cchv\">{\"GPA<2.5\"}</Option>\n                            <Option value=\"duoihoc\">{\"GPA<1\"}</Option>\n                    </Select> <br/><br/>\n                    <b>Lọc theo kì</b>\n                    <br/>\n                    <Select defaultValue={semFilterState} style={{ width: 180 }} onChange={handleSemFilterChange} >\n                        <Option value=\"nofilter\">Tất cả các kì</Option>\n                            {semesterData.map(({ label, value }) => (\n                                <option key={value} value={value}>\n                                    { label}\n                                </option>\n                            ))}\n                    </Select>   \n                    {/* <Select defaultValue={filterState} style={{ width: 120 }} data = {[{id}]}onChange={handleFilterChange} >\n                            <Option value=\"nofilter\">Không</Option>\n                            <Option value=\"cchv\">{\"GPA<2.5\"}</Option>\n                            <Option value=\"duoihoc\">{\"GPA<1\"}</Option>\n                    </Select>                                       */}\n                    </Card>\n                    <Card title=\"Danh sách sinh viên\" \n                    style={{ width: 300, height: 440 }}>\n                    <div\n                          id=\"scrollableDiv\"\n                          style={{\n                            height: 340,\n                            overflow: 'auto',\n                            padding: '0 0px',\n                          }}\n                    >    \n                        <List\n                        dataSource={GPAstate}\n                        renderItem={item => (\n                            <List.Item key={item.vnu_id}>\n                            <List.Item.Meta\n                                title={item.name}\n                                description={item.gpa}\n                            />\n                            <div>{item.GPA}</div>\n                            </List.Item>\n                        )}\n                        />\n                    </div>                    \n                                                                    \n                    </Card>\n                </Row>\n            </div>\n    )\n        \n}","import { useRecoilState, atom, useResetRecoilState } from 'recoil';\nimport React ,{useEffect , useState} from 'react';\nimport { dashboardGPAAtom, dashboardLevelGPAAtom, dashboardFilterGPAAtom, dashboardGPAStatusAtom, dashboardLevelStatusAtom } from '_state';\nimport { Card} from 'antd';\nimport {BarChart, Legend, XAxis, YAxis, CartesianGrid, Tooltip, Bar, ResponsiveContainer} from 'recharts'\nimport { Button, Row, List, Select } from 'antd';\nimport { object } from 'yup/lib/locale';\nimport { useFetchWrapper } from '_helpers';\nconst { Option } = Select;\n\nexport { StatisticBoard };\n\n\nfunction StatisticBoard(props) {\n    const [GPAStatus, setGPAStatus] =  useRecoilState(dashboardGPAStatusAtom);\n    const [levelStatus, setlevelStatus] = useRecoilState(dashboardLevelStatusAtom);\n    const [semFilterState, setSemFilterState] = useState(\"nofilter\");\n    const [semesterData, setSemesterData] = useState([]);\n    const fetchWrapper = useFetchWrapper();\n    var refinedData = [];\n\n    useEffect(() => {\n        console.log(\"Reconstruct StatisticBoard\");\n        async function getSemesterData(){\n            var tempSem = [];\n            let response = await fetchWrapper.get(\"http://localhost:3000/api/semesters/all\", null, null);\n            response = await response.json();\n            console.log(response);\n            if (response?.status === \"Success\"){\n                for (const object of response.message ) {\n                    tempSem.push({\n                        label: object.semester_name,\n                        value: object._id\n                    })\n                }\n                setSemesterData(tempSem);\n            }\n        }     \n\n        async function initStatisticBoard() {\n            await getSemesterData();\n            var tempStatus = {Normal: 0, Warning: 0, Expelling: 0}\n            if (props.score!= null) {\n                if (props.score!= \"You are not teacher in this class\")  {\n                    props.score.forEach(object => {\n                        var vnu_id = object.user_ref.vnu_id;\n                        var name = object.user_ref.name;\n                        var email = object.user_ref.email;\n                        var scoreObj = object.scores;  \n                        var GPA = 0;\n                        var totalCredit = 0;\n                        var totalScore = 0;\n                        scoreObj.forEach(scoreElement => { \n                            if (semFilterState == \"nofilter\" ) {\n                                totalCredit += scoreElement.subject.credits_number;\n                                totalScore += scoreElement.subject.credits_number*scoreElement.score;\n                            }\n                            else {\n                                if (scoreElement.semester_id == semFilterState) {\n                                    totalCredit += scoreElement.subject.credits_number;\n                                    totalScore += scoreElement.subject.credits_number*scoreElement.score;\n                                }\n                            }      \n                        });\n                        GPA = totalScore/totalCredit;\n                        GPA = (GPA/10*4).toFixed(2);\n                        \n                        refinedData.push({\n                            vnu_id: vnu_id,\n                            name: name,\n                            email: email,\n                            gpa: GPA\n                        })\n                        tempStatus.Normal = (GPA<=4.0 && GPA>= 2.5) ? tempStatus.Normal+1 : tempStatus.Normal;\n                        tempStatus.Warning = (GPA<2.5 && GPA>= 1.0) ? tempStatus.Warning+1 : tempStatus.Warning;\n                        tempStatus.Expelling = (GPA<1.0 && GPA>= 0 ) ? tempStatus.Expelling+1 : tempStatus.Expelling;\n                      });\n                }\n               \n            }\n            var statusVisualized = [];\n            statusVisualized.push({name: 'Bình thường', BinhThuong: tempStatus.Normal});\n            statusVisualized.push({name: 'Cảnh cáo', CanhCao: tempStatus.Warning});\n            statusVisualized.push({name: 'Đuổi học', DuoiHoc: tempStatus.Expelling});\n      \n            var statusPush = {\n              data: statusVisualized\n            }\n            setlevelStatus(statusPush)\n            setGPAStatus(refinedData)\n        };\n        initStatisticBoard();\n      // Normal: Bình thường\n      // Warning: Canh cáo\n      // Expelling: Đuổi học\n        \n    }, [props.score, semFilterState]);\n\n    function handleSemFilterChange(value) {\n        setSemFilterState(value);\n        console.log(semFilterState);\n    }\n\n    return (\n        <div className=\"p-4\">\n            <Card title = \"Thống kê tình hình học tập\" style={{width: 960, height: 600}}>\n                <Row justify=\"center\">\n                    <Select defaultValue={semFilterState} style={{ width: 180 }} onChange={handleSemFilterChange} >\n                            <Option value=\"nofilter\">Tất cả các kì</Option>\n                                {semesterData.map(({ label, value }) => (\n                                    <option key={value} value={value}>\n                                        { label}\n                                    </option>\n                                ))}\n                    </Select>\n                </Row>\n                <Row justify=\"center\">\n                    <BarChart   width={640} height={420} \n                                data={levelStatus.data}>\n                        <CartesianGrid strokeDasharray=\"3 3\" />\n                        <XAxis dataKey=\"name\" />\n                        <YAxis />\n                        <Tooltip />\n                        <Legend height={30} verticalAlign=\"bottom\"\n                                wrapperStyle={{position: \"relative\"}}\n                                />\n                        {/* Phần này t chưa thử điều chỉnh param của bar,\n                        m cứ load data bằng cái atom vào cho t đã rồi t làm tiếp */}\n                        {/* <Bar dataKey=\"pv\" fill=\"#8884d8\" />\n                        <Bar dataKey=\"uv\" fill=\"#82ca9d\" /> */}\n                        <Bar    dataKey=\"BinhThuong\" fill=\"#32cd32\" legendType=\"square\" \n                                name=\"Bình thường\"/>\n                        <Bar dataKey=\"CanhCao\" fill=\"#FF4500\" legendType=\"square\" \n                                name=\"Cảnh cáo\"/>\n                        <Bar dataKey=\"DuoiHoc\" fill=\"#8B0000\" legendType=\"square\" \n                                name=\"Đuổi học\"/>\n                    </BarChart>\n                </Row>\n            </Card>\n        </div>\n    )\n  }\n  const data = [\n    {\n        \"_id\": \"618954e38d701d9ce220efd6\",\n        \"user_ref\": {\n            \"_id\": \"61890aee03ab0fa21bc50227\",\n            \"name\": \"Nguyễn Việt Anh\",\n            \"role\": \"teacher\",\n            \"location\": \"ABC\",\n            \"date_of_birth\": 1636466043,\n            \"email\": \"bach2@gmail.com\",\n            \"vnu_id\": \"19021212\",\n            \"__v\": 0\n        },\n        \"scores\": [\n            {\n                \"_id\": \"618954e38d701d9ce220efd8\",\n                \"score\": 9,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50255\",\n                    \"subject_name\": \"Mon 1\",\n                    \"subject_code\": \"INT1100\",\n                    \"credits_number\": 3,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            },\n            {\n                \"_id\": \"618954e38d701d9ce220effc\",\n                \"score\": 8,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50257\",\n                    \"subject_name\": \"Mon 2\",\n                    \"subject_code\": \"INT1111\",\n                    \"credits_number\": 4,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            }\n        ],\n        \"__v\": 2\n    },\n    {\n        \"_id\": \"618954e38d701d9ce220efdf\",\n        \"user_ref\": {\n            \"_id\": \"61890b1703ab0fa21bc5023f\",\n            \"name\": \"Trần Xuân Bách\",\n            \"role\": \"student\",\n            \"location\": \"ABC\",\n            \"date_of_birth\": 1037197791,\n            \"email\": \"bach2@gmail.com\",\n            \"vnu_id\": \"19021222\",\n            \"__v\": 0\n        },\n        \"scores\": [\n            {\n                \"_id\": \"618954e38d701d9ce220efe1\",\n                \"score\": 7,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50255\",\n                    \"subject_name\": \"Mon 1\",\n                    \"subject_code\": \"INT1100\",\n                    \"credits_number\": 3,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            },\n            {\n                \"_id\": \"618954e38d701d9ce220f005\",\n                \"score\": 8,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50257\",\n                    \"subject_name\": \"Mon 2\",\n                    \"subject_code\": \"INT1111\",\n                    \"credits_number\": 4,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            }\n        ],\n        \"__v\": 2\n    },\n    {\n        \"_id\": \"618954e38d701d9ce220efe8\",\n        \"user_ref\": {\n            \"_id\": \"61890aee03ab0fa21bc5022d\",\n            \"name\": \"Đặng Thế Hoàng Anh\",\n            \"role\": \"teacher\",\n            \"location\": \"XYZ\",\n            \"date_of_birth\": 1636986616,\n            \"email\": \"doanxem3@gmail.com\",\n            \"vnu_id\": \"19021215\",\n            \"__v\": 0\n        },\n        \"scores\": [\n            {\n                \"_id\": \"618954e38d701d9ce220efea\",\n                \"score\": 5,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50255\",\n                    \"subject_name\": \"Mon 1\",\n                    \"subject_code\": \"INT1100\",\n                    \"credits_number\": 3,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            },\n            {\n                \"_id\": \"618954e38d701d9ce220f00e\",\n                \"score\": 8,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50257\",\n                    \"subject_name\": \"Mon 2\",\n                    \"subject_code\": \"INT1111\",\n                    \"credits_number\": 4,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            }\n        ],\n        \"__v\": 2\n    },\n    {\n        \"_id\": \"618954e38d701d9ce220eff1\",\n        \"user_ref\": {\n            \"_id\": \"61890aee03ab0fa21bc50233\",\n            \"name\": \"Hoàng Hữu Bách\",\n            \"role\": \"teacher\",\n            \"location\": \"IJK\",\n            \"date_of_birth\": 1636383440,\n            \"email\": \"doanxem4@gmail.com\",\n            \"vnu_id\": \"19022222\",\n            \"__v\": 0\n        },\n        \"scores\": [\n            {\n                \"_id\": \"618954e38d701d9ce220eff3\",\n                \"score\": 3,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50255\",\n                    \"subject_name\": \"Mon 1\",\n                    \"subject_code\": \"INT1100\",\n                    \"credits_number\": 3,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            },\n            {\n                \"_id\": \"618954e38d701d9ce220f017\",\n                \"score\": 8,\n                \"subject\": {\n                    \"_id\": \"6189109103ab0fa21bc50257\",\n                    \"subject_name\": \"Mon 2\",\n                    \"subject_code\": \"INT1111\",\n                    \"credits_number\": 4,\n                    \"__v\": 0\n                },\n                \"__v\": 0\n            }\n        ],\n        \"__v\": 2\n    }\n]","import React ,{useEffect, useState} from 'react';\nimport 'antd/dist/antd.css';\nimport { Table, Button, Space , Modal, Input, Row, Col} from 'antd';\nimport Highlighter from 'react-highlight-words';\nimport { SearchOutlined, EditTwoTone, DeleteFilled, WechatOutlined} from '@ant-design/icons';\nimport moment from 'moment';\nimport { Link } from 'react-router-dom';\n\nimport {StudentProfile, AddStudentForm} from '_components/studentInfoList';\nimport {useStudentInfoAction} from '_actions';\n\n\nexport { StudentInfoTable };\nfunction StudentInfoTable(props){\n    var data =  JSON.parse(JSON.stringify(props.data));\n    data.forEach( object => { Object.entries(object).map(([key, val]) => {\n      if (key == 'gender') {\n        if (val == 'male') object.gender = 'Nam';\n        if (val == 'female') object.gender = 'Nữ';\n      }\n      if (key == 'date_of_birth') {\n          object.date_of_birth = moment.utc(val).format(\"DD/MM/YYYY\");\n      }\n    })});\n\n    // console.log(data);\n\n    const studentInfoAction = useStudentInfoAction();\n\n    const [state, setState] = useState({\n        searchText: '',\n        searchedColumn: '',\n        visible : false,\n        visibleAdding: false,\n        visiblePopup: false\n        ,\n        currentRow: {\n          _id: '',\n          key: 1,\n          name: 'Nguyễn văn A ' + 1,\n          tags: (1 % 2) ? ['Bình thường'] : ['Cảnh cáo'],\n          date_of_birth: 1%30 + 1 + '/1/2001',\n          email: 1 + 19021000 + '@vnu.edu.vn',\n          vnu_id: 19020000 + 1,\n          phone_number: 100000000,\n          location: 'no location' + 1,\n          gender: 'male'\n        },\n      });\n\n    useEffect(() =>{\n       \n     },[state.currentRow,data])\n    \n    let handleSearch = (selectedKeys, confirm, dataIndex) => {\n        confirm();\n        setState({\n          ...state,\n          searchText: selectedKeys[0],\n          searchedColumn: dataIndex,\n        });\n      };\n    \n    let handleReset = clearFilters => {\n        clearFilters();\n        setState({ ...state, searchText: '' });\n      };\n\n    let handleEditProfile = (record) =>{\n        setState({\n          ...state,\n          currentRow : record,\n          visible : true});\n    }\n\n    let handleDelete = () => {\n        setState({\n          ...state,\n          visiblePopup : false,\n        })\n        studentInfoAction.deleteStudent(state.currentRow.vnu_id);\n    }\n\n    let handleCloseModal = () => {\n        setState({\n          ...state,\n          visible : false,\n      })\n    }\n\n    let handleCloseModalAdding = () => {\n      setState({\n        ...state,\n        visibleAdding : false,\n    })\n  }\n    let handleAddStudent = () => {\n      setState({\n        ...state,\n        visibleAdding : true,\n    })\n    }\n\n    let handlePopUpCancel = () => {\n      setState({\n        ...state,\n        visiblePopup : false,\n    })\n  }\n\n    let showPopconfirm = (record) => {\n      setState({\n        ...state,\n        currentRow : record,\n        visiblePopup : true,\n    })\n  }\n\n    let handleMessage = (record) => {\n        alert('gửi tin nhắn tới id ' + record.vnu_id);\n      }\n\n    let searchInput;\n    let getColumnSearchProps = dataIndex => ({\n        filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n          <div style={{ padding: 8 }}>\n            <Input\n              ref={node => {\n                  searchInput = node;\n              }}\n              placeholder={`Search ${dataIndex}`}\n              value={selectedKeys[0]}\n              onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\n              onPressEnter={() => handleSearch(selectedKeys, confirm, dataIndex)}\n              style={{ marginBottom: 8, display: 'block' }}\n            />\n            <Space>\n              <Button\n                type=\"primary\"\n                onClick={() => handleSearch(selectedKeys, confirm, dataIndex)}\n                icon={<SearchOutlined />}\n                size=\"small\"\n                style={{ width: 90 }}\n              >\n                Search\n              </Button>\n              <Button onClick={() => handleReset(clearFilters)} size=\"small\" style={{ width: 90 }}>\n                Reset\n              </Button>\n              <Button\n                type=\"link\"\n                size=\"small\"\n                onClick={() => {\n                  confirm({ closeDropdown: false });\n                  setState({\n                    ...state,\n                    searchText: selectedKeys[0],\n                    searchedColumn: dataIndex,\n                  });\n                }}\n              >\n                Filter\n              </Button>\n            </Space>\n          </div>\n        ),\n        filterIcon: filtered => <SearchOutlined style={{ color: filtered ? '#1890ff' : undefined }} />,\n        onFilter: (value, record) =>\n          record[dataIndex]\n            ? record[dataIndex].toString().toLowerCase().includes(value.toLowerCase())\n            : '',\n        onFilterDropdownVisibleChange: visible => {\n          if (visible) {\n            setTimeout(() => searchInput.select(), 100);\n          }\n        },\n        render: text =>\n          state.searchedColumn === dataIndex ? (\n            <Highlighter\n              highlightStyle={{ backgroundColor: '#ffc069', padding: 0 }}\n              searchWords={[state.searchText]}\n              autoEscape\n              textToHighlight={text ? text.toString() : ''}\n            />\n          ) : (\n            text\n          ),\n      });\n\n      \n        const columns = [\n        {\n            title: 'Họ và tên',\n            dataIndex: 'name',\n            key: 'name',\n            width: 100,\n            ...getColumnSearchProps('name'),\n            render: text => <a>{text}</a>,\n        },\n        {\n            title: 'Mã sinh viên',\n            width: 70,\n            dataIndex: 'vnu_id',\n            key: 'vnu_id',\n            sorter: {\n                compare: (a, b) => a.vnu_id - b.vnu_id,\n                multiple: 5,\n              },\n            defaultSortOrder: 'ascend',\n        },\n        \n        {\n            title: 'Giới tính',\n            width: 50,\n            dataIndex: 'gender',\n            key: 'gender',\n        },\n        {\n          title: 'Ngày sinh',\n          width: 80,\n          dataIndex: 'date_of_birth',\n          key: 'date_of_birth',\n        },\n        {\n            title: 'Email',\n            width: 100,\n            dataIndex: 'email',\n            key: 'email',\n        },\n        {\n          title: 'Số điện thoại',\n          width: 80,\n          dataIndex: 'phone_number',\n          key: 'phone_number',\n        },\n        {\n          title: 'Số điện thoại phụ huyinh',\n          width: 80,\n          dataIndex: 'parent_number',\n          key: 'parent_number',\n        },\n        {\n          title: 'Địa chỉ',\n          width: 140,\n          dataIndex: 'location',\n          key: 'location',\n        },\n        {\n            title: 'Thao tác',\n            key: 'action',\n            fixed: \"right\",\n            width: 110,\n            render: (text, record) => (\n              <Space size=\"middle\">\n                \n                <Button\n                title=\"Chỉnh sửa thông tin cá nhân\"\n                onClick={() => handleEditProfile(record)}\n                icon={<EditTwoTone />}\n                size=\"small\"\n                style={{ width: 50 }}\n                />\n\n                <Button\n                  danger\n                  type=\"primary\"\n                  title=\"Xóa thành viên\"\n                  onClick={() =>showPopconfirm(record)}\n                  icon={<DeleteFilled />}\n                  size=\"small\"\n                  style={{ width: 50 }}\n                  />\n\n                              \n                <Link to={`/chat/${record.vnu_id}`} className=\"btn btn-link\">\n                  <Button\n                  type=\"primary\"\n                  title=\"Gửi tin nhắn cho thành viên này\"\n                  icon={<WechatOutlined />}\n                  size=\"small\"\n                  style={{ width: 50 }}\n                  />\n                </Link>\n\n              </Space>\n            )\n        }\n    ]\n    return (\n        <div>\n            <Row>\n            <Col flex=\"auto\">\n              <h2>Thông tin liên hệ sinh viên</h2>\n            </Col>\n            <Col flex=\"250px\">\n            <p align=\"right\">\n              <Button type=\"primary\"\n                onClick = {() => handleAddStudent()}\n              >Thêm sinh viên</Button>\n            </p> \n            </Col>\n            </Row>\n            <Table\n            columns={columns}\n            dataSource={data}\n            bordered\n            scroll={{ x: \"calc(700px + 50%)\", y: 500 }}\n            />\n            <Modal\n              title=\"Thông tin cá nhân\"\n              visible={state.visible}\n              onCancel= {handleCloseModal}\n              footer={[]}\n              width=\"800px\"\n            >\n              <StudentProfile Id = {state.currentRow._id}/>\n            </Modal>\n            <Modal\n              title=\"Thêm sinh viên\"\n              visible={state.visibleAdding}\n              onCancel= {handleCloseModalAdding}\n              footer={[]}\n            >\n              <AddStudentForm/>\n            </Modal>\n            <Modal\n              title=\"Bạn có chắc là xóa thành viên này?\"\n              visible={state.visiblePopup}\n              onOk={() => handleDelete()}\n              onCancel={handlePopUpCancel}\n              okText=\"Xác nhận\"\n              okType= 'danger'\n              cancelText=\"Hủy bỏ\"\n            >\n              Xác nhận sẽ xóa thành viên {state.currentRow.name} ra khỏi lớp!\n            </Modal>\n        </div>\n    )\n  } ","import { Layout , Form, Avatar, Input, DatePicker, Button, Switch } from 'antd';\nimport { ConsoleSqlOutlined, UserOutlined} from '@ant-design/icons';\nimport moment from 'moment';\nimport {useEffect} from 'react';\nimport { pickBy, identity } from 'lodash';\nimport {useRecoilState} from 'recoil';\n\n\nimport { useProfileAction } from '_actions';\nimport { alertBachAtom } from '_state';\nimport { useState } from 'react';\n\nimport locale from 'antd/es/date-picker/locale/vi_VN';\nimport { ConfigProvider } from 'antd';\n\n\nexport{ ProfileForm}\n\nconst Background = {\n    backgroundImage : `url(${\"https://user-images.githubusercontent.com/513929/53929982-e5497700-404c-11e9-8393-dece0b196c98.png\"})`,\n    backgroundSize : 'cover',\n    backgroundPosition: 'center',\n    height : '200px',\n}\nconst avatarStyle = {\n    backgroundColor: '#87d068',\n    height: '100px',\n    width: '100px',\n    position: 'relative',\n    top: '32%',\n    left: '50%',\n    transform: \"translate(-50%, -50%)\",\n}\n\nconst dateFormat = 'DD/MM/YYYY';\n\nconst { Header, Content } = Layout;\n\n\nfunction ProfileForm(props) {\n    const profileAction = useProfileAction(); \n    const [form] = Form.useForm();\n    const [alert, setAlert] = useRecoilState(alertBachAtom);\n    const [passwordSwitch, setPasswordSwitch] = useState(false);\n    const [submitButtonLoading, setSubmitButtonLoading] = useState(false);\n    const userData = JSON.parse(localStorage.getItem(\"userData\"));\n    let data = props.data;\n    let isTable = props.isTable;\n    console.log(data);\n\n    if (data == null) {\n        profileAction.getMyProfile().then( newData =>{\n                console.log('set new data here!!!!!');\n                data = newData;\n            }\n        )\n    }\n\n    const onChangePassSwitch = () => {\n        setPasswordSwitch(!passwordSwitch)\n    }\n\n    useEffect (() => {\n        if (data !== undefined){\n            // data = profile;\n            form.resetFields();\n        }\n        \n    },[data])\n\n    // useEffect (() => {\n    //     form.resetFields();\n    // },[data])\n\n    function formatDate(timestamp) {\n        let formatedDateOfBirth = moment.utc(timestamp).format(\"DD/MM/YYYY\") ;\n        return formatedDateOfBirth\n    }\n\n    const cancelEdit = () => {\n        setAlert({message: \"Thành công\", description: \"Đã cập nhật lại các thông tin !\"});\n        form.resetFields();\n    }     \n\n    const handleSubmit = async () => {\n        try {\n\t\t\tsetSubmitButtonLoading(true)\n            let values = await form.validateFields();\n            const changedFields =  pickBy(values, identity);\n\t\t\tconsole.log(\"CHANGEFIELD\")\n\t\t\tconsole.log(changedFields);\n          \tif(changedFields.date_of_birth) {\n                let timestamp = moment(changedFields.date_of_birth, 'DD/MM/YYYY').format('x');\n                console.log(timestamp);\n                changedFields.date_of_birth = timestamp;\n          \t}\n          \tconsole.log(changedFields);\n          \tawait profileAction.handleSubmit(changedFields, data.vnu_id, isTable);\n\t\t\tsetSubmitButtonLoading(false);\n        } catch (e) {\n            setAlert({message: \"Lỗi\", description: e});\n        }\n    }\n\n    return (\n        (data)?\n       \n        <Layout>\n            <Header style ={Background}> </Header>\n            <Content>\n                <Form\n                    labelCol={{ span: 6 }}\n                    wrapperCol={{ span: 14 }}\n                    layout=\"horizontal\"\n                    form = {form}\n                >\n                    <Avatar\n                        style={avatarStyle}\n                        src = {\"https://cdn0.iconfinder.com/data/icons/set-ui-app-android/32/8-512.png\"}\n                        icon={<UserOutlined />}\n                    />\n                    <br/>\n                    <Form.Item label=\"Vai trò\" name = \"role\">\n                        {data.role == 'teacher' ? \"Cố vấn học tập\" : \"Sinh viên\" }\n                    </Form.Item>   \n                    <Form.Item label=\"Họ và tên\" name = \"name\">\n                        <Input defaultValue = {data.name} />\n                    </Form.Item>\n                    \n                    <Form.Item label=\"VNU ID\" name = \"vnu_id\">\n                        {(userData.role=='student') &&\n                            <Input disabled defaultValue = {data.vnu_id} />\n                        }\n                        {(userData.role=='teacher') &&\n                            <>\n                            <Input defaultValue = {data.vnu_id} />\n                            </>\n                        }\n                    </Form.Item>\n                    <Form.Item label=\"Ngày sinh\" name = \"date_of_birth\">\n                        <DatePicker placeholder=\"Chọn ngày\" defaultValue={moment(formatDate(data.date_of_birth), dateFormat)} format={dateFormat} />\n                    </Form.Item>\n                    <Form.Item label=\"Email\" name = \"email\">\n                        <Input defaultValue = {data.email} />\n                    </Form.Item>\n                    <Form.Item label=\"Số điện thoại cá nhân\" name = \"phone_number\">\n                        <Input defaultValue = {data.phone_number} />\n                    </Form.Item>\n                    {   (data.role=='student') &&\n                        <>\n                        <Form.Item label=\"Số điện thoại phụ huynh\" name = \"parent_number\">\n                        <Input defaultValue = {data.parent_number} />\n                        </Form.Item>\n                        </>\n                    }\n                    \n                    <Form.Item label=\"Địa chỉ\" name = \"location\">\n                        <Input defaultValue = {data.location} />\n                    </Form.Item>\n                    <Form.Item label=\"Đổi mật khẩu\" name = \"password_switch\">\n                    <Switch\n                        checked={passwordSwitch}\n                        checkedChildren=\"Có\"\n                        unCheckedChildren=\"Không\"\n                        onChange={onChangePassSwitch}\n                    />\n                    </Form.Item>\n                    {passwordSwitch && <>\n                        <Form.Item label=\"Mật khẩu cũ\" name = \"old_password\">\n                            <Input.Password defaultValue = {\"\"} />\n                        </Form.Item>\n                        <Form.Item label=\"Mật khẩu mới\" name = \"new_password\">\n                            <Input.Password defaultValue = {\"\"} />\n                        </Form.Item>\n                    </>}\n                    \n                    <Form.Item label=\" \" colon={false}>\n                        <Button type=\"primary\" htmlType=\"submit\" onClick = {handleSubmit} loading={submitButtonLoading}>\n                            Thay đổi\n                        </Button>\n\n                        <Button onClick = {cancelEdit} style = {{position : 'relative', left : '40px'}} >\n                            Hoàn tác\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Content>\n            \n        </Layout> \n        :<></>\n    )\n}","import { useRecoilState, useRecoilValue } from 'recoil';\nimport { useProfileAction } from '_actions';\nimport { profileAtom } from '_state';\nimport {ProfileForm} from '_components/profile'\nexport { Profile };\nfunction Profile() {\n    const [profile,setProfile] = useRecoilState(profileAtom);\n    return (\n        <ProfileForm data = {profile} isTable = {false}/>\n    );\n}","import { useRecoilState, useRecoilValue } from 'recoil';\n\nimport { studentsAtom } from '_state';\nimport { ProfileForm } from '_components/profile'\n\nexport { StudentProfile };\n\nfunction StudentProfile(props) {\n    const [students, setStudents] = useRecoilState(studentsAtom);\n    let studentId = props.Id;\n    // console.log(students , 'id ', studentId);\n    let data = students.find(student => student._id === studentId);\n    return (\n        <ProfileForm data = {data} isTable = {true}/>\n    );\n}\n","import { useRecoilState } from 'recoil';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { useEffect} from 'react';\nimport { Upload, Button, message, Modal, Input, Tree } from 'antd';\nimport { UploadOutlined, CheckCircleTwoTone, CloseCircleTwoTone } from '@ant-design/icons';\nimport { useState } from 'react';\nimport { nullableTypeAnnotation } from '@babel/types';\nimport { useFetchWrapper } from '_helpers';\nimport { Table, Tag, Space } from 'antd';\nconst { TextArea } = Input;\n\n\nexport { UploadForm };\n\n\nfunction UploadForm(props) {\n  const [fileList, setFileList] = useState([]);\n  const [isModalVisible, setIsModalVisible] = useState(false);\n\n  const [modalTitle, setModalTitle] = useState(\"Đang upload\");\n  const [log, setLog] = useState(\"Đang upload\\n\");\n  const [result, setResult] = useState({\n    registered: [],\n    failed: []\n  });\n\n  const fetchWrapper = useFetchWrapper();\n  const showModal = () => {\n    setIsModalVisible(true);\n  };\n\n  const handleOk = () => {\n    setIsModalVisible(false);\n    window.location.reload();\n  };\n\n  async function handleUpload(){\n    console.log(fileList);\n    showModal();\n    setLog(\"Đã bắt đầu upload\");\n    if (fileList){\n      for (const file of fileList) {\n        const formData = new FormData();\n        formData.append(\"file\", file);\n        const response = await fetchWrapper.post(props.formurl, null, formData);\n        response.json().then(rawjson => { \n          if (\"status\" in rawjson) {\n            if (rawjson.status === \"Success\"){\n              setModalTitle(\"Upload thành công\");\n            } else (setModalTitle(\"Upload thất bại\"));\n            if (\"registered\" in rawjson.message) {\n              setResult(rawjson.message);\n            }\n            setLog(log => {\n              var newLog = log;\n              var newRawJson = rawjson.message;\n              newLog = JSON.stringify(newRawJson, null, 4);\n              return newLog;\n            });\n            console.log(log);\n          }\n        });\n      }    \n    }\n  };\nconst delError = (col) => {\n  var abc = [...col]\n  delete abc[col.length-1]\n  return abc;\n}\n  const cprops = {\n      // multiple:true,\n      onRemove: file => {\n        setFileList(fileList => {\n          const index = fileList.indexOf(file);\n          const newFileList = fileList.slice();\n          newFileList.splice(index, 1);\n          return newFileList;\n        });\n      },\n      beforeUpload: file => {\n        setFileList(fileList => ([...fileList, file]));\n        return false;\n      },\n      fileList,\n    };\n\n    return (\n      <div>\n        <Modal title={modalTitle} visible={isModalVisible} onCancel= {handleOk} footer={[]}style={{ height: 700}} width={1000}>\n          <CheckCircleTwoTone twoToneColor=\"#52c41a\"style={{ fontSize: '15px', display: 'inline-block', verticalAlign: 'middle' }}/> Dữ liệu thêm thành công: <b>{result.registered.length}</b>\n          <br/>\n          <CloseCircleTwoTone twoToneColor=\"#eb2f96\" style={{ fontSize: '15px', display: 'inline-block', verticalAlign: 'middle' }}/> Dữ liệu thêm thất bại: <b>{result.failed.length}</b>\n          <br/>\n          <br/>\n          {/* <Tree\n            treeData={result}\n          />            */}\n          <b>Thành công:</b>\n          {/* <TextArea rows={10} value = {log} style={{ resize: \"none\"}} /> */}\n          {props.columns && <Table columns={delError(props.columns)} dataSource={result.registered} />}\n          \n          <b>Thất bại:</b>\n          {/* <TextArea rows={10} value = {log} style={{ resize: \"none\"}} /> */}\n          {props.columns && <Table columns={props.columns} dataSource={result.failed} />}\n        </Modal>\n        <Upload {...cprops}>\n          <Button icon={<UploadOutlined /> } >Chọn file</Button>\n        </Upload>\n        <Button\n          type=\"primary\"\n          onClick={handleUpload}\n          disabled={fileList?.length === 0}\n          style={{ marginTop: 16 }}\n        >\n          Tải lên\n        </Button>\n      </div>\n    );\n  \n}","import React ,{useEffect, useState} from 'react';\nimport 'antd/dist/antd.css';\nimport { Form, Input, Button, Divider} from 'antd';\n\nimport {useClassActions, useStudentInfoAction} from '_actions';\nimport { UploadForm } from '_components/dbportal/UploadForm';\nimport { useClassWrapper } from '_helpers';\n\nexport {AddStudentForm} \nvar upload_form = [\n    {\n        title: 'Email',\n        dataIndex: 'email',\n        key: 'email',\n    },\n    {\n        title: 'Lỗi',\n        dataIndex: 'error',\n        key: 'error',\n    },\n]\nfunction AddStudentForm(props) {\n\n    const [form] = Form.useForm();\n    const studentInfoAction = useStudentInfoAction();\n    const classWrapper = useClassWrapper();\n\n    // useEffect(() =>{\n    //     const curs = JSON.parse(localStorage.getItem('currentClass'));\n    //     console.log(curs);\n    //     if (curs!=null){\n    //         setCurCl(curs.class_id);\n    //     }\n    //     console.log(curCl);\n    // },[props]);\n\n    function handleSubmit() {\n        form.validateFields()\n        .then((values) => {\n            studentInfoAction.AddStudent(values.email);\n        })\n    };\n\n    return (\n        <div>\n            <h6> Nhập email sinh viên </h6>\n            <Form\n                form = {form}\n                layout=\"vertical\"\n                name=\"form_in_modal\"\n                initialValues={{\n                    modifier: 'public',\n                }}\n            >\n        <i>Thêm nhiều sinh viên cách nhau bằng dấu ','</i><br/>\n        <i>Sinh viên được thêm vào lớp phải có tài khoản VNU được cấp bởi admin của hệ thống.</i><br/><br/>\n          <Form.Item\n            name=\"email\"\n            label=\"Email của sinh viên: \"\n            rules={[\n              {\n                required: true,\n                message: 'Ghi địa chỉ email của sinh viên cần thêm ở đây',\n              },\n            ]}\n            >\n            <Input />\n          </Form.Item>\n          {/* <p>Thêm nhiều sinh viên cách nhau bằng dấu ',' </p>\n          <p>Sinh viên được thêm vào lớp phải có tài khoản VNU được cấp bởi admin của hệ thống. </p> */}\n          <Form.Item label=\" \" colon={false}>\n                        <Button type=\"primary\" htmlType=\"submit\" onClick = {handleSubmit}>\n                            Thêm sinh viên\n                        </Button>\n                    </Form.Item>\n        </Form>\n        <Divider/>\n        <h6> Tải file danh sách </h6>\n        <i>Thêm sinh viên vào lớp bằng file danh sách email.</i><br/>\n        <i>Sinh viên được thêm vào lớp phải có tài khoản VNU được cấp bởi admin của hệ thống.</i><br/><br/>\n        <UploadForm columns={upload_form} formurl={classWrapper.curClass != null ? \"http://localhost:3000/api/classes/\" + classWrapper.curClass.class_id + \"/members/import/\" : \"\"}/> \n        <br/><br/>\n        </div>\n        \n    )\n}","import 'antd/dist/antd.css';\nimport { useRecoilState, useRecoilValue } from 'recoil';\n\nimport { studentsAtom } from '_state';\nimport { StudentInfoTable } from '_components/studentInfoList';\n\nexport { StudentInfoList };\n\nfunction StudentInfoList() {\n\n    const [student, setstudent] = useRecoilState(studentsAtom);\n    return (\n        <div className=\"p-4\">\n            \n            <StudentInfoTable data={student}/>\n        </div>\n    );\n}","import * as React from 'react';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport Slide from '@mui/material/Slide';\nimport PostAddIcon from '@mui/icons-material/PostAdd';\nimport SendIcon from '@mui/icons-material/Send';\nimport { Grid } from '@mui/material';\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport { Modal } from 'antd';\nimport './NewPost.css'\nimport { notification } from 'antd';\nimport { Input } from 'antd';\nimport { alertBachAtom } from '_state/alert_bach';\nimport { useRecoilState } from 'recoil';\nconst { TextArea } = Input;\n  export default function NewPost(props) {\n    const [open, setOpen] = React.useState(false);\n    const [postContent, setPostContent] = React.useState(\"\");\n    const [loading, setLoading] = React.useState(false);\n    const [disableInput, setDisableInput] = React.useState(false);\n    const handleSendPost = props.onSendPost ? props.onSendPost : ((postContent) => {});\n    const [notification, setNotification] = useRecoilState(alertBachAtom)\n    const onSend = () => {\n        setLoading(true);\n        setDisableInput(true);\n        handleSendPost(postContent, handleClose);\n        setNotification({message:\"Thành công\", description:\"Đã đăng bài thành công\"})\n    }\n\n    const handleClickOpen = () => {\n      setOpen(true);\n    };\n  \n    const handleClose = () => {\n        setLoading(false);\n        setDisableInput(false);\n        setOpen(false);\n    };\n\n    const handleClickOk = () => {\n\n    }\n    const onChange = ({ target: { value } }) => {\n        setPostContent( value );\n      };\n  \n    return (\n      <div>\n          \n        <Button onClick={handleClickOpen} style={{margin: 0,top: 'auto',right: 20,bottom: 20,left: 'auto',position: 'fixed',}} variant=\"contained\" endIcon={<PostAddIcon />}>\n                Đăng bài mới\n        </Button>\n        <Modal style={{borderRadius: \"10px\"}} title=\"Tạo bài đăng mới\" visible={open} onOk={handleClickOk} onCancel={handleClose} footer={null}>\n        <TextArea\n          value={postContent}\n          onChange={onChange}\n          placeholder=\"Nhập nội dung bài đăng\"\n          autoSize={{ minRows: 3, maxRows: 5 }}\n          disabled={disableInput}\n        />\n        <Grid container style={{marginTop: 10}}>\n            <Grid item xs={9.6}></Grid>\n           \n            <Grid item xs={2}>\n            <LoadingButton variant=\"contained\" onClick={onSend} endIcon={<SendIcon />} loading={loading} loadingPosition=\"end\">\n                    Đăng\n            </LoadingButton>\n            </Grid>\n        </Grid>\n        </Modal>\n      </div>\n    );\n  }\n","import { atom } from 'recoil';\n\nexport { feedPageAtom, isInitiatedSocketFeed };\n\nconst feedPageAtom = atom({\n    key: {\n        name: 'feed_page_atom'\n    },\n    default: {posts: []}\n});\n\nclass isInitiatedSocketFeed {\n    static value = false;\n}\n\n\n\n","const API_PATH = {\n    REG_ACC: \"/reg\",\n    LOGIN: \"/auth/login\",\n    PROFILE_BY_ID: \"/api/profile/:profileId\",\n    SET_PROFILE_BY_ID: \"/api/profile/edit/:profileId\",\n    CREATE_CLASS: \"/api/classes/create\",\n    ADD_MEMBER_CLASS: \"/api/classes/:classId/members/add\",\n    DELETE_MEMBER_CLASS: \"/api/classes/:classId/members/delete\",\n    MY_CLASS: \"/api/classes/me\",\n    MY_CLASS_MEMBERS_INFORS: \"/api/classes/:classId/members/infors\",\n    GET_CLASS_BY_ID : \"/api/classes/:classId\",\n    POST_TO_FEED : \"/api/classes/:classId/feed/add\",\n    GET_POST_BY_ID: \"/api/classes/:classId/feed/:postId\",\n    GET_ALL_POSTS: \"/api/classes/:classId/feed/posts/get\",\n    COMMENT_TO_POST: \"/api/classes/:classId/feed/:postId/comments/add\",\n    GET_COMMENT_POST: \"/api/classes/:classId/feed/:postId/comments/get\",\n    RECENT_CHAT: \"/api/chat/recent\",\n    RECENT_CONTACT: \"/api/chat/recentcontact\",\n    MESSAGES_BY_VNU_ID: \"/api/chat/:otherVNUId\",\n    ADD_SUBJECT: \"/api/subjects/add\",\n    UPLOAD_DSSV : \"/api/upload/dssv\",\n    UPLOAD_DSSV_CLASS : \"/api/classes/:classId/members/import\",\n    UPLOAD_DSCV : \"/api/upload/dscv\",\n    UPLOAD_DSMH: \"/api/upload/dsmh\",\n    UPLOAD_SV_MH_SCORE : \"/api/scores/import\",\n    UPLOAD_FILE : \"/api/upload/file\",\n    ADD_SCORE_BY_VNU_ID: \"/api/scores/add\",\n    GET_SCORES_BY_ID : \"/api/scores/:userId\",\n    PUBLIC_DATA: \"/public/data/:filename\",\n    LIKE_POST: \"/api/classes/:classId/feed/:postId/likes/toogle\",\n};\nconst HOST_NAME = \"http://localhost:3000\";\nexport {API_PATH, HOST_NAME};","import { atom } from 'recoil';\n\n\n\nconst socketAtom = atom({\n    key: {\n        name: 'socket-io'\n    },\n    default: null\n});\n\nconst socketConnected = atom( {\n    key: {\n        name: 'socket-connected'\n    },\n    default: false\n})\nexport { socketAtom, socketConnected };","import { useRecoilState } from \"recoil\";\nimport { io } from \"socket.io-client\";\nimport { useFeedPageWrapper } from \"./feed_page_wrapper\";\nimport { socketAtom } from \"_state/socket\";\nfunction useSocketWrapper() {\n    function initConnection(token) {\n        socketWrapper.socket = io(\"http://localhost:5000\", {\n                reconnectionDelayMax: 10000,\n                auth: {\n                    token: token\n                },\n                query: {\n                    token: token\n                }\n            })\n\n    }\n    function checkConnected() {\n        return socketWrapper.socket.connected\n    }\n    return {\n        initConnection: initConnection,\n        socket: socketWrapper.socket,\n        checkConnected : checkConnected\n    }\n}\n\nclass socketWrapper {\n    constructor() {\n\n    }\n    static isConnected = false;\n    static feeder;\n    static initiated = false;\n    static socket = null;\n    static initConnection(token) {\n        // debugger\n        if (!token) return;\n        console.log(\"Initiating socket connection\")\n        if (!socketWrapper.initiated) {\n            socketWrapper.socket = io(\"http://localhost:5000\", {\n                reconnectionDelayMax: 10000,\n                auth: {\n                    token: token\n                },\n                query: {\n                    token: token\n                }\n            })\n            socketWrapper.initiated =true;\n        }\n        \n    }\n}\n\nexport {socketWrapper}; ","import { useRecoilState } from 'recoil';\nimport NewPost from '_components/bach_component/Post/NewPost';\nimport { useFetchWrapper } from '_helpers';\nimport { feedPageAtom, isInitiatedSocketFeed } from '_state/feed_page';\nimport {useClassWrapper} from './class-wrapper';\nimport * as Configs from './Constant'\nimport { socketWrapper } from './socket-wrapper';\nimport { getRecoil, setRecoil } from \"recoil-nexus\";\nfunction useFeedPageWrapper() {\n    let classWrapper = useClassWrapper();\n    let fetcher = useFetchWrapper();\n    let [feedPageState, setFeedPageState] = useRecoilState(feedPageAtom)\n    \n    \n    async function getAllPosts() {\n      \n        console.log(Configs.HOST_NAME + Configs.API_PATH.GET_ALL_POSTS.replace(\":classId\", classWrapper.curClass.class_id));\n        let response = await fetcher.get(Configs.HOST_NAME + Configs.API_PATH.GET_ALL_POSTS.replace(\":classId\", classWrapper.curClass.class_id), null, null);\n        response = await response.json()\n        if (response.status != \"Error\") {\n            let temp = {...feedPageState};\n            temp.posts = response.message;\n            setFeedPageState(temp);\n        }\n        return response;\n    }\n    return {\n        feedPageState : feedPageState,\n        getAllPosts: getAllPosts,\n        setFeedPageState: setFeedPageState\n\n    }\n}\nexport { useFeedPageWrapper };","import React, { useEffect } from 'react';\nimport './Post.css'\n\n// Icons\nimport Avatar from '@mui/material/Avatar';\nimport { ThumbUp, ChatBubbleOutline, AccountCircle, NearMe, ExpandMoreOutlined } from '@mui/icons-material';\nimport Box from '@mui/material/Box';\nimport Paper from '@mui/material/Paper';\nimport Grid from '@mui/material/Grid';\nimport { styled } from '@mui/material/styles';\nimport ImageList from '@mui/material/ImageList';\nimport ImageListItem from '@mui/material/ImageListItem';\nconst defaultPost =\n\t{\n\t\t\"_id\": \"617c0f13cbe8a4f53931e5e6\",\n\t\t\"from\": {\n\t\t\t\"location\": \"Ha Noi\",\n\t\t\t\"_id\": \"61767df3ec3b897290b3d8ce\",\n\t\t\t\"name\": \"Bach teach\",\n\t\t\t\"role\": \"teacher\",\n\t\t\t\"date_of_birth\": 1633260836,\n\t\t\t\"email\": \"doanxem2@gmail.com\",\n\t\t\t\"vnu_id\": \"5008601a-7f07-401d-b0e8-0cf7025431ee\",\n\t\t\t\"__v\": 0\n\t\t},\n\t\t\"content\": \"abcdefdawdwad\",\n\t\t\"comments\": [\n\t\t\t\"617c0f2acbe8a4f53931e604\",\n\t\t\t\"617c0f2bcbe8a4f53931e60e\",\n\t\t\t\"617c0f2ccbe8a4f53931e617\"\n\t\t],\n\t\t\"created_date\": 1635520270450,\n\t\t\"__v\": 3\n\t}\nconst Comment = (props) => {\n\treturn (\n\t<>\n\t\t<Grid item xs={0.1}></Grid>\n\t\t<Grid item xs={11.9}>\n\t\t\t<Grid container className=\"commentCtn\">\n\t\t\t\t<Grid item xs={1} className=\"avatarComment\">\n\t\t\t\t\t<Avatar {... stringAvatar(props.senderName)}  className=\"commentAvatar\" />\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={10.9} className=\"postTopInfo\">\n\t\t\t\t\t<Grid container >\n\t\t\t\t\t\t<div className=\"commentInfo\">\n\t\t\t\t\t\t\t<h3 className='commentUsername'>{props.senderName}</h3>\n\t\t\t\t\t\t\t<p className='commentContent'>{props.commentContent}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</Grid>\n\t</>)\n}\nconst Post = ({ postInstance, onSendComment, liked, onLikePost, showListLiked}) => {\n\tconst userData = JSON.parse(localStorage.getItem(\"userData\"));\n    const itemData = [];\n\tconst post = postInstance;\n\tconst likedList = postInstance.liked;\n\tvar likedForRender = \"\";\n\tconst showListLiked_ = () => {\n\t\tshowListLiked(post.liked);\n\t}\n\tvar count = 0;\n\tfor (var i of likedList) {\n\t\tcount++;\n\t\tif (count < 3) {\n\t\t\tlikedForRender+=i.name;\n\t\t\tlikedForRender+=\", \"\n\t\t} else break;\n\t}\n\tif (likedList.length > 2)\n\t\tlikedForRender += \"... + \" + (likedList.length - 2)\n\tif (likedForRender != \"\") {\n\t\tlikedForRender+=\"đã thích\";\n\t}\n\t\n\tconst comments = post.comments;\n\tconst textInput = React.useRef(null);\n\tconst [hiddenComment, setHiddenComment] = React.useState(true);\n\tconst likeOnClick = () => {\n\t\tconsole.log(\"Like post: \" + post._id)\n\t\tonLikePost(post._id)\n\t};\n\tconst [newCommentContent, setNewCommentContent] = React.useState(\"\");\n\tconst commentOnClick = () => {\n\t\tsetHiddenComment(!hiddenComment);\n\t}\n\tconst onKeyPressNewComment = (e) => {\n\t\tif (e.key === \"Enter\") {\n\t\t\te.preventDefault();\n\t\t\tonSendComment(textInput.current.innerHTML, post._id)\n\t\t\ttextInput.current.innerHTML = \"\";\n\t\t\t// console.log(textInput.current.innerHTML)\n\t\t}\n\t}\n\tuseEffect(() => {\n\t\tconsole.log(hiddenComment);\n\t}, [hiddenComment])\n\tvar renderComment = [];\n\tfor (var comment of comments) {\n\n\t\trenderComment.push(<Comment senderName={comment.from.name} commentContent={comment.content}></Comment>)\n\t}\n    return (\n        <Grid container className=\"post\">\n\t\t\t<Grid item xs={0.1}></Grid>\n            <Grid item xs={1} className=\"postTop\">\n                <Avatar {...stringAvatar(post.from.name)}  className=\"postAvatar\" />\n            </Grid>\n            <Grid item xs={10.9} sm={10.9} className=\"postTopInfo\">\n              <Grid container className=\"postTopInfo\">\n                      <Grid item xs={12}><h5 className='postUsername'>{post.from.name}</h5></Grid>\n                      <Grid item xs={12}><p className='postDate'>{new Date(post.created_date).toDateString()}</p></Grid>  \n              </Grid>\n            </Grid>\n            <Grid item xs={0.1}></Grid>\n\t\t\t<Grid item xs={11.9}>\n\t\t\t\t<div className=\"postBottom\">\n\t\t\t\t\t<p>{post.content}</p>\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t\t<Grid item xs={0.5}></Grid>\n\t\t\t<Grid item xs={11.5} onClick={showListLiked_} style={{ color: \"gray\"}}>{likedForRender}</Grid>\n\t\t\t<Grid item xs={12}>\n\t\t\t<ImageList className='bach_imagelist' cols={3} rowHeight={164}>\n              {itemData.map((item) => (\n              \t<ImageListItem key={item.img}>\n\t\t\t\t\t<img\n\t\t\t\t\tsrc={`${item.img}`}\n\t\t\t\t\tsrcSet={`${item.img}`}\n\t\t\t\t\talt={item.title}\n\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t/>\n            \t</ImageListItem>\n      \t\t\t))}\n\t\t\t</ImageList>\n\t\t\t</Grid>\n            \n\t\t\t<Grid item xs={6} className=\"postOptions\">\n\t\t\t\t<div className=\"postOption\" onClick={likeOnClick}>\n\t\t\t\t\t{liked ? <ThumbUp className=\"like_post_btn\" style={{marginLeft:\"2px\", color: \"blue\"}}/> : <ThumbUp className=\"like_post_btn\" style={{marginLeft:\"2px\", color: \"gray\"}}/>}\n                    <p style={{margin:\"0px\"}}>Like</p>\n                </div>\n\t\t\t</Grid>\n            <Grid item xs={6} className=\"postOptions\">\n\t\t\t\t<div className=\"postOption\" onClick={commentOnClick}>\n                    <ChatBubbleOutline style={{marginLeft:\"2px\", paddingTop:\"2px\"}} />\n                    <p style={{margin:\"0px\"}}>Comment</p>\n                </div>\n\t\t\t</Grid>\n\t\t\t{!hiddenComment && <>\n\t\t\t\t{renderComment}\n\t\t\t\t<Grid item xs={0.1}></Grid>\n\t\t\t\t<Grid item xs={11.9}>\n\t\t\t\t\t<Grid container className=\"commentCtn\">\n\t\t\t\t\t\t<Grid item xs={1} className=\"avatarCommentInput\">\n\t\t\t\t\t\t\t<Avatar {... stringAvatar(userData.name ? userData.name : \"You\")} className=\"commentAvatar\" />\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={10.9} className=\"inputCommentCtn\">\n\t\t\t\t\t\t\t<Grid item xs={12} className=\"inputComment\" placeholder={\"Viết bình luận\"} contentEditable={true} onKeyPress={onKeyPressNewComment} ref={textInput}></Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t\t</>\n\t\t\t}\n\t\t\t\n        </Grid>\n    )\n}\nfunction stringToColor(string) {\n\tlet hash = 0;\n\tlet i;\n  \n\t/* eslint-disable no-bitwise */\n\tfor (i = 0; i < string.length; i += 1) {\n\t  hash = string.charCodeAt(i) + ((hash << 5) - hash);\n\t}\n  \n\tlet color = '#';\n  \n\tfor (i = 0; i < 3; i += 1) {\n\t  const value = (hash >> (i * 8)) & 0xff;\n\t  color += `00${value.toString(16)}`.substr(-2);\n\t}\n\t/* eslint-enable no-bitwise */\n  \n\treturn color;\n  }\nfunction stringAvatar(name) {\n\tlet a = name.split(' ')[0]\n\treturn {\n\t  sx: {\n\t\tbgcolor: stringToColor(name),\n\t  },\n\t  children: `${a}`,\n\t};\n  }\nexport default Post;","import { Link } from 'react-router-dom';\nimport { useRecoilState, useRecoilValue } from 'recoil';\nimport Avatar from '@mui/material/Avatar';\nimport { ThumbUp, ChatBubbleOutline, AccountCircle, NearMe, ExpandMoreOutlined } from '@mui/icons-material';\nimport Box from '@mui/material/Box';\nimport Paper from '@mui/material/Paper';\nimport Grid from '@mui/material/Grid';\nimport { studentsAtom } from '_state';\nimport {useClassWrapper} from '../../_helpers/class-wrapper';\nimport { StudentInfoList } from '_components/studentInfoList/StudentInfoList';\nimport {useFeedPageWrapper} from '../../_helpers/feed_page_wrapper';\nimport { useEffect, useState } from 'react';\nimport Post from '_components/bach_component/Post/Post';\nimport PostAddIcon from '@mui/icons-material/PostAdd';\nimport Button from '@mui/material/Button';\nimport NewPost from '_components/bach_component/Post/NewPost';\nimport { useFeedActions } from '_actions/feed.actions';\nimport { Modal, Row, Col } from 'antd';\nimport './Feed.css'\nexport { Feed };\n\nfunction Feed() {\n    const userData = JSON.parse(localStorage.getItem(\"userData\"));\n    const [student, setstudent] = useRecoilState(studentsAtom);\n    const feedPageWrapper = useFeedPageWrapper();\n    const curClass = useClassWrapper().curClass;\n    const [loaded, setloaded] = useState(false);\n    const [isModalVisible, setModalVisible] = useState(false);\n    const [curModalContent, setCurModalContent] = useState([])\n    const showPostLiked = (list) => {\n        setCurModalContent(list);\n        setModalVisible(true);\n    }\n    const handleOk = () => {\n        setModalVisible(false);\n    };\n    const handleCancel = () => {\n    setModalVisible(false);\n    };\n    const feedAction = useFeedActions();\n    console.log(curClass);\n    useEffect(() => {\n        async function fetchMyAPI() {\n            await feedPageWrapper.getAllPosts();\n            console.log(feedPageWrapper.feedPageState)\n        }\n        fetchMyAPI().then(() => {\n            console.log(\"fetch done\")\n            setloaded(true)\n        })\n        // socketWrapper.socket.on(\"NewPost\", onNewPost)\n    }, [])\n\n    var renderPosts = [];\n    // useEffect(() => {},[feedPageWrapper])\n    let temp = [...feedPageWrapper.feedPageState.posts]\n    temp.sort((a,b)=> {\n        if (a.created_date && b.created_date) {\n            \n            if (a.created_date > b.created_date) return -1;\n            if (a.created_date == b.created_date) return 0;\n            else return 1;\n        } else return 0;\n    })\n    if (loaded) {\n        console.log(\"Feed: \" , feedPageWrapper.feedPageState)\n        for (var i = 0; i < temp.length; i++) {\n            var liked = false;\n            for (var j of temp[i].liked) {\n                if (j.vnu_id == userData.vnu_id) {\n                    liked = true;\n                    break;\n                }\n                    \n            }\n            renderPosts.push(\n                <Post postInstance={temp[i]} onSendComment={feedAction.sendComment} liked={liked} onLikePost={feedAction.likePost} showListLiked={showPostLiked}></Post>\n            )\n        };\n    }\n    var modalRender = [];\n    for (var i of curModalContent) {\n        modalRender.push(<ModalElement name={i.name}></ModalElement>)\n    }\n    return ( <>\n        {(loaded) && <>\n            <NewPost onSendPost={feedAction.sendPost}/>\n            <div style={{paddingRight:\"300px\", paddingLeft:\"230px\"}}>\n                {renderPosts}                \n            </div>\n            {renderPosts.length == 0 && \n\n            <h1 className='NoPost'>Hiện chưa có bài đăng nào cả</h1>}\n        </>\n        }\n        <Modal title=\"Đã thích\" visible={isModalVisible} onOk={handleOk} onCancel={handleCancel}>\n            {curModalContent.length>0 ?  \n            <>\n                {modalRender}\n            </>\n                : \" \"}\n        </Modal>\n    </>\n        \n    )\n}\n\nfunction ModalElement(props) {\n    return (\n        <Grid container className=\"commentCtn\">\n        <Grid item xs={1} className=\"avatarComment\">\n            <Avatar {... stringAvatar(props.name)}  className=\"commentAvatar\" />\n        </Grid>\n        <Grid item xs={0.3}>\n        </Grid>\n        <Grid item xs={10.7} className=\"postTopInfo\">\n            <Grid container >\n                <div>\n                    <h3 className='commentUsername'>{props.name}</h3>\n                </div>\n            </Grid>\n        </Grid>\n    </Grid>\n    )\n}\nfunction stringToColor(string) {\n\tlet hash = 0;\n\tlet i;\n  \n\t/* eslint-disable no-bitwise */\n\tfor (i = 0; i < string.length; i += 1) {\n\t  hash = string.charCodeAt(i) + ((hash << 5) - hash);\n\t}\n  \n\tlet color = '#';\n  \n\tfor (i = 0; i < 3; i += 1) {\n\t  const value = (hash >> (i * 8)) & 0xff;\n\t  color += `00${value.toString(16)}`.substr(-2);\n\t}\n\t/* eslint-enable no-bitwise */\n  \n\treturn color;\n  }\nfunction stringAvatar(name) {\n\tlet a = name.split(' ')[0]\n\treturn {\n\t  sx: {\n\t\tbgcolor: stringToColor(name),\n\t  },\n\t  children: `${a}`,\n\t};\n  }","\nimport { authAtom, usersAtom, userAtom } from '_state';\nimport { alertBachAtom } from '_state/alert_bach';\nimport { useClassWrapper } from '_helpers';\nimport { useFetchWrapper } from '_helpers';\nimport * as Configs from '../_helpers/Constant';\nimport {useRecoilState} from 'recoil';\nimport { useFeedPageWrapper } from '_helpers/feed_page_wrapper';\nexport { useFeedActions };\n\nfunction useFeedActions() {\n    const classWrapper = useClassWrapper();\n    const fetcher = useFetchWrapper();\n    const [notification, setNotification] = useRecoilState(alertBachAtom);\n    let feeder = useFeedPageWrapper();\n    async function sendPost(postContent, callback) {\n        var urlencoded = new URLSearchParams();\n        urlencoded.append(\"content\", postContent);\n        let response = await fetcher.post(Configs.HOST_NAME + Configs.API_PATH.POST_TO_FEED.replace(\":classId\", classWrapper.curClass.class_id), \"application/x-www-form-urlencoded\", urlencoded);\n        response = await response.json();\n        if (response.status == \"Success\") {\n            setNotification(response.status, response.message);\n        }\n        \n        callback();\n    }\n    async function sendComment(commentContent, postId) {\n        var urlencoded = new URLSearchParams();\n        urlencoded.append(\"content\", commentContent);\n        // debugger\n        let response = await fetcher.post(Configs.HOST_NAME + Configs.API_PATH.COMMENT_TO_POST.replace(\":classId\", classWrapper.curClass.class_id).replace(\":postId\", postId), \"application/x-www-form-urlencoded\", urlencoded);\n        response = await response.json();\n        if (response.status != \"Success\") {\n            setNotification(response.status, response.message);\n        }\n    }\n\n    async function likePost(postId) {\n        var urlencoded = new URLSearchParams();\n        let response = await fetcher.post(Configs.HOST_NAME + Configs.API_PATH.LIKE_POST.replace(\":classId\", classWrapper.curClass.class_id).replace(\":postId\", postId), null, null);\n        response = await response.json();\n        if (response.status != \"Success\") {\n            setNotification(response.status, response.message);\n        }\n    }\n    return {\n        sendPost: sendPost,\n        sendComment: sendComment,\n        likePost: likePost\n    }\n}","import React, {useEffect} from 'react';\nimport Avatar from '@mui/material/Avatar';\nimport './ConversationListItem.css';\nimport shave from 'shave';\nexport default function ConversationListItem(props) {\n  useEffect(() => {\n\t  console.log(\"rerender item\")\n\tshave(\".conversation-snippet\", 20)\n  }, [])\n    const {name, text } = props.data;\n    return (\n      <div className={\"conversation-list-item\" + (props.picked ? \" picked\" : \"\")}>\n         <Avatar {...stringAvatar(name)}  className=\"conversation-photo\" />\n        <div className=\"conversation-info\">\n          <h1 className=\"conversation-title\">{ name }</h1>\n          <span className=\"conversation-snippet\">{ truncateString(text,20) }</span>\n        </div>\n      </div>\n    );\n}\n\nfunction stringToColor(string) {\n\tlet hash = 0;\n\tlet i;\n  \n\t/* eslint-disable no-bitwise */\n\tfor (i = 0; i < string.length; i += 1) {\n\t  hash = string.charCodeAt(i) + ((hash << 5) - hash);\n\t}\n  \n\tlet color = '#';\n  \n\tfor (i = 0; i < 3; i += 1) {\n\t  const value = (hash >> (i * 8)) & 0xff;\n\t  color += `00${value.toString(16)}`.substr(-2);\n\t}\n\t/* eslint-enable no-bitwise */\n  \n\treturn color;\n  }\nfunction stringAvatar(name) {\n\tlet a = name.split(' ')[0]\n\treturn {\n\t  sx: {\n\t\tbgcolor: stringToColor(name),\n\t  },\n\t  children: `${a}`,\n\t};\n  }\n  function truncateString(str, num) {\n\tif (str.length > num) {\n\t  return str.slice(0, num) + \"...\";\n\t} else {\n\t  return str;\n\t}\n  }","import React from 'react';\nimport './Toolbar.css';\n\nexport default function Toolbar(props) {\n    const { title, leftItems, rightItems } = props;\n    return (\n      <div className=\"toolbar\">\n        <div className=\"left-items\">{ leftItems }</div>\n        <h1 className=\"toolbar-title\">{ title }</h1>\n        <div className=\"right-items\">{ rightItems }</div>\n      </div>\n    );\n}","import React from 'react';\nimport './ToolbarButton.css';\n\nexport default function ToolbarButton(props) {\n    const { icon } = props;\n    return (\n      <i className={`toolbar-button ${icon}`} />\n    );\n}","const fakeData = {\"results\":[{\"gender\":\"female\",\"name\":{\"title\":\"Miss\",\"first\":\"Connie\",\"last\":\"Smith\"},\"location\":{\"street\":{\"number\":3385,\"name\":\"Stevens Creek Blvd\"},\"city\":\"Louisville\",\"state\":\"Maryland\",\"country\":\"United States\",\"postcode\":31280,\"coordinates\":{\"latitude\":\"81.8661\",\"longitude\":\"178.6663\"},\"timezone\":{\"offset\":\"-3:00\",\"description\":\"Brazil, Buenos Aires, Georgetown\"}},\"email\":\"connie.smith@example.com\",\"login\":{\"uuid\":\"3d555c86-3589-47e1-91c7-a9c1c9d1ee95\",\"username\":\"heavymouse609\",\"password\":\"seymour\",\"salt\":\"tGMD4eKe\",\"md5\":\"222f57dfcc1498ed1a51b036e8b724ff\",\"sha1\":\"b6b2eae7b0e942586344b94f8ec920825db1c2a1\",\"sha256\":\"0759ff966dfdf1627562babd9ac257e995ad6c8707794f0e56db8856a11c43a0\"},\"dob\":{\"date\":\"1986-10-14T08:38:51.856Z\",\"age\":35},\"registered\":{\"date\":\"2004-03-03T03:17:47.705Z\",\"age\":17},\"phone\":\"(580)-995-3574\",\"cell\":\"(887)-580-4825\",\"id\":{\"name\":\"SSN\",\"value\":\"367-28-2822\"},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/women/76.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/women/76.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/women/76.jpg\"},\"nat\":\"US\"},{\"gender\":\"female\",\"name\":{\"title\":\"Ms\",\"first\":\"Sandra\",\"last\":\"Benitez\"},\"location\":{\"street\":{\"number\":7086,\"name\":\"Avenida de Andalucía\"},\"city\":\"Pozuelo de Alarcón\",\"state\":\"Castilla y León\",\"country\":\"Spain\",\"postcode\":37269,\"coordinates\":{\"latitude\":\"10.1509\",\"longitude\":\"102.7664\"},\"timezone\":{\"offset\":\"+7:00\",\"description\":\"Bangkok, Hanoi, Jakarta\"}},\"email\":\"sandra.benitez@example.com\",\"login\":{\"uuid\":\"6ddb9c07-d485-49c4-a3d3-468d0bdb0b54\",\"username\":\"blackpeacock989\",\"password\":\"cricket\",\"salt\":\"iwh9DBQG\",\"md5\":\"38a1a9e31e0b455661680d8152c3f301\",\"sha1\":\"e0a0c292990df6e0c8b2f15fe7b3e7827a56fa33\",\"sha256\":\"c5cd76eb6e8b132551284b271717813b4993fb8969c1f49050a325f8227002ef\"},\"dob\":{\"date\":\"1974-04-14T23:14:12.639Z\",\"age\":47},\"registered\":{\"date\":\"2011-10-31T05:38:39.699Z\",\"age\":10},\"phone\":\"947-983-468\",\"cell\":\"674-568-075\",\"id\":{\"name\":\"DNI\",\"value\":\"81906644-Q\"},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/women/58.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/women/58.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/women/58.jpg\"},\"nat\":\"ES\"},{\"gender\":\"female\",\"name\":{\"title\":\"Ms\",\"first\":\"Tubâ\",\"last\":\"Turkenburg\"},\"location\":{\"street\":{\"number\":7667,\"name\":\"Kneppelhoutpad\"},\"city\":\"Genderen\",\"state\":\"Friesland\",\"country\":\"Netherlands\",\"postcode\":32576,\"coordinates\":{\"latitude\":\"-64.4706\",\"longitude\":\"-49.2385\"},\"timezone\":{\"offset\":\"+5:30\",\"description\":\"Bombay, Calcutta, Madras, New Delhi\"}},\"email\":\"tuba.turkenburg@example.com\",\"login\":{\"uuid\":\"2f77a842-cf88-497b-bd56-adb79bd0c8e2\",\"username\":\"organicmouse486\",\"password\":\"chandra\",\"salt\":\"qaYnvvhr\",\"md5\":\"35765e98dfcdb6b83457ed373ad7049b\",\"sha1\":\"79bf19ce02b70c7e67e1041436f1beea2eb0e5c6\",\"sha256\":\"b64609079512d73b1da84f5db340980748f682082efd208ad6d412482cecda98\"},\"dob\":{\"date\":\"1979-11-14T02:44:28.437Z\",\"age\":42},\"registered\":{\"date\":\"2013-03-19T04:25:17.068Z\",\"age\":8},\"phone\":\"(468)-250-4329\",\"cell\":\"(640)-399-8948\",\"id\":{\"name\":\"BSN\",\"value\":\"03881042\"},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/women/49.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/women/49.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/women/49.jpg\"},\"nat\":\"NL\"},{\"gender\":\"male\",\"name\":{\"title\":\"Mr\",\"first\":\"Charlie\",\"last\":\"Guillaume\"},\"location\":{\"street\":{\"number\":6981,\"name\":\"Avenue de l'Abbé-Roussel\"},\"city\":\"Toulouse\",\"state\":\"Vaucluse\",\"country\":\"France\",\"postcode\":96716,\"coordinates\":{\"latitude\":\"74.2864\",\"longitude\":\"-169.6275\"},\"timezone\":{\"offset\":\"+8:00\",\"description\":\"Beijing, Perth, Singapore, Hong Kong\"}},\"email\":\"charlie.guillaume@example.com\",\"login\":{\"uuid\":\"aa66abfe-babc-4e43-840d-3551439a6aa8\",\"username\":\"brownbird498\",\"password\":\"bigdawg\",\"salt\":\"Sgj1OANw\",\"md5\":\"a6db306d2d337b0f6add2527091a3858\",\"sha1\":\"5e8d5d7bf86c96e20b883bd73a90e46ee1e26b2f\",\"sha256\":\"dd32b5257d0f1aaed38f9aab8ba8d2079f33e2ed9dd5d0470234cbe8df4ddc8c\"},\"dob\":{\"date\":\"1948-11-22T22:54:45.296Z\",\"age\":73},\"registered\":{\"date\":\"2005-08-22T05:09:41.370Z\",\"age\":16},\"phone\":\"04-94-86-77-95\",\"cell\":\"06-20-33-40-68\",\"id\":{\"name\":\"INSEE\",\"value\":\"1NNaN73551749 41\"},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/men/6.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/men/6.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/men/6.jpg\"},\"nat\":\"FR\"},{\"gender\":\"female\",\"name\":{\"title\":\"Miss\",\"first\":\"Victoria\",\"last\":\"Chow\"},\"location\":{\"street\":{\"number\":2284,\"name\":\"York St\"},\"city\":\"Deer Lake\",\"state\":\"Saskatchewan\",\"country\":\"Canada\",\"postcode\":\"X2G 2H7\",\"coordinates\":{\"latitude\":\"-0.3055\",\"longitude\":\"42.4438\"},\"timezone\":{\"offset\":\"+2:00\",\"description\":\"Kaliningrad, South Africa\"}},\"email\":\"victoria.chow@example.com\",\"login\":{\"uuid\":\"e491653f-9606-4ffd-a7c1-5dc21737526d\",\"username\":\"happyswan565\",\"password\":\"stevie\",\"salt\":\"A1cjxyMA\",\"md5\":\"71ab7e1c7bd8d02ff69184bec4f269a5\",\"sha1\":\"a9f77f4a015327432a261cbf2da2e597695e7dc1\",\"sha256\":\"6be8424013a66a44328adc05b771bfec68f9192a1a459276e08ea2572f9ab63b\"},\"dob\":{\"date\":\"1955-01-11T07:42:32.250Z\",\"age\":66},\"registered\":{\"date\":\"2008-11-16T06:45:12.808Z\",\"age\":13},\"phone\":\"964-732-6881\",\"cell\":\"345-080-8962\",\"id\":{\"name\":\"\",\"value\":null},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/women/46.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/women/46.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/women/46.jpg\"},\"nat\":\"CA\"},{\"gender\":\"female\",\"name\":{\"title\":\"Ms\",\"first\":\"Josefine\",\"last\":\"Madsen\"},\"location\":{\"street\":{\"number\":8625,\"name\":\"Aastrupvej\"},\"city\":\"St.Merløse\",\"state\":\"Sjælland\",\"country\":\"Denmark\",\"postcode\":42467,\"coordinates\":{\"latitude\":\"35.6576\",\"longitude\":\"-178.1355\"},\"timezone\":{\"offset\":\"+6:00\",\"description\":\"Almaty, Dhaka, Colombo\"}},\"email\":\"josefine.madsen@example.com\",\"login\":{\"uuid\":\"effb12da-6a52-4317-930c-e7e9bcf83155\",\"username\":\"tinybird536\",\"password\":\"maximum\",\"salt\":\"6aIw9Rpb\",\"md5\":\"edf8b2450441d3affedc7f4d7192d84c\",\"sha1\":\"b991844227477ce7bbe133731ec4a95222603355\",\"sha256\":\"6733c047bae1774fb40ee540a78c037cb0c902fc4db5e9d0e86cb5e621a71403\"},\"dob\":{\"date\":\"1972-12-04T08:59:36.785Z\",\"age\":49},\"registered\":{\"date\":\"2009-11-29T23:24:21.064Z\",\"age\":12},\"phone\":\"69022897\",\"cell\":\"19086455\",\"id\":{\"name\":\"CPR\",\"value\":\"041272-7165\"},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/women/78.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/women/78.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/women/78.jpg\"},\"nat\":\"DK\"},{\"gender\":\"male\",\"name\":{\"title\":\"Mr\",\"first\":\"Landon\",\"last\":\"Moore\"},\"location\":{\"street\":{\"number\":1342,\"name\":\"Robinson Rd\"},\"city\":\"Adelaide\",\"state\":\"South Australia\",\"country\":\"Australia\",\"postcode\":1988,\"coordinates\":{\"latitude\":\"-17.8043\",\"longitude\":\"-147.2623\"},\"timezone\":{\"offset\":\"+8:00\",\"description\":\"Beijing, Perth, Singapore, Hong Kong\"}},\"email\":\"landon.moore@example.com\",\"login\":{\"uuid\":\"adb6882b-7f73-41df-b183-f3d76d025696\",\"username\":\"tinylion320\",\"password\":\"city\",\"salt\":\"drDLC7uK\",\"md5\":\"840f9a59edfcfc3ddcdade4e1f47a309\",\"sha1\":\"82d4e30d81b6d67c7376c03ecdecfcef3ec36826\",\"sha256\":\"1bf2ead62ed35d6f37f0e90af3e7490d3123e5d44a47b9bd1396f78e015d7b5d\"},\"dob\":{\"date\":\"1975-01-21T07:16:32.018Z\",\"age\":46},\"registered\":{\"date\":\"2016-02-16T06:23:00.394Z\",\"age\":5},\"phone\":\"07-9810-5432\",\"cell\":\"0463-246-313\",\"id\":{\"name\":\"TFN\",\"value\":\"991965859\"},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/men/30.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/men/30.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/men/30.jpg\"},\"nat\":\"AU\"},{\"gender\":\"female\",\"name\":{\"title\":\"Ms\",\"first\":\"Elif\",\"last\":\"Ozansoy\"},\"location\":{\"street\":{\"number\":3862,\"name\":\"Necatibey Cd\"},\"city\":\"Nevşehir\",\"state\":\"Gaziantep\",\"country\":\"Turkey\",\"postcode\":17315,\"coordinates\":{\"latitude\":\"64.3865\",\"longitude\":\"-30.6032\"},\"timezone\":{\"offset\":\"+6:00\",\"description\":\"Almaty, Dhaka, Colombo\"}},\"email\":\"elif.ozansoy@example.com\",\"login\":{\"uuid\":\"d8367fa6-b53a-4cd1-8680-c0dea3e3444b\",\"username\":\"crazytiger787\",\"password\":\"kashmir\",\"salt\":\"XoUa1JBF\",\"md5\":\"be6b2c2d9beeeb10e63723349df31d24\",\"sha1\":\"18f05e6a36e80d0f942ecf75d9730a9282aeccd5\",\"sha256\":\"da3c55b7b00215616d8ce4a0d25452cb132efc1b525bac5af7419cb8663067a8\"},\"dob\":{\"date\":\"1978-09-29T20:27:17.915Z\",\"age\":43},\"registered\":{\"date\":\"2008-02-19T20:53:45.694Z\",\"age\":13},\"phone\":\"(278)-379-0175\",\"cell\":\"(859)-380-4859\",\"id\":{\"name\":\"\",\"value\":null},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/women/28.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/women/28.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/women/28.jpg\"},\"nat\":\"TR\"},{\"gender\":\"female\",\"name\":{\"title\":\"Mrs\",\"first\":\"Dayane\",\"last\":\"Rodrigues\"},\"location\":{\"street\":{\"number\":6872,\"name\":\"Rua São Luiz \"},\"city\":\"Vespasiano\",\"state\":\"Maranhão\",\"country\":\"Brazil\",\"postcode\":72673,\"coordinates\":{\"latitude\":\"-32.9493\",\"longitude\":\"135.5751\"},\"timezone\":{\"offset\":\"-10:00\",\"description\":\"Hawaii\"}},\"email\":\"dayane.rodrigues@example.com\",\"login\":{\"uuid\":\"67dcd0cc-5e08-45fb-b09e-1787dbf133de\",\"username\":\"heavylion596\",\"password\":\"salomon\",\"salt\":\"z0T448dw\",\"md5\":\"a41271d42da003adead2d2f15e171ace\",\"sha1\":\"80f5685cdb24cf7073dac73a2d3ce4b2bbf4f406\",\"sha256\":\"72c7ada42020017bf87674adc1fab3d95e204886e8da9ca4df15ab7a161ff12c\"},\"dob\":{\"date\":\"1961-08-14T22:59:36.856Z\",\"age\":60},\"registered\":{\"date\":\"2016-10-08T00:28:10.586Z\",\"age\":5},\"phone\":\"(56) 2997-3302\",\"cell\":\"(80) 7685-1586\",\"id\":{\"name\":\"\",\"value\":null},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/women/85.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/women/85.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/women/85.jpg\"},\"nat\":\"BR\"},{\"gender\":\"female\",\"name\":{\"title\":\"Ms\",\"first\":\"Kerttu\",\"last\":\"Hautala\"},\"location\":{\"street\":{\"number\":9278,\"name\":\"Fredrikinkatu\"},\"city\":\"Jomala\",\"state\":\"Southern Savonia\",\"country\":\"Finland\",\"postcode\":58406,\"coordinates\":{\"latitude\":\"51.9506\",\"longitude\":\"-121.2874\"},\"timezone\":{\"offset\":\"+8:00\",\"description\":\"Beijing, Perth, Singapore, Hong Kong\"}},\"email\":\"kerttu.hautala@example.com\",\"login\":{\"uuid\":\"f1d9788b-1b80-4499-92b0-8c04797f593e\",\"username\":\"heavygoose747\",\"password\":\"skylar\",\"salt\":\"jqa5blLJ\",\"md5\":\"1e27665d38d95f5c44ff6935b22a3321\",\"sha1\":\"e7b572601855d9c42ae9ec807f96d9fb4fd37625\",\"sha256\":\"3e36bf8d08f7b42eed7ce7911860e20c88de38dfae2e1def686b7d6c8b51302e\"},\"dob\":{\"date\":\"1960-08-03T23:50:08.365Z\",\"age\":61},\"registered\":{\"date\":\"2013-06-08T13:57:34.345Z\",\"age\":8},\"phone\":\"09-186-592\",\"cell\":\"048-773-93-40\",\"id\":{\"name\":\"HETU\",\"value\":\"NaNNA732undefined\"},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/women/41.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/women/41.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/women/41.jpg\"},\"nat\":\"FI\"},{\"gender\":\"male\",\"name\":{\"title\":\"Mr\",\"first\":\"Antonio\",\"last\":\"Carrasco\"},\"location\":{\"street\":{\"number\":7153,\"name\":\"Calle de Arganzuela\"},\"city\":\"Albacete\",\"state\":\"La Rioja\",\"country\":\"Spain\",\"postcode\":35468,\"coordinates\":{\"latitude\":\"6.9370\",\"longitude\":\"-91.8931\"},\"timezone\":{\"offset\":\"+2:00\",\"description\":\"Kaliningrad, South Africa\"}},\"email\":\"antonio.carrasco@example.com\",\"login\":{\"uuid\":\"8c4bfd20-9754-4a64-ba51-5ef2fa8e9f2e\",\"username\":\"angrykoala312\",\"password\":\"carroll\",\"salt\":\"2Gcb2Dft\",\"md5\":\"ab885982fbab5649e3e3b328d967028f\",\"sha1\":\"530ff336c909333b0b9791697e943a470c697e28\",\"sha256\":\"a8d03834b77f442f9fa6659f225b259be104d458a3f3d1c99c2d2e2d1e0a8832\"},\"dob\":{\"date\":\"1956-01-24T11:21:54.656Z\",\"age\":65},\"registered\":{\"date\":\"2007-08-26T07:37:18.945Z\",\"age\":14},\"phone\":\"912-566-810\",\"cell\":\"630-077-507\",\"id\":{\"name\":\"DNI\",\"value\":\"34467802-Z\"},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/men/97.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/men/97.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/men/97.jpg\"},\"nat\":\"ES\"},{\"gender\":\"female\",\"name\":{\"title\":\"Miss\",\"first\":\"Anneliese\",\"last\":\"Rösner\"},\"location\":{\"street\":{\"number\":3808,\"name\":\"Industriestraße\"},\"city\":\"Bersenbrück\",\"state\":\"Saarland\",\"country\":\"Germany\",\"postcode\":34780,\"coordinates\":{\"latitude\":\"21.0373\",\"longitude\":\"-66.1224\"},\"timezone\":{\"offset\":\"-5:00\",\"description\":\"Eastern Time (US & Canada), Bogota, Lima\"}},\"email\":\"anneliese.rosner@example.com\",\"login\":{\"uuid\":\"abc68951-c3b0-4d97-884e-ca544cc5bf02\",\"username\":\"beautifulsnake754\",\"password\":\"mongoose\",\"salt\":\"RBxmw5pe\",\"md5\":\"c20f2de633c52143b7236d42b3202fd3\",\"sha1\":\"61d762066833e28370bc5946a311d6e8428cbaf2\",\"sha256\":\"6b1b1a914af3897edb7eb933bbd078018a714ba86056be053d6b4e069069b2f2\"},\"dob\":{\"date\":\"1972-06-05T13:16:44.479Z\",\"age\":49},\"registered\":{\"date\":\"2006-08-07T08:38:15.303Z\",\"age\":15},\"phone\":\"0276-4802729\",\"cell\":\"0178-1983980\",\"id\":{\"name\":\"\",\"value\":null},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/women/20.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/women/20.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/women/20.jpg\"},\"nat\":\"DE\"},{\"gender\":\"male\",\"name\":{\"title\":\"Mr\",\"first\":\"Olcay\",\"last\":\"Foesenek\"},\"location\":{\"street\":{\"number\":1919,\"name\":\"De Krabbe\"},\"city\":\"Obdam\",\"state\":\"Zuid-Holland\",\"country\":\"Netherlands\",\"postcode\":44707,\"coordinates\":{\"latitude\":\"37.6512\",\"longitude\":\"9.1595\"},\"timezone\":{\"offset\":\"-5:00\",\"description\":\"Eastern Time (US & Canada), Bogota, Lima\"}},\"email\":\"olcay.foesenek@example.com\",\"login\":{\"uuid\":\"d8e5d07e-8e1f-43da-9acf-5b6fbeef05c7\",\"username\":\"goldenzebra796\",\"password\":\"whitesox\",\"salt\":\"KKYiKYpP\",\"md5\":\"92b3c51903825ec071db7c712a17decc\",\"sha1\":\"f908da184621b67c81fd821396b4f67e264a0e10\",\"sha256\":\"0cb85ad24ad576c888bf28c15729a9e4f9f91cbb5b491f8b9cfc30b975f4552a\"},\"dob\":{\"date\":\"1951-07-04T00:52:57.510Z\",\"age\":70},\"registered\":{\"date\":\"2018-05-04T06:14:14.900Z\",\"age\":3},\"phone\":\"(223)-870-5965\",\"cell\":\"(175)-728-1095\",\"id\":{\"name\":\"BSN\",\"value\":\"22174720\"},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/men/66.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/men/66.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/men/66.jpg\"},\"nat\":\"NL\"},{\"gender\":\"female\",\"name\":{\"title\":\"Miss\",\"first\":\"Ömür\",\"last\":\"Dalkıran\"},\"location\":{\"street\":{\"number\":501,\"name\":\"Talak Göktepe Cd\"},\"city\":\"Kilis\",\"state\":\"Bitlis\",\"country\":\"Turkey\",\"postcode\":43378,\"coordinates\":{\"latitude\":\"7.0688\",\"longitude\":\"18.6780\"},\"timezone\":{\"offset\":\"+10:00\",\"description\":\"Eastern Australia, Guam, Vladivostok\"}},\"email\":\"omur.dalkiran@example.com\",\"login\":{\"uuid\":\"5de8b3ee-c560-43e0-89c8-19db6872bde2\",\"username\":\"purplelion881\",\"password\":\"redleg\",\"salt\":\"uUj4xPx3\",\"md5\":\"368981b9201405894edabb87fead1d19\",\"sha1\":\"d043dbd760dc3fa335414c836d30eb19c88dd4e1\",\"sha256\":\"832113ccbf3d6f820e54b6fea230439517f10099402ae52a38da561b8913f319\"},\"dob\":{\"date\":\"1961-04-27T21:25:22.733Z\",\"age\":60},\"registered\":{\"date\":\"2004-09-09T06:52:33.891Z\",\"age\":17},\"phone\":\"(143)-691-3178\",\"cell\":\"(241)-380-4086\",\"id\":{\"name\":\"\",\"value\":null},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/women/27.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/women/27.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/women/27.jpg\"},\"nat\":\"TR\"},{\"gender\":\"female\",\"name\":{\"title\":\"Mrs\",\"first\":\"Sara\",\"last\":\"Castillo\"},\"location\":{\"street\":{\"number\":3152,\"name\":\"Calle de Arganzuela\"},\"city\":\"Burgos\",\"state\":\"Islas Baleares\",\"country\":\"Spain\",\"postcode\":71601,\"coordinates\":{\"latitude\":\"-56.6128\",\"longitude\":\"115.6383\"},\"timezone\":{\"offset\":\"-5:00\",\"description\":\"Eastern Time (US & Canada), Bogota, Lima\"}},\"email\":\"sara.castillo@example.com\",\"login\":{\"uuid\":\"8240e029-9d75-4b4a-ae2d-98f4ebb6e561\",\"username\":\"brownwolf529\",\"password\":\"panthers\",\"salt\":\"iH49znOe\",\"md5\":\"fbab4a6a92a677fa884f02485fcd8c59\",\"sha1\":\"78f0ac86d832304949a2eb0481b5a28f54ed11b1\",\"sha256\":\"5ba3e44096e726d25646bdf1183a8203bb41843fd9521b11cb262143ea30655c\"},\"dob\":{\"date\":\"1991-09-25T20:32:15.765Z\",\"age\":30},\"registered\":{\"date\":\"2011-06-18T04:31:22.403Z\",\"age\":10},\"phone\":\"904-421-473\",\"cell\":\"650-464-578\",\"id\":{\"name\":\"DNI\",\"value\":\"67770205-O\"},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/women/23.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/women/23.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/women/23.jpg\"},\"nat\":\"ES\"},{\"gender\":\"male\",\"name\":{\"title\":\"Mr\",\"first\":\"Malo\",\"last\":\"Clement\"},\"location\":{\"street\":{\"number\":4644,\"name\":\"Quai Charles-De-Gaulle\"},\"city\":\"Bordeaux\",\"state\":\"Charente\",\"country\":\"France\",\"postcode\":21403,\"coordinates\":{\"latitude\":\"51.3909\",\"longitude\":\"-39.2512\"},\"timezone\":{\"offset\":\"+1:00\",\"description\":\"Brussels, Copenhagen, Madrid, Paris\"}},\"email\":\"malo.clement@example.com\",\"login\":{\"uuid\":\"460228b5-0c4d-4800-9715-307334f239aa\",\"username\":\"heavysnake105\",\"password\":\"hellas\",\"salt\":\"qs3rWaXJ\",\"md5\":\"a321b8f0c4a5a9e6eaa62d556a8c9dab\",\"sha1\":\"8188bd845b16ec1d902a499b778f1d97e948783b\",\"sha256\":\"7af854a61f83b80fdcb36fed60a134ef4efdef6075b5d5d3218762e5e531346d\"},\"dob\":{\"date\":\"1983-01-03T09:27:09.545Z\",\"age\":38},\"registered\":{\"date\":\"2004-01-15T21:53:56.608Z\",\"age\":17},\"phone\":\"05-20-13-21-25\",\"cell\":\"06-17-62-13-31\",\"id\":{\"name\":\"INSEE\",\"value\":\"1NNaN42354999 24\"},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/men/6.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/men/6.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/men/6.jpg\"},\"nat\":\"FR\"},{\"gender\":\"female\",\"name\":{\"title\":\"Miss\",\"first\":\"رها\",\"last\":\"كامياران\"},\"location\":{\"street\":{\"number\":723,\"name\":\"هویزه\"},\"city\":\"تهران\",\"state\":\"تهران\",\"country\":\"Iran\",\"postcode\":60948,\"coordinates\":{\"latitude\":\"62.7252\",\"longitude\":\"-134.5677\"},\"timezone\":{\"offset\":\"+1:00\",\"description\":\"Brussels, Copenhagen, Madrid, Paris\"}},\"email\":\"rh.kmyrn@example.com\",\"login\":{\"uuid\":\"0500cc81-c566-49cd-83f4-c1b33671b4b7\",\"username\":\"lazyelephant287\",\"password\":\"camp\",\"salt\":\"5tjUoxUR\",\"md5\":\"1b8752951fc47dbf33dcac58ad76b757\",\"sha1\":\"a06d543c1bfa5b842007b2c3c9e71c7082cbd8c9\",\"sha256\":\"36a6bb80dcbf4fda1095b208ae066e59ceb71fec6c7bcda4095f41f1105e1bcf\"},\"dob\":{\"date\":\"1952-09-10T02:37:17.515Z\",\"age\":69},\"registered\":{\"date\":\"2005-04-02T00:52:06.192Z\",\"age\":16},\"phone\":\"092-93079640\",\"cell\":\"0900-888-7204\",\"id\":{\"name\":\"\",\"value\":null},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/women/73.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/women/73.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/women/73.jpg\"},\"nat\":\"IR\"},{\"gender\":\"male\",\"name\":{\"title\":\"Mr\",\"first\":\"Adem\",\"last\":\"Kurutluoğlu\"},\"location\":{\"street\":{\"number\":7859,\"name\":\"Maçka Cd\"},\"city\":\"Diyarbakır\",\"state\":\"Kahramanmaraş\",\"country\":\"Turkey\",\"postcode\":33470,\"coordinates\":{\"latitude\":\"-20.5302\",\"longitude\":\"-105.7926\"},\"timezone\":{\"offset\":\"-11:00\",\"description\":\"Midway Island, Samoa\"}},\"email\":\"adem.kurutluoglu@example.com\",\"login\":{\"uuid\":\"5e3191db-8433-4ca6-a03b-4fe1fd6ec0b6\",\"username\":\"bigsnake604\",\"password\":\"dave\",\"salt\":\"GSAC9XGt\",\"md5\":\"0e47e851f8079feaac57436c7144ee7c\",\"sha1\":\"2f8bc530462fce5d29650007927bd5c767d79f70\",\"sha256\":\"c7c81a57c949f497aa4edde6e31f6026637db8f16608358d8a31539808cc92cb\"},\"dob\":{\"date\":\"1993-08-15T11:01:20.534Z\",\"age\":28},\"registered\":{\"date\":\"2007-01-15T14:32:48.633Z\",\"age\":14},\"phone\":\"(654)-413-7700\",\"cell\":\"(237)-079-8877\",\"id\":{\"name\":\"\",\"value\":null},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/men/8.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/men/8.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/men/8.jpg\"},\"nat\":\"TR\"},{\"gender\":\"female\",\"name\":{\"title\":\"Mrs\",\"first\":\"Britt\",\"last\":\"Kupka\"},\"location\":{\"street\":{\"number\":6325,\"name\":\"Neue Straße\"},\"city\":\"Greven\",\"state\":\"Saarland\",\"country\":\"Germany\",\"postcode\":93020,\"coordinates\":{\"latitude\":\"33.8861\",\"longitude\":\"-100.6526\"},\"timezone\":{\"offset\":\"+6:00\",\"description\":\"Almaty, Dhaka, Colombo\"}},\"email\":\"britt.kupka@example.com\",\"login\":{\"uuid\":\"3359f699-d29c-44af-9fc2-ea435db18f98\",\"username\":\"organicostrich733\",\"password\":\"stephen\",\"salt\":\"HIDvFKem\",\"md5\":\"729c63d0e09fef3fe08cec0da4c5e178\",\"sha1\":\"2aec880e7bb27df7ad3c6b1a1dd5b973f5940b80\",\"sha256\":\"9ae39148fa280aa99abcaa6c369fa03f71e97cc47865980804446f9bd12876c7\"},\"dob\":{\"date\":\"1951-06-22T19:33:28.263Z\",\"age\":70},\"registered\":{\"date\":\"2006-05-15T17:27:02.252Z\",\"age\":15},\"phone\":\"0455-3019757\",\"cell\":\"0170-7081450\",\"id\":{\"name\":\"\",\"value\":null},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/women/61.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/women/61.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/women/61.jpg\"},\"nat\":\"DE\"},{\"gender\":\"male\",\"name\":{\"title\":\"Mr\",\"first\":\"آرمین\",\"last\":\"گلشن\"},\"location\":{\"street\":{\"number\":6729,\"name\":\"میدان سلماس\"},\"city\":\"کرمان\",\"state\":\"لرستان\",\"country\":\"Iran\",\"postcode\":92077,\"coordinates\":{\"latitude\":\"-66.2528\",\"longitude\":\"88.2517\"},\"timezone\":{\"offset\":\"+6:00\",\"description\":\"Almaty, Dhaka, Colombo\"}},\"email\":\"armyn.glshn@example.com\",\"login\":{\"uuid\":\"8c3e10f8-432c-47b4-9edd-43e04f255c2e\",\"username\":\"yellowelephant929\",\"password\":\"rooster\",\"salt\":\"4Ss8tWJR\",\"md5\":\"f28dd76f7e840d721e286b57c6ed1328\",\"sha1\":\"6394b02af94cf6d637d6c842e80ce9a0a48b7f1e\",\"sha256\":\"51ce1b5097b4bb15b4185d3035df286b44764b868052cc3aad16e5c0a0b541f1\"},\"dob\":{\"date\":\"1986-05-25T05:09:05.833Z\",\"age\":35},\"registered\":{\"date\":\"2006-05-05T10:16:47.992Z\",\"age\":15},\"phone\":\"093-10138438\",\"cell\":\"0984-212-5453\",\"id\":{\"name\":\"\",\"value\":null},\"picture\":{\"large\":\"https://randomuser.me/api/portraits/men/63.jpg\",\"medium\":\"https://randomuser.me/api/portraits/med/men/63.jpg\",\"thumbnail\":\"https://randomuser.me/api/portraits/thumb/men/63.jpg\"},\"nat\":\"IR\"}],\"info\":{\"seed\":\"91d14c01781d495e\",\"results\":20,\"page\":1,\"version\":\"1.3\"}}\nconst fakeDataBach = [\n    {\n        \"contact\": {\n            \"location\": \"Ha Noi\",\n            \"_id\": \"61767e33ec3b897290b3d8d5\",\n            \"name\": \"vanhSuperLeg4\",\n            \"role\": \"student\",\n            \"date_of_birth\": 1633260836,\n            \"email\": \"doanxem2@gmail.com\",\n            \"vnu_id\": \"e943ef09-952b-470e-9234-7a20e63d11d9\",\n            \"__v\": 0\n        },\n        \"latest_message\": {\n            \"_id\": \"6177b4c63cb432d75aecc497\",\n            \"from\": \"61767df3ec3b897290b3d8ce\",\n            \"to\": \"61767e33ec3b897290b3d8d5\",\n            \"message\": \"reply\",\n            \"createdDate\": 1635235014489,\n            \"__v\": 0\n        },\n        \"latest_sender\": \"isMe\"\n    }\n]\nexport default fakeData;","import { atom } from 'recoil';\n\n\n\nconst curChatPersonAtom = atom({\n    key: {\n        name: 'curChatPerson'\n    },\n    default:  null, \n});\n\nconst curListMessagesAtom = atom({\n    key: {\n        name: 'curListMessages'\n    },\n    default: null,\n})\n\nconst curListContactAtom = atom({\n    key: {\n        name: 'curListContact'\n    },\n    default: null,\n})\n\nconst waitToAddContactAtom = atom({\n    key:{\n        name: \"waitToAddContact\"\n    },\n    default: null\n})\n\nconst waitForUpdateLatestMsgAtom = atom({\n    key: {\n        name: \"waitForUpdateLatestMsg\"\n    },\n    default: null\n})\nexport { curChatPersonAtom, curListMessagesAtom, curListContactAtom, waitToAddContactAtom, waitForUpdateLatestMsgAtom };","import { useRecoilState } from 'recoil';\nimport { useFetchWrapper } from '_helpers';\nimport * as Configs from './Constant';\nimport { curChatPersonAtom, curListMessagesAtom, curListContactAtom, waitForUpdateLatestMsgAtom } from '../_state/chat';\nimport { alertBachAtom } from '../_state/alert_bach';\nimport { waitToAddContactAtom } from '../_state/chat';\nfunction useChatWrapper(param) {\n    const fetchWrapper = useFetchWrapper();\n    const [alert, setAlert] = useRecoilState(alertBachAtom);\n    const [curChatPerson, setCurChatPerson] = useRecoilState(curChatPersonAtom);\n    const [curListMessages, setCurListMessage] = useRecoilState(curListMessagesAtom);\n    const [curListContact, setCurListContact] = useRecoilState(curListContactAtom);\n    const [waitingToAddContact, setWaitingToAddContact] = useRecoilState(waitToAddContactAtom)\n    const [listUpdateLatestMsg, setListUpdateLatestMsg] = useRecoilState(waitForUpdateLatestMsgAtom);\n    async function getRecentContact() {\n        try {\n     \n            let res = await fetchWrapper.get(Configs.HOST_NAME + Configs.API_PATH.RECENT_CONTACT);\n            if (res.ok) {\n                res = await res.json();\n                setCurListContact(res.message);\n            }\n            return res;\n        } catch (e) {\n            setAlert({message: \"Fetch Error\", description: e.toString()})\n        }\n        \n    }\n\n    async function fetchCurListMessageById(vnu_id) {\n        try {\n            setCurListMessage([]);\n            let res = await fetchWrapper.get(Configs.HOST_NAME + Configs.API_PATH.MESSAGES_BY_VNU_ID.replace(\":otherVNUId\", vnu_id));\n            if (res.ok) {\n                res = await res.json();\n                setCurChatPerson(vnu_id);\n                setCurListMessage(res.message);\n            }\n            \n            return res;\n        } catch (e) {\n            setAlert({message: \"Fetch Error\", description: e.toString()})\n        }\n    }\n    return {\n        curListContact,\n        setCurListContact,\n        getRecentContact,\n        curChatPerson,\n        setCurChatPerson,\n        curListMessages,\n        setCurListMessage,\n        fetchCurListMessageById,\n        curChatPersonAtom,\n        curListMessagesAtom,\n        curListContactAtom,\n        waitToAddContactAtom,\n        waitingToAddContact,\n        setWaitingToAddContact,\n        listUpdateLatestMsg,\n        setListUpdateLatestMsg,\n        waitForUpdateLatestMsgAtom\n    }\n}\nexport default useChatWrapper;","import { useSetRecoilState, useResetRecoilState, useRecoilState } from 'recoil';\nimport { alertBachAtom } from '../_state/alert_bach';\nimport useChatWrapper from '_helpers/chat-wrapper';\nimport { useAuthWrapper } from '_helpers';\nimport { useFetchWrapper } from '_helpers';\nimport { socketWrapper } from '_helpers/socket-wrapper';\nimport { loadingVisibleAtom } from '_state';\nimport * as Configs from '_helpers/Constant';\nimport { curListContactAtom } from '_state/chat';\nimport { message } from 'antd';\nfunction useChatAction() {\n    // setAlert in form  setAlert(messageTitle, description)\n    const [alert, setAlert] = useRecoilState(alertBachAtom);\n    const [loadingVisible, setLoadingVisible] = useRecoilState(loadingVisibleAtom);\n    const authWrapper = useAuthWrapper();\n    const chatWrapper = useChatWrapper();\n    const fetcher = useFetchWrapper();\n    async function getRecentContact() {\n        setLoadingVisible(true);\n        await chatWrapper.getRecentContact();\n        setLoadingVisible(false);\n    }\n\n    async function getCurChatMessageById(vnu_id) {\n        setLoadingVisible(true);\n        await chatWrapper.fetchCurListMessageById(vnu_id);\n        setLoadingVisible(false)\n    }\n\n    async function onSendMessage(content) {\n        let uInfo =  await authWrapper.getUserInfo();\n        \n        let message = \n        {\n            to : chatWrapper.curChatPerson,\n            message: content\n        }\n        console.log(message)\n        socketWrapper.socket.emit(\"NewMessage\", message)\n    }\n\n    function findContactInList(vnu_id) {\n        let count = 0;\n        if (chatWrapper.curListContact)\n        for (var i of chatWrapper.curListContact) {\n            if (i.contact.vnu_id === vnu_id)\n                return {element: i, index : count};\n        count++;\n        }\n        return {element: null, index: null};\n    }\n\n    function updateLatestMsg(latest) {\n        let temp = findContactInList(latest.vnu_id);\n        let i = temp.element;\n        let index = temp.index;\n        let newContact = {...i};\n        newContact.latest_message = latest.latest_message;\n        let curListContact_ = [...chatWrapper.curListContact];\n        curListContact_[index] = newContact;\n        chatWrapper.setCurListContact(curListContact_);\n    }\n\n    async function addContactToList(obj) {\n        let vnu_id = obj.vnu_id\n        let form = {contact : null, latest_message : null, latest_sender : null}\n        if (obj.message) {\n            form.latest_message = {message: obj.message.message}\n            form.latest_sender = message.isSender ? \"isMe\" : \"notMe\"\n        }\n        \n        if (findContactInList(vnu_id).element) return;\n        try {\n            \n            let res = await fetcher.get(Configs.HOST_NAME + Configs.API_PATH.PROFILE_BY_ID.replace(\":profileId\", vnu_id));\n            if (!res.ok) {\n                // debugger\n                setAlert({message: \"Loi\", description: \"Link khong hop le\"})\n                return;\n            }\n            form.contact = await res.json(); \n            let newList = chatWrapper.curListContact ? [...chatWrapper.curListContact] : [];\n            newList.push(form);\n            chatWrapper.setCurListContact(newList);\n        } catch(e) {\n            setAlert({message: \"Loi\", description:\"Khong the them contact. Err : \" + e.toString()});\n        }\n        \n\n    }\n\n    return {getRecentContact, getCurChatMessageById, onSendMessage, addContactToList, updateLatestMsg}\n}  \n\nexport default useChatAction;\n","import React, {useState, useEffect} from 'react';\nimport ConversationSearch from '../ConversationSearch';\nimport ConversationListItem from '../ConversationListItem';\nimport Toolbar from '../Toolbar';\nimport { useParams } from 'react-router-dom';\nimport ToolbarButton from '../ToolbarButton';\nimport { useFetchWrapper } from '_helpers';\nimport fakeData from './conservationlistFake';\nimport './ConversationList.css';\nimport useChatAction from '_actions/chat.action';\nimport useChatWrapper from '_helpers/chat-wrapper';\nimport { Link } from 'react-router-dom';\nexport default function ConversationList(props) {\n  const fetcher = useFetchWrapper();\n  const chatAction = useChatAction();\n  const chatWrapper = useChatWrapper();\n \n  useEffect(() => {\n    chatAction.getRecentContact().then((res) => {\n      props.setLoaded(true);\n    });\n  },[])\n\n\n  useEffect(() => {\n    async function addContact() {\n      if (chatWrapper.waitingToAddContact && chatWrapper.waitingToAddContact.length > 0) {\n        for (var i of chatWrapper.waitingToAddContact) {\n          await chatAction.addContactToList(i);\n        }\n      }\n    }\n\n    addContact().then(() => {\n      chatWrapper.setWaitingToAddContact(null);\n    })\n    console.log(\"AAAAAAAAAAAAA\")\n  },[chatWrapper.waitingToAddContact])\n\n  useEffect(() => {\n\n\tif (!chatWrapper.listUpdateLatestMsg) return;\n    for (var i of chatWrapper.listUpdateLatestMsg) {\n\t\tchatAction.updateLatestMsg(i)\n\t}\t\n  },[chatWrapper.listUpdateLatestMsg])\n  let conservationsList = chatWrapper.curListContact ? chatWrapper.curListContact.map(result => {\n    return {\n      vnu_id: result.contact.vnu_id,\n      name: result.contact.name,\n      text: result.latest_message ? result.latest_message.message : \"Chua co tin nhan nao\"\n    };\n  }) : []; \n    return (\n      <div className=\"conversation-list\">\n        <Toolbar\n          title=\"Nhắn tin\"\n          leftItems={[\n            <ToolbarButton key=\"cog\" icon=\"ion-ios-cog\" />\n          ]}\n          rightItems={[\n            <ToolbarButton key=\"add\" icon=\"ion-ios-add-circle-outline\" />\n          ]}\n        />\n        {\n          conservationsList.map(conversation =>\n            <Link to={`/chat/${conversation.vnu_id}`}>\n              <ConversationListItem\n                key={conversation.name}\n                data={conversation}\n                picked={conversation.vnu_id ===  chatWrapper.curChatPerson}\n              />\n            </Link>\n          )\n        }\n      </div>\n    );\n}","import React from 'react';\nimport './Compose.css';\nimport { useState } from 'react';\nimport {Button} from 'antd';\nimport {SendOutlined} from '@ant-design/icons'\n\nexport default function Compose(props) {\n  const [inputValue, setInputValue] = useState(\"\");\n  const onChangeInput = (e) => {\n    setInputValue(e.target.value);\n  }\n  const onSendMessage = props.onSendMessage ? props.onSendMessage : () => {}  \n  const onKeyDown = (e) => {\n    if (e.key === \"Enter\") {\n      console.log(props)\n      if (inputValue.replace(/\\s/g, '')!='') {\n        onSendMessage(inputValue);\n      }  \n      setInputValue(\"\");\n    }\n  }\n\n  function onClick() {\n    if (inputValue.replace(/\\s/g, '')!='') {\n      onSendMessage(inputValue);\n    }\n  }\n\n    return (\n      <div className={props.visible ? \"compose\" : \"compose hidden\"}>\n        <input\n          type=\"text\"\n          className=\"compose-input\"\n          placeholder=\"Nhập tin nhắn để gửi\"\n          value={inputValue}\n          onChange={onChangeInput}\n          onKeyDown={onKeyDown}\n        />\n        <Button type=\"primary\" shape=\"circle\" icon={<SendOutlined />} size=\"large\" onClick = {onClick} />\n        {\n          props.rightItems\n        }\n      </div>\n    );\n}","import React from 'react';\nimport moment from 'moment';\nimport './Message.css';\n\nexport default function Message(props) {\n    const {\n      data,\n      isMine,\n      startsSequence,\n      endsSequence,\n      showTimestamp\n    } = props;\n\n    const friendlyTimestamp = moment(data.timestamp).format('LLLL');\n    return (\n      <div className={[\n        'message',\n        `${isMine ? 'mine' : ''}`,\n        `${startsSequence ? 'start' : ''}`,\n        `${endsSequence ? 'end' : ''}`\n      ].join(' ')}>\n        {\n          showTimestamp &&\n            <div className=\"timestamp\">\n              { friendlyTimestamp }\n            </div>\n        }\n\n        <div className=\"bubble-container\">\n          <div className=\"bubble\" title={friendlyTimestamp}>\n            { data.message }\n          </div>\n        </div>\n      </div>\n    );\n}","import React, {useEffect, useRef, useState} from 'react';\nimport Compose from '../Compose';\nimport Toolbar from '../Toolbar';\nimport ToolbarButton from '../ToolbarButton';\nimport Message from '../Message';\nimport moment from 'moment';\nimport useChatAction from '_actions/chat.action';\nimport useChatWrapper from '_helpers/chat-wrapper';\nimport {useParams} from 'react-router-dom';\nimport { useAuthWrapper } from '_helpers';\nimport './MessageList.css';\nimport axios from 'axios';\nexport default function MessageList(props) {\n  let {vnu_id} = useParams();\n  const [fetchDone, setFetchDone] = useState(false);\n  const [isHidden, setIsHidden] = useState(true);\n  const messageEnd = useRef(null);\n  const chatAction = useChatAction();\n  const chatWrapper = useChatWrapper();\n  const NOT_MY_USER_ID = vnu_id\n  let [targetName, setTargetName] = useState('');\n  useEffect(() => {\n\n    setIsHidden(true);\n    if (vnu_id)\n    chatAction.addContactToList({vnu_id : vnu_id}).then(() => {\n      chatAction.getCurChatMessageById(vnu_id).then(res => {\n        setFetchDone(true);\n        setIsHidden(false);\n      });\n    })\n    \n    async function getTargetName(vnu_id) {\n      // debugger\n      if (vnu_id) {\n        let res = await axios.get('http://localhost:3000/api/profile/' + vnu_id)\n        res = res.data;\n        // debugger\n        setTargetName(res.name);\n    }\n    }\n    getTargetName(vnu_id)\n  },[vnu_id])\n  useEffect(() => {\n    \n    return () => {\n      chatWrapper.setCurChatPerson(null);\n    }\n  }, [])\n  let messages = [];\n\n  if (fetchDone)\n    messages = chatWrapper.curListMessages &&  chatWrapper.curListMessages.length > 0 ? chatWrapper.curListMessages.map(result => {\n    \n    return {\n      id: result._id,\n      author: result.from.vnu_id,\n      message: result.message,\n      timestamp: new Date(result.createdDate)\n    };\n  }) : []; \n \n  useEffect(() => {\n    messageEnd.current.scrollIntoView()\n  }, [chatWrapper.curListMessages])\n  const renderMessages = () => {\n    let i = 0;\n    let messageCount = messages.length;\n    let tempMessages = [];\n    \n    while (i < messageCount) {\n      let previous = messages[i - 1];\n      let current = messages[i];\n      let next = messages[i + 1];\n      let isMine = current.author !== NOT_MY_USER_ID;\n      let currentMoment = moment(current.timestamp);\n      let prevBySameAuthor = false;\n      let nextBySameAuthor = false;\n      let startsSequence = true;\n      let endsSequence = true;\n      let showTimestamp = true;\n\n      if (previous) {\n        let previousMoment = moment(previous.timestamp);\n        let previousDuration = moment.duration(currentMoment.diff(previousMoment));\n       \n        prevBySameAuthor = previous.author === current.author;\n        \n        if (prevBySameAuthor && previousDuration.as('hours') < 1) {\n          startsSequence = false;\n        }\n\n        if (previousDuration.as('hours') < 1) {\n          showTimestamp = false;\n        }\n      }\n\n      if (next) {\n        let nextMoment = moment(next.timestamp);\n        let nextDuration = moment.duration(nextMoment.diff(currentMoment));\n        nextBySameAuthor = next.author === current.author;\n\n        if (nextBySameAuthor && nextDuration.as('hours') < 1) {\n          endsSequence = false;\n        }\n      }\n\n      tempMessages.push(\n        <Message\n          key={i}\n          isMine={isMine}\n          startsSequence={startsSequence}\n          endsSequence={endsSequence}\n          showTimestamp={showTimestamp}\n          data={current}\n        />\n      );\n\n      // Proceed to the next message.\n      i += 1;\n    }\n\n    return tempMessages;\n  }\n\n    return(\n      <div className=\"message-list\">\n        <Toolbar\n        className=\"conversation-title-toolbar\"\n          title={\"Trao đổi với \" + targetName}\n        />\n\n        <div  className=\"message-list-container\">{renderMessages()}\n          <div style={{ float:\"left\", clear: \"both\" }}\n              ref={messageEnd}>\n          </div>\n        </div>\n        <Compose onSendMessage={chatAction.onSendMessage} visible={!isHidden}/>\n        \n      </div>\n    );\n}\n\n // const getMessages = () => {\n  //    var tempMessages = [\n  //       {\n  //         id: 1,\n  //         author: 'apple',\n  //         message: 'Hello world! This is a long message that will hopefully get wrapped by our message bubble component! We will see how well it works.',\n  //         timestamp: new Date().getTime()\n  //       },\n  //       {\n  //         id: 2,\n  //         author: 'orange',\n  //         message: 'It looks like it wraps exactly as it is supposed to. Lets see what a reply looks like!',\n  //         timestamp: new Date().getTime()\n  //       },\n  //       {\n  //         id: 3,\n  //         author: 'orange',\n  //         message: 'Hello world! This is a long message that will hopefully get wrapped by our message bubble component! We will see how well it works.',\n  //         timestamp: new Date().getTime()\n  //       },\n  //       {\n  //         id: 4,\n  //         author: 'apple',\n  //         message: 'It looks like it wraps exactly as it is supposed to. Lets see what a reply looks like!',\n  //         timestamp: new Date().getTime()\n  //       },\n  //       {\n  //         id: 5,\n  //         author: 'apple',\n  //         message: 'Hello world! This is a long message that will hopefully get wrapped by our message bubble component! We will see how well it works.',\n  //         timestamp: new Date().getTime()\n  //       },\n  //       {\n  //         id: 6,\n  //         author: 'apple',\n  //         message: 'It looks like it wraps exactly as it is supposed to. Lets see what a reply looks like!',\n  //         timestamp: new Date().getTime()\n  //       },\n  //       {\n  //         id: 7,\n  //         author: 'orange',\n  //         message: 'Hello world! This is a long message that will hopefully get wrapped by our message bubble component! We will see how well it works.',\n  //         timestamp: new Date().getTime()\n  //       },\n  //       {\n  //         id: 8,\n  //         author: 'orange',\n  //         message: 'It looks like it wraps exactly as it is supposed to. Lets see what a reply looks like!',\n  //         timestamp: new Date().getTime()\n  //       },\n  //       {\n  //         id: 9,\n  //         author: 'apple',\n  //         message: 'Hello world! This is a long message that will hopefully get wrapped by our message bubble component! We will see how well it works.',\n  //         timestamp: new Date().getTime()\n  //       },\n  //       {\n  //         id: 10,\n  //         author: 'orange',\n  //         message: 'It looks like it wraps exactly as it is supposed to. Lets see what a reply looks like!',\n  //         timestamp: new Date().getTime()\n  //       },\n  //     ]\n  // }","import React, { useState } from 'react';\nimport ConversationList from '../ConversationList';\nimport MessageList from '../MessageList';\nimport './Messenger.css';\nimport { PrivateRoute } from '_components/PrivateRoute';\nimport { Switch } from 'react-router-dom';\nexport default function Messenger(props) {\n  const [conversationLoaded, setConservationLoaded] = useState(false)\n    return (\n      <div className=\"messenger\">\n        {/* <Toolbar\n          title=\"Messenger\"\n          leftItems={[\n            <ToolbarButton key=\"cog\" icon=\"ion-ios-cog\" />\n          ]}\n          rightItems={[\n            <ToolbarButton key=\"add\" icon=\"ion-ios-add-circle-outline\" />\n          ]}\n        /> */}\n\n        {/* <Toolbar\n          title=\"Conversation Title\"\n          rightItems={[\n            <ToolbarButton key=\"info\" icon=\"ion-ios-information-circle-outline\" />,\n            <ToolbarButton key=\"video\" icon=\"ion-ios-videocam\" />,\n            <ToolbarButton key=\"phone\" icon=\"ion-ios-call\" />\n          ]}\n        /> */}\n\n        <div className=\"scrollable sidebar\">\n          <ConversationList setLoaded={setConservationLoaded}/>\n        </div>\n\n        <div className=\"scrollable content\">\n          {conversationLoaded && \n          <Switch>\n            <PrivateRoute exact path=\"/chat/:vnu_id\" component={MessageList} />\n          </Switch>\n        }\n        \n        \n          \n        </div>\n      </div>\n    );\n}","import { Link } from 'react-router-dom';\nimport { useRecoilValue } from 'recoil';\nimport { useEffect, useState } from 'react';\nimport Messenger from '_components/bach_component/Messenger';\nimport { PrivateRoute } from '_components/PrivateRoute';\nimport { authAtom } from '_state';\nimport { socketWrapper } from '_helpers/socket-wrapper';\nimport { useAuthWrapper } from '_helpers';\nimport { useRecoilState } from 'recoil';\nimport { socketConnected } from '_state/socket';\nexport { Chat };\n\nfunction Chat() {\n    const auth = useRecoilValue(authAtom);\n    const [isSocketConnected, setSocketConnected] = useRecoilState(socketConnected)\n    const authWrapper = useAuthWrapper();\n    useEffect(() => {\n        console.log(\"Socket Status: \" + isSocketConnected)\n        if (auth && !isSocketConnected) {\n            socketWrapper.initConnection(auth);\n        }\n    }, [])\n    return  <>\n        {isSocketConnected &&\n        <div style={{height:\"640px\"}}>\n            <Messenger></Messenger>\n        </div>\n        }\n        </>\n  \n}\n","import { authAtom } from '_state';\nimport { useRecoilState, useRecoilValue } from 'recoil';\n\nimport { scoreAtom } from '_state';\nimport { StudentScoreTable } from '_components/studentScoreList';\n\nexport { StudentScoreList };\n\n\nfunction StudentScoreList() {\n    const [score, setScore] = useRecoilState(scoreAtom);\n    return (\n        <div className=\"p-4\">\n            <StudentScoreTable data = {score} />\n        </div>\n    );\n}\n","import { useRecoilState } from 'recoil';\nimport React ,{useEffect, useState} from 'react';\nimport { useStudentScoreAction } from '_actions';\nimport { pscoreAtom } from '_state';\nimport 'antd/dist/antd.css';\nimport { Table} from 'antd';\nimport { Scoreboard } from '_components/studentScoreList'\n\nexport { StudentScore };\n\nfunction StudentScore(props) {\n    // const [personalScore, setPersonalScore] = useRecoilState(pscoreAtom);\n    const studentScoreAction = useStudentScoreAction();\n\n    const [scoreboard, setScoreboard] = useState([]);\n    const [personalScore, setPScore] = useState(null);\n    const [scoreTotal, setScoreTotal] = useState({});\n    const [semList, setSemList] = useState([{\n        name: 'Kì học không xác định',\n        value: 'Kì học không xác định'\n    }]);\n\n    // const [scoreTotal, setScoreTotal] = useState({});\n\n\n    useEffect(() => {\n        console.log(\"Reconstruct SScore\")\n        async function initScore() {\n            // console.log(props.vnu_id);\n        if (!props.vnu_id) {\n            return;\n        } else {\n            let newData = null ;\n            if (props.isPersonal === true) {\n                newData = await studentScoreAction.getMyScore();\n            }\n            else {\n                newData = await studentScoreAction.getScoreByID(props.vnu_id);\n            }\n            let semesters = await studentScoreAction.getAllSemester();\n\n            // console.log(semesters);\n            setPScore(newData);\n            var fetchedScore = newData.scores;\n    \n            var convertedScore =[];\n            \n            var CPA = 0;\n            var totalCredit = 0;\n            var totalScore = 0;\n\n            fetchedScore.forEach(element => {\n                var convertedSemester = {\n                    semester_id: '00000',\n                    semester_name: 'Kì học không xác định'\n                }\n\n                // semester._id của scores là mã ID dạng hash\n                // còn element.semester_id của semesters là id kiểu 20201\n                semesters.forEach(semester => {\n                    // console.log(semester._id);\n                    // console.log(element.semester_id);\n                    if (semester._id === element.semester_id) {\n                        convertedSemester = {\n                            semester_id : semester.semester_id,\n                            semester_name: semester.semester_name\n                        }\n                    }\n                });\n\n                var semesterList = [];\n                semesters.forEach(semester => {\n                    semesterList.push({\n                        text: semester.semester_name,\n                        value: semester.semester_name\n                    })\n                })\n                setSemList(semesterList);\n                console.log(\"Semester List\");\n                console.log(semList);\n\n                convertedScore.push({\n                    subject_name : element.subject.subject_name,\n                    subject_code : element.subject.subject_code,\n                    credits_number : element.subject.credits_number,\n                    score : element.score,\n                    scoref : Number.parseFloat(element.score*0.4).toFixed(2),\n                    semester_name : convertedSemester.semester_name,\n                })\n                totalCredit += element.subject.credits_number;\n                totalScore += element.subject.credits_number*element.score;\n            });\n            \n            setScoreboard(convertedScore);\n\n            CPA = ((totalScore/totalCredit)/10*4).toFixed(2);\n            var state = (CPA > 2.5) ? ['Bình thường'] : ['Cảnh cáo'];\n            state = (CPA < 1) ? ['Đuổi học'] : state;\n\n            setScoreTotal({\n                name: newData.user_ref.name,\n                vnu_id: newData.user_ref.vnu_id,\n                total_credits : totalCredit,\n                cpa: CPA,\n                stt: state\n            });\n\n                // this.forceUpdate();\n                // console.log(scoreTotal);\n        }\n        }\n        \n        initScore();\n    }, [props.vnu_id]);\n\n    return (\n        <div>\n            <Scoreboard scoreboard={scoreboard} scoreTotal ={scoreTotal} semesterList= {semList} isPersonal={props.isPersonal}></Scoreboard>\n        </div>\n    );\n}\n\n\n    // const columns = [\n    //     {\n    //         title: 'Tên học phần',\n    //         dataIndex: 'subject_name',\n    //         key: 'subject_name',\n    //     },\n    //     {\n    //         title: 'Mã học phần',\n    //         dataIndex: 'subject_code',\n    //         key: 'subject_code',\n    //     },\n        \n    //     {\n    //       title: 'Số tín chỉ',\n    //       dataIndex: 'credits_number',\n    //       key: 'credits_number',\n    //     },\n    //     {\n    //         title: 'Điểm hệ 10',\n    //         dataIndex: 'score',\n    //         key: 'score',\n    //     },\n    // ]\n\n    // console.log(scoreboard);","\nimport React  from 'react';\nimport 'antd/dist/antd.css';\nimport { StudentScore } from '_components/studentScoreList'\n\nexport { PersonalScore };\n\nfunction PersonalScore() {\n    // let vnu_id = localStorage.getItem('userData');\n    // console.log(vnu_id);\n\n    // const [profile,setProfile] = useRecoilState(profileAtom);\n\n    return (\n        <div>\n            <StudentScore vnu_id = {19020001} isPersonal={true} />\n        </div>\n    )\n   \n}","import React ,{useEffect, useState} from 'react';\nimport 'antd/dist/antd.css';\nimport { Table, Typography, Row, Col, Switch, Button} from 'antd';\nimport { Link } from 'react-router-dom';\nimport { WechatOutlined, UserOutlined } from '@ant-design/icons';\n\nconst { Title, Text } = Typography;\n\nexport { Scoreboard };\n\nfunction Scoreboard(props) {\n\n    // console.log(props);\n    const [scoreType, setScoreType] = useState({\n        decimal: true\n    });\n\n    const [scoreFilter, setScoreTotal] = useState(null)\n\n    function onChange(checked) {\n        setScoreType({\n            decimal: !scoreType.decimal\n        })\n    }\n\n    const columns = [\n        {\n            title: 'Tên học phần',\n            dataIndex: 'subject_name',\n            key: 'subject_name',\n            width: 180,\n        },\n        {\n            title: 'Mã học phần',\n            dataIndex: 'subject_code',\n            key: 'subject_code',\n            width: 110,\n        },\n        \n        {\n          title: 'Tín chỉ',\n          dataIndex: 'credits_number',\n          key: 'credits_number',\n          width: 80,\n        },\n        {\n            title: 'Điểm hệ 10',\n            dataIndex: 'score',\n            key: 'score',\n            width: 110,\n        },\n        {\n            title: 'Điểm hệ 4',\n            dataIndex: 'scoref',\n            key: 'scoref',\n            width: 100,\n        },\n        {\n            title: 'Kì học',\n            dataIndex: 'semester_name',\n            key: 'semester_name',\n            width: 180,\n            filters: props.semesterList,\n            onFilter: (value, record) => {\n                console.log(value);\n                return record.semester_name.includes(value);\n            },\n            filterSearch: true,\n        },\n    ]\n\n    function configChatButton(){\n        return (<Link to={`/chat/${props.scoreTotal.vnu_id}`}>\n                    <Button type=\"primary\" shape=\"round\" icon={<WechatOutlined />} size=\"small\" style={{marginBottom: \"8px\"}}> Nhắn tin </Button>\n                    </Link>);\n    }\n    return (\n        <div>\n            <Row>\n            <Col flex=\"250px\">\n                <Title level={4}>{props.scoreTotal.name}</Title>\n                <div>\n                    <b>VNU ID:</b> {props.scoreTotal.vnu_id}\n                    <br/>\n                    <br/>\n                    <b>CPA:</b> {props.scoreTotal.cpa}\n                    <br/>\n                    <b>Số tín chỉ:</b> {props.scoreTotal.total_credits}\n                    <br/>\n                    <b>Trạng thái:</b> {props.scoreTotal.stt}\n                    <br/>\n                    <br/>\n                    <i>Nhấn nút lọc ở cột <b>Kì học</b> để</i> \n                    <br/>\n                    <i>xem chi tiết từng kì</i>\n                    <br/>\n                    {/* <Switch defaultChecked={scoreType.decimal} onChange={onChange} /> */}\n                    <br/>\n                    {props.isPersonal === false ? configChatButton() : \"\"}\n                    <br/>\n                    <Button type=\"primary\" shape=\"round\" size=\"small\" onClick={onChange} > {scoreType.decimal === true? \"Xem điểm hệ 4\" : \"Xem điểm hệ 10\"} </Button>\n                </div>\n            </Col>\n            <Col flex=\"auto\">\n                <Table\n                columns={scoreType.decimal === true ? columns.filter(col => col.dataIndex !== 'scoref') : columns.filter(col => col.dataIndex !== 'score')}\n                dataSource={props.scoreboard}\n                summary={pageData => {\n                    let summCredit = 0;\n                    let summScore = 0;\n            \n                    pageData.forEach(({ credits_number, score, scoref }) => {\n                        summCredit += credits_number;\n                        summScore += score*credits_number;\n                    });\n            \n                    return (\n                      <>\n                        <Table.Summary.Row>\n                          <Table.Summary.Cell colSpan={2}><b>Tổng kết</b></Table.Summary.Cell>\n                          <Table.Summary.Cell>\n                            <Text ><b>{summCredit}</b></Text>\n                          </Table.Summary.Cell>\n                          <Table.Summary.Cell>\n                            <Text><b>{scoreType.decimal === true ? (summScore/summCredit).toFixed(2) : ((summScore/summCredit)/10*4).toFixed(2)}</b></Text>\n                          </Table.Summary.Cell>\n                          <Table.Summary.Cell/>\n                          {/* <Table.Summary.Cell>\n                            <Text>{totalRepayment}</Text>\n                          </Table.Summary.Cell> */}\n                        </Table.Summary.Row>\n                        {/* <Table.Summary.Row>\n                          <Table.Summary.Cell>Balance</Table.Summary.Cell>\n                          <Table.Summary.Cell colSpan={2}>\n                            <Text type=\"danger\">{totalBorrow - totalRepayment}</Text>\n                          </Table.Summary.Cell>\n                        </Table.Summary.Row> */}\n                      </>\n                    );\n                  }}\n                bordered\n                \n                />\n            </Col>\n            </Row>\n        </div>\n    );\n}","import React ,{useEffect, useState} from 'react';\nimport 'antd/dist/antd.css';\nimport { Table, Button, Space, Input, Tag, Modal, Row, Col} from 'antd';\nimport Highlighter from 'react-highlight-words';\nimport { SearchOutlined, InfoCircleTwoTone} from '@ant-design/icons';\nimport { StudentScore } from '_components/studentScoreList'\nimport {useStudentScoreAction} from '_actions';\nimport { useClassWrapper, useFetchWrapper } from '_helpers';\nimport { SettingsSystemDaydreamTwoTone } from '@mui/icons-material';\nimport { DownloadForm } from '_components/studentScoreList';\n\n\nexport { StudentScoreTable };\n\nfunction StudentScoreTable(props){\n    var data =  JSON.parse(JSON.stringify(props.data));\n    const studentScoreAction = useStudentScoreAction();\n    const fetchWrapper = useFetchWrapper();\n    const classWrapper = useClassWrapper();\n\n    data = studentScoreAction.handleData(data);\n\n    const [state, setState] = useState({\n        searchText: '', \n        searchedColumn: '',\n        visible : false,\n        currentRow: {\n          _id: '',\n          key: 1,\n          name: 'Nguyễn văn A ' + 1,\n          tags: (1 % 2) ? ['Bình thường'] : ['Cảnh cáo'],\n          date_of_birth: 1%30 + 1 + '/1/2001',\n          email: 1 + 19021000 + '@vnu.edu.vn',\n          vnu_id: 19020000 + 1,\n        },\n      });\n\n    const [downloadPanelVisible, setDownloadPanelVisible] = useState(false);\n\n    const handleDownloadCancel = () => {\n      setDownloadPanelVisible(false);\n    };\n\n    const showDownloadPanel = () => {\n      console.log(\"button clicked\")\n      setDownloadPanelVisible(true);\n      console.log(downloadPanelVisible);\n    };\n   \n    \n    let handleSearch = (selectedKeys, confirm, dataIndex) => {\n        confirm();\n        setState({\n          ...state,\n          searchText: selectedKeys[0],\n          searchedColumn: dataIndex,\n        });\n      };\n    \n    let handleReset = clearFilters => {\n        clearFilters();\n        setState({ ...state, searchText: '' });\n      };\n\n    function save(blob, fileName) {\n        if (window.navigator.msSaveOrOpenBlob) { // For IE:\n            navigator.msSaveBlob(blob, fileName);\n        } else { // For other browsers:\n            var link = document.createElement('a');\n            link.href = window.URL.createObjectURL(blob);\n            link.download = fileName;\n            link.click();\n            window.URL.revokeObjectURL(link.href);\n        }\n    }\n      \n    let handleShowScoreboard = (record) =>{\n      // console.log(record)\n        setState({\n          ...state,\n          currentRow : record,\n          visible : true});\n        // setCurrentStudent(state.currentRow.vnu_id);\n        // studentScoreAction.getScoreByID(state.currentRow.vnu_id);\n        // console.log(\"getScoreByID triggered\");\n\n    }\n\n    let handleCloseModal = () => {\n        setState({\n          ...state,\n          visible : false,\n      })\n    }\n\n    let searchInput;\n    let getColumnSearchProps = dataIndex => ({\n        filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n          <div style={{ padding: 8 }}>\n            <Input\n              ref={node => {\n                  searchInput = node;\n              }}\n              placeholder={`Search ${dataIndex}`}\n              value={selectedKeys[0]}\n              onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\n              onPressEnter={() => handleSearch(selectedKeys, confirm, dataIndex)}\n              style={{ marginBottom: 8, display: 'block' }}\n            />\n            <Space>\n              <Button\n                type=\"primary\"\n                onClick={() => handleSearch(selectedKeys, confirm, dataIndex)}\n                icon={<SearchOutlined />}\n                size=\"small\"\n                style={{ width: 90 }}\n              >\n                Search\n              </Button>\n              <Button onClick={() => handleReset(clearFilters)} size=\"small\" style={{ width: 90 }}>\n                Reset\n              </Button>\n              <Button\n                type=\"link\"\n                size=\"small\"\n                onClick={() => {\n                  confirm({ closeDropdown: false });\n                  setState({\n                    ...state,\n                    searchText: selectedKeys[0],\n                    searchedColumn: dataIndex,\n                  });\n                }}\n              >\n                Filter\n              </Button>\n            </Space>\n          </div>\n        ),\n        filterIcon: filtered => <SearchOutlined style={{ color: filtered ? '#1890ff' : undefined }} />,\n        onFilter: (value, record) =>\n          record[dataIndex]\n            ? record[dataIndex].toString().toLowerCase().includes(value.toLowerCase())\n            : '',\n        onFilterDropdownVisibleChange: visible => {\n          if (visible) {\n            setTimeout(() => searchInput.select(), 100);\n          }\n        },\n        render: text =>\n          state.searchedColumn === dataIndex ? (\n            <Highlighter\n              highlightStyle={{ backgroundColor: '#ffc069', padding: 0 }}\n              searchWords={[state.searchText]}\n              autoEscape\n              textToHighlight={text ? text.toString() : ''}\n            />\n          ) : (\n            text\n          ),\n      });\n\n      \n        const columns = [\n        {\n            title: 'Họ và tên',\n            dataIndex: 'name',\n            key: 'name',\n            width: 130,\n            ...getColumnSearchProps('name'),\n            render: text => <a>{text}</a>,\n        },\n        {\n            title: 'Mã sinh viên',\n            width: 100,\n            dataIndex: 'vnu_id',\n            key: 'vnu_id',\n            sorter: {\n                compare: (a, b) => a.vnu_id - b.vnu_id,\n                multiple: 5,\n              },\n        },\n        {\n            title: 'Trạng thái',\n            key: 'tags',\n            width: 130,\n            dataIndex: 'tags',\n            filters: [\n                {\n                  text: 'Chưa nộp học phí',\n                  value: 'chưa nộp học phí',\n                },\n                {\n                  text: 'Chưa đủ tín',\n                  value: 'chưa đủ tín',\n                },\n                {\n                  text: 'Cảnh cáo',\n                  value: 'cảnh cáo',\n                },\n                {\n                  text: 'Bình thường',\n                  value: 'bình thường',\n                },\n                {\n                  text: 'Đuổi học',\n                  value: 'đuổi học',\n                },\n              ],\n            onFilter: (value, record) => {\n              return record.tags.includes(value.toLowerCase())\n            },\n            render: tags => (\n                <span>\n                {tags.map(tag => {\n                    let color = 'red';\n                    if (tag === 'bình thường') {\n                        color = 'green';\n                    }\n                    if (tag ==='cảnh cáo') {\n                      color = 'yellow';\n                    }\n                    if (tag ==='chưa nộp học phí' || tag ==='chưa đủ tín' ) {\n                      color = 'orange';\n                    }\n                    return (\n                        <Tag color= {color} key = {tag}>\n                            {tag.toUpperCase()}\n                        </Tag>\n                    );\n                })}\n                </span>\n            )\n        },\n        {\n            title: 'Ngày sinh',\n            width: 100,\n            dataIndex: 'date_of_birth',\n            key: 'date_of_birth',\n        },\n        {\n          title: 'TBCTL',\n          width: 100,\n          dataIndex: 'cpa',\n          key: 'cpa',\n          sorter: {\n            compare: (a, b) => a.cpa - b.cpa,\n            multiple: 5,\n          },\n      },\n        {\n          title: 'Số học phần điểm C+',\n          width: 100,\n          dataIndex: 'Cplus',\n          key: 'Cplus',\n      },\n       {\n          title: 'Số học phần điểm C',\n          width: 100,\n          dataIndex: 'C',\n          key: 'C',\n      },\n      {\n          title: 'Số học phần điểm D+',\n          width: 100,\n          dataIndex: 'Dplus',\n          key: 'Dplus',\n      },\n       {\n          title: 'Số học phần điểm D',\n          width: 100,\n          dataIndex: 'D',\n          key: 'D',\n      },\n        {\n          title: 'Số học phần điểm F',\n          width: 100,\n          dataIndex: 'F',\n          key: 'F',\n      },\n      {\n        title: 'Chi tiết',\n        key: 'action',\n        fixed: \"right\",\n        width: 100,\n        render: (text, record) => (\n          <Space size=\"middle\">\n            \n            <Button\n            title={\"Xem bảng điểm \" + record.name}\n            onClick={() => handleShowScoreboard(record)} \n            icon={<InfoCircleTwoTone />}\n            size=\"small\"\n            style={{ width: 50 }}\n            />\n\n          </Space>\n        )\n      }\n    ]\n    return (\n        <div>\n            \n            <Row>\n            <Col flex=\"auto\">\n            <h2>Bảng điểm sinh viên</h2>\n            </Col>\n            <Col flex=\"250px\">\n            <p align=\"right\">\n              <Button type=\"primary\"\n                onClick = {() => showDownloadPanel()}\n              >Tải bảng điểm</Button>\n            </p> \n            </Col>\n            </Row>\n            <Table\n            columns={columns}\n            dataSource={data}\n            bordered\n            scroll={{ x: \"calc(700px + 50%)\", y: 500 }}\n            />\n            <Modal title=\"Tải bảng điểm\" visible={downloadPanelVisible} onCancel={handleDownloadCancel} footer={[]}> \n              <DownloadForm classId = {classWrapper.curClass.class_id}/>\n            </Modal>\n            <Modal\n              title=\"Bảng điểm sinh viên\"\n              visible={state.visible}\n              onCancel= {handleCloseModal}\n              footer={[]}\n              width={1100}\n            >\n              <StudentScore vnu_id = {state.currentRow.vnu_id} isPersonal={false}/>\n            </Modal>\n        </div>\n    )\n  } \n","import React ,{useEffect, useState} from 'react';\nimport 'antd/dist/antd.css';\nimport { Form, Input, Button, Divider, Select} from 'antd';\nimport { useClassWrapper, useFetchWrapper } from '_helpers';\n\nconst {Option} = Select;\n\nexport {DownloadForm} \n\nfunction DownloadForm(props) {\n    const [semesterData, setSemesterData] = useState([]);\n    const [semFilterState, setSemFilterState] = useState(null);\n    const fetchWrapper = useFetchWrapper();\n    \n\n    const [form] = Form.useForm();\n\n    useEffect(() =>{\n      console.log(\"Reconstruct GPADash\")\n\n      async function getSemesterData(){\n          var tempSem = [];\n          let response = await fetchWrapper.get(\"http://localhost:3000/api/semesters/all\", null, null);\n          response = await response.json();\n          console.log(response);\n          if (response?.status === \"Success\"){\n              for (const object of response.message ) {\n                  tempSem.push({\n                      label: object.semester_name,\n                      value: object.semester_id\n                  })\n              }\n              setSemesterData(tempSem);\n              if (tempSem.length>0){\n                setSemFilterState(tempSem[0]);\n              }\n              \n          }\n      }\n\n      async function initDownloadForm(){\n        await getSemesterData();\n      }\n      initDownloadForm();\n    }, [props]);\n\n    function handleSemFilterChange(value) {\n      setSemFilterState(value);\n      console.log(semFilterState);\n    }\n\n    function handleSubmit() {\n        form.validateFields()\n        .then((values) => {\n            console.log(props.classId)\n            console.log(values.semesterId);\n            var generated = \"http://localhost:8081/api/scores/download/\" + props.classId + \"/\" + values.semesterId;\n            openInNewTab(generated);\n        })\n    };\n\n    const openInNewTab = (url) => {\n        const newWindow = window.open(url, '_blank', 'noopener,noreferrer')\n        if (newWindow) newWindow.opener = null\n    }\n\n    return (\n        <div>\n            <h6> Nhập mã kì học </h6>\n            <Form\n                form = {form}\n                layout=\"vertical\"\n                name=\"downloadform\"\n                initialValues={{\n                    modifier: 'public',\n                }}\n            >\n          <Form.Item\n            name=\"semesterId\"\n            label=\"Mã kì học:\"\n          >\n            <Select defaultValue={semFilterState} style={{ width: 180 }} onChange={handleSemFilterChange} >\n                            {semesterData.map(({ label, value }) => (\n                                <option key={value} value={value}>\n                                    { label}\n                                </option>\n              ))}\n            </Select>\n          </Form.Item>\n          {/* <p>Thêm nhiều sinh viên cách nhau bằng dấu ',' </p>\n          <p>Sinh viên được thêm vào lớp phải có tài khoản VNU được cấp bởi admin của hệ thống. </p> */}\n          <Form.Item label=\" \" colon={false}>\n                        <Button type=\"primary\" htmlType=\"submit\" onClick = {handleSubmit}>\n                            Tải bảng điểm của kì học\n                        </Button>\n                    </Form.Item>\n        </Form>\n        </div>\n        \n    )\n}","import React, { useEffect } from 'react'\nimport { useRecoilState } from 'recoil';\nimport { alertBachAtom } from '_state/alert_bach';\n  import { Button, notification, Divider, Space } from 'antd';\n  import {\n    RadiusUpleftOutlined,\n    RadiusUprightOutlined,\n    RadiusBottomleftOutlined,\n    RadiusBottomrightOutlined,\n  } from '@ant-design/icons';\n  \n  const Context = React.createContext({ name: 'Default' });\n  \n  function Notification() {\n    const [notification_, setNoti] = useRecoilState(alertBachAtom);\n    const openNotification = (message, description) => {\n      if (message.includes('Lỗi') || message.includes('Thất bại') || message.includes('Error') || message.includes('Err'))\n        notification.error({\n          message: message,\n          description: description,\n          onClick: () => {\n            console.log('Notification Clicked!');\n          },\n        });\n      else if (message.includes('Thành công') || message.toLowerCase().includes('thanh cong') || message.includes('Success') || description.includes('Thành công') || description.includes('Success') ){\n        notification.success({\n          message: message,\n          description: description,\n          onClick: () => {\n            console.log('Notification Clicked!');\n          },\n        });\n      }\n      else if (message.includes('Cảnh báo') || message.toLowerCase().includes('canh bao') || message.includes('Warning') || description.toLowerCase().includes('warning') || description.toLowerCase().includes('canh bao') ){\n        notification.success({\n          message: message,\n          description: description,\n          onClick: () => {\n            console.log('Notification Clicked!');\n          },\n        });\n      }\n      else {\n        notification.open({\n          message: message,\n          description: description,\n          onClick: () => {\n            console.log('Notification Clicked!');\n          },\n        });\n      }\n    };\n    useEffect(() => {\n      if (notification_.message || notification_.description)\n        openNotification(notification_.message, notification_.description);\n    },[notification_])\n    return (\n      <></>\n    );\n  };\n  export {Notification};","import { useRecoilState } from 'recoil';\nimport { alertBachAtom } from '../_state/alert_bach';\nimport useChatWrapper from '_helpers/chat-wrapper';\nimport { useAuthWrapper } from '_helpers';\nimport { socketWrapper } from '_helpers/socket-wrapper';\nimport { feedPageAtom } from '_state/feed_page';\nimport { getRecoil, setRecoil } from \"recoil-nexus\";\nimport { useFeedPageWrapper } from '_helpers/feed_page_wrapper';\nimport { authAtom } from '_state';\nimport { waitForUpdateLatestMsgAtom, waitToAddContactAtom } from '_state/chat';\nfunction useSocketAction() {\n    let feedPageWrapper = useFeedPageWrapper();\n    let chatWrapper = useChatWrapper();\n    let [alert, setAlert] = useRecoilState(alertBachAtom);\n\n    function onConnected() {\n        // debugger\n        socketWrapper.isConnected = true\n    }\n    function onNewPost(newPost) {\n \n        var feedPageState = getRecoil(feedPageAtom);\n        let posts = [...feedPageState.posts];\n            posts.push(newPost);\n            setRecoil(feedPageAtom, {...feedPageWrapper.feedPageState, posts:posts})\n    }\n    function onNewComment(newComment) {\n        var feedPageState = getRecoil(feedPageAtom);\n        feedPageState = JSON.parse(JSON.stringify(feedPageState))\n        var new_comment = newComment.new_comment;\n        var postId = newComment.postId;\n        let posts = [...feedPageState.posts];\n        for (var i of posts) {\n            if (i._id == postId) {\n                var newComments = [...i.comments]\n                newComments.push(new_comment);\n                i.comments = newComments;\n                break;\n            }\n        }\n        setRecoil(feedPageAtom, {...feedPageWrapper.feedPageState, posts:posts})\n        // console.log(\"new comment bro\");\n    }\n    function onUpdatePost(newPost) {\n        // debugger\n        var feedPageState = getRecoil(feedPageAtom);\n        feedPageState = JSON.parse(JSON.stringify(feedPageState))\n        var postId = newPost._id;\n        let posts = [...feedPageState.posts];\n        let newPosts = [];\n        for (var i of posts) {\n            if (i._id == postId) {\n                newPosts.push(newPost)\n                continue;\n            }\n            newPosts.push(i);\n        }\n        setRecoil(feedPageAtom, {...feedPageWrapper.feedPageState, posts:newPosts})\n    }\n    function onNewMessage(message) {\n        // debugger\n        if (!message.selfSend) {\n            setAlert({message: `Tin nhắn mới từ: ${message.from.name}`, description: message.message})\n        }\n            \n        if (message.from.vnu_id == getRecoil(chatWrapper.curChatPersonAtom) || message.to.vnu_id == getRecoil(chatWrapper.curChatPersonAtom)) {\n            let newListMessages = [...(getRecoil(chatWrapper.curListMessagesAtom))];\n            newListMessages.push(message);\n            setRecoil(chatWrapper.curListMessagesAtom, newListMessages)\n        }\n\n        if (message.newContact && !message.isSender) {\n            let listToAdd = getRecoil(waitToAddContactAtom) ? [...(getRecoil(waitToAddContactAtom))] : [];\n            listToAdd.push({vnu_id : message.from.vnu_id, message:message})\n            setRecoil(waitToAddContactAtom, listToAdd);\n        }\n\n        let newUpdate = {\n            vnu_id: message.isSender ? message.to.vnu_id : message.from.vnu_id,\n            latest_message: message,\n            latest_sender:  message.isSender ? \"isMe\" : \"notMe\"\n        }\n        // debugger\n        let listUpdating = getRecoil(waitForUpdateLatestMsgAtom) ? [...(getRecoil(waitForUpdateLatestMsgAtom))] : [];\n        listUpdating.push(newUpdate);\n        setRecoil(waitForUpdateLatestMsgAtom, listUpdating)\n        console.log(message);\n    }\n    return {onNewPost, onNewMessage, onConnected, onNewComment, onUpdatePost}\n}\n\nexport default useSocketAction;\n\n","import React, { useEffect } from 'react';\n\nimport { alertBachAtom } from '_state/alert_bach';\nimport { authAtom } from '_state';\nimport { useRecoilState } from 'recoil';\nimport { socketWrapper } from '../../../_helpers/socket-wrapper';\nimport { getRecoil, setRecoil } from \"recoil-nexus\";\nimport useSocketAction from '_actions/socket.action';\nimport { SportsHockey } from '@mui/icons-material';\nimport { socketConnected } from '_state/socket';\n\nexport default function Socket(props) {\n    let [auth, setAuth] = useRecoilState(authAtom)\n    let socketAction = useSocketAction();\n    var onNewPost = socketAction.onNewPost;\n    var onNewMessage = socketAction.onNewMessage;\n    var onNewComment = socketAction.onNewComment;\n    var onConnected = socketAction.onConnected;\n    var onUpdatePost = socketAction.onUpdatePost;\n    let [isSocketConnected, setSocketConnected] = useRecoilState(socketConnected)\n    useEffect(() => {\n        if (!socketWrapper.initiated) {\n          socketWrapper.initConnection(auth);\n        } \n        console.log(\"Socket khoi tao\");\n        socketWrapper.socket.removeAllListeners()\n        socketWrapper.socket.on(\"connect\", onConnected)\n        socketWrapper.socket.on(\"NewPost\", onNewPost)\n        socketWrapper.socket.on(\"NewComment\", onNewComment)\n        socketWrapper.socket.on(\"NewMessage\", onNewMessage)\n        socketWrapper.socket.on(\"UpdatePost\", onUpdatePost)\n        let id = setInterval(() => {\n          \n          if (socketWrapper.isConnected){\n            console.log(\"Socket init status \" + socketWrapper.initiated)\n            console.log(\"Socket connect status\" + socketWrapper.isConnected)\n            setSocketConnected(true)\n            clearInterval(id)\n          }\n        }, 300)\n    }, [])\n    \n    return (\n      <></>\n    );\n}\n","import { useRecoilState } from 'recoil';\nimport React ,{useEffect } from 'react';\nimport { UploadForm } from './UploadForm';\nimport { Row, Col } from 'antd';\n\nexport { DBPortal };\n\nvar upload_form_semester = [\n    {\n      title: 'Mã kỳ học',\n      dataIndex: 'semester_id',\n      key: 'semester_id',\n    },\n    {\n      title: 'Tên kỳ học',\n      dataIndex: 'semester_name',\n      key: 'semester_name',\n    },\n    {\n      title: 'Lỗi',\n      dataIndex: 'error',\n      key: 'error',\n    },\n  ];\n  var upload_form_subject = [\n    {\n      title: 'Tên môn học',\n      dataIndex: 'subject_name',\n      key: 'subject_name',\n    },\n    {\n      title: 'Mã môn học',\n      dataIndex: 'subject_code',\n      key: 'subject_code',\n    },\n    {\n        title: 'Số tín chỉ',\n        dataIndex: 'credits_number',\n        key: 'credits_number',\n      },\n    {\n      title: 'Lỗi',\n      dataIndex: 'error',\n      key: 'error',\n    },\n  ];\n\n  var upload_score_student = [\n    {\n        title: 'Mã sinh viên',\n        dataIndex: 'vnu_id',\n        key: 'vnu_id',\n    },\n    {\n        title: 'Mã môn học',\n        dataIndex: 'subject_code',\n        key: 'subject_code',\n    },\n    {\n        title: 'Điểm',\n        dataIndex: 'score',\n        key: 'score',\n    },\n    {\n        title: 'Mã kỳ học',\n        dataIndex: 'semester_id',\n        key: 'semester_id',\n    },\n    {\n        title: 'Lỗi',\n        dataIndex: 'error',\n        key: 'error',\n    },\n  ]\n  var upload_form_student = [\n    {\n      title: 'Ngày sinh',\n      dataIndex: 'date_of_birth',\n      key: 'date_of_birth',\n    },\n    {\n      title: 'Tên',\n      dataIndex: 'name',\n      key: 'name',\n    },\n    {\n        title: 'Vai trò',\n        dataIndex: 'role',\n        key: 'role',\n    },\n    {\n        title: 'Quê quán',\n        dataIndex: 'location',\n        key: 'location',\n    },\n    {\n        title: 'VNU-ID',\n        dataIndex: 'vnu_id',\n        key: 'vnu_id',\n    },\n    {\n        title: 'Username',\n        dataIndex: 'username',\n        key: 'username',\n    },\n    {\n        title: 'Password',\n        dataIndex: 'password',\n        key: 'password',\n    },\n    {\n        title: 'Giới tính',\n        dataIndex: 'gender',\n        key: 'gender',\n    },\n    {\n        title: 'Số điện thoại',\n        dataIndex: 'phone_number',\n        key: 'phone_number',\n    },\n    {\n      title: 'Lỗi',\n      dataIndex: 'error',\n      key: 'error',\n    },\n  ];\n  var upload_form_teacher = [\n    {\n      title: 'Ngày sinh',\n      dataIndex: 'date_of_birth',\n      key: 'date_of_birth',\n    },\n    {\n      title: 'Tên',\n      dataIndex: 'name',\n      key: 'name',\n    },\n    {\n        title: 'Vai trò',\n        dataIndex: 'role',\n        key: 'role',\n    },\n    {\n        title: 'VNU-ID',\n        dataIndex: 'vnu_id',\n        key: 'vnu_id',\n    },\n    {\n        title: 'Username',\n        dataIndex: 'username',\n        key: 'username',\n    },\n    {\n        title: 'Password',\n        dataIndex: 'password',\n        key: 'password',\n    },\n    {\n        title: 'Giới tính',\n        dataIndex: 'gender',\n        key: 'gender',\n    },\n    {\n        title: 'Số điện thoại',\n        dataIndex: 'phone_number',\n        key: 'phone_number',\n    },\n    {\n      title: 'Lỗi',\n      dataIndex: 'error',\n      key: 'error',\n    },\n  ];\n\n  var upload_form_status = [\n    {\n        title: 'VNU-ID',\n        dataIndex: 'vnu_id',\n        key: 'vnu_id',\n    },\n    {\n        title: 'Trạng thái',\n        dataIndex: 'status',\n        key: 'status',\n    },\n    \n    {\n        title: 'Lỗi',\n        dataIndex: 'error',\n        key: 'error',\n    },\n\n  ]\nfunction DBPortal() {\n    return (\n        <div className=\"p-4\" style = {{overflow : \"auto\"}}>\n            <h3> Quản lý cơ sở dữ liệu</h3>\n            <i> Nơi tải lên dữ liệu sinh viên, điểm số, kì học dành cho Cố vấn học tập </i>\n            <br/>\n            <br/>\n\n            <Row>\n            <Col flex=\"300px\">\n                <h4> Danh sách CVHT </h4>\n                <i> Tải danh sách tài khoản và thông tin Cố vấn học tập lên hệ thống. </i>\n                <br/><br/> <UploadForm columns={upload_form_teacher} formurl=\"http://localhost:3000/api/upload/dscv\"/> <br/>\n            </Col>\n            <Col flex=\"300px\">\n                <h4> Danh sách sinh viên </h4>\n                <i> Tải danh sách tài khoản và thông tin sinh viên lên hệ thống.</i>\n                <br/><br/> <UploadForm columns={upload_form_student} formurl=\"http://localhost:3000/api/upload/dssv\"/> <br/>\n                <i><b>Lưu ý:</b> Các sinh viên sẽ chưa được thêm lớp. Yêu cầu CVHT tạo lớp và thêm tại bảng Thông tin SV. </i>\n                <br/>\n            </Col>\n            <Col flex=\"300px\">\n                <h4> Danh sách môn học </h4>\n                <i> Tải danh sách môn học lên hệ thống.</i>\n                <br/><br/><UploadForm columns={upload_form_subject} formurl=\"http://localhost:3000/api/upload/dsmh\"/>\n            </Col>\n            <Col flex=\"auto\"></Col>\n            </Row>\n\n            <br/>\n            <br/>\n            <Row>\n            <Col flex=\"300px\">\n                <h4> Danh sách kì học </h4>\n                <i> Tải danh sách kì học lên hệ thống.</i>\n                <br/><br/> <UploadForm columns={upload_form_semester} formurl=\"http://localhost:3000/api/semesters/upload\"/>\n            </Col>\n            <Col flex=\"300px\">\n                <h4> Cập nhật bảng điểm </h4>\n                <i> Tải danh sách bảng điểm của sinh viên lên hệ thống.</i>\n                <br/><br/><UploadForm columns={upload_score_student} formurl=\"http://localhost:3000/api/scores/import\"/>\n            </Col>\n            <Col flex=\"300px\">\n                <h4> Cập nhật tình trạng </h4>\n                <i> Tải danh sách tình trạng sinh viên lên hệ thống.</i>\n                <br/><br/><UploadForm columns={upload_form_status} formurl=\"http://localhost:3000/api/status/import\"/>\n            </Col>\n            <Col flex=\"auto\"></Col>\n            </Row>\n\n           \n        </div>\n    )\n}","import { Link } from 'react-router-dom';\nimport { useRecoilValue, useRecoilState } from 'recoil';\nimport {useEffect, useState} from 'react'\nimport { authAtom } from '_state';\nimport { useAuthWrapper, useClassWrapper } from '_helpers';\nimport { classPickerVisibleAtom } from '_state';\nimport {Redirect} from 'react-router-dom';\nimport {Button, Card , Row, Col} from 'antd';\n\nimport {\n    UserOutlined,\n    MessageTwoTone,\n    BellTwoTone,\n    InfoCircleTwoTone,\n    AppstoreTwoTone,\n    DashboardTwoTone,\n    LayoutTwoTone,\n    LeftCircleTwoTone,\n    HddTwoTone\n} from '@ant-design/icons';\nimport { useUserActions } from '_actions';\n\nexport { StuHome };\n\n\n\nfunction StuHome() {\n    const userData = JSON.parse(localStorage.getItem(\"userData\"));\n    const classWrapper = useClassWrapper();\n    const userActions = useUserActions();\n    const [teacherState, setTeacherState] = useState({\n        name: 'Nguyễn Việt Anh', \n        email: \"koyomihatsune@outlook.jp\",\n        role: 'teacher',\n        gender: 'male',\n        phone_number: '02938278424',\n        vnu_id: '',\n    });\n    \n    useEffect(() =>{\n        console.log(\"Reconstruct StuHome\");\n        async function initStuHome(){\n            var response = await classWrapper.getCurrentClassTeacherInfo();\n            console.log(response);\n            if (\"vnu_id\" in response) {\n                setTeacherState(response);\n            }\n            console.log(teacherState);\n        }\n        initStuHome();        \n    },[]);\n\n    return (userData.role && <>\n    \n            {(userData.role === \"student\") && \n                <>\n                    <div className=\"p-4\">\n                        <div className=\"container\">\n                            <h3>Chào mừng đến với Ứng dụng Quản lý Sinh viên - Cố vấn học tập!</h3>\n                            <br/>\n                            <Row>\n                            <Col flex='520px'>\n                                        <Link to={`/profile`}>\n                                        <Card hoverable style={{ width: 500, height: 310 }}>\n                                            <h5>Thông tin cá nhân</h5>\n                                            <h3>{userData.name}</h3><br/>\n                                            Vai trò<br/>\n                                            <h4>{userData.role == \"student\"? \"Sinh viên\" : \"Cố vấn học tập\"}</h4>\n                                            Lớp hiện tại<br/>\n                                            <h4>{classWrapper.curClass? classWrapper.curClass.class_name : \"Vui lòng chọn lớp để bắt đầu\" }</h4>\n                                        </Card></Link>\n                            </Col>\n                            <Col flex='200px'>\n                                <Row>  \n                                    <Card style={{ width: 240, height: 145}} hoverable>\n                                        <Link to={`/profile`}>\n                                        <UserOutlined twoToneColor=\"#205ec9\"style={{ fontSize: '40px', display: 'inline-block', verticalAlign: 'middle' }}/>\n                                        <br/><br/><h5>Thông tin cá nhân</h5>\n                                        </Link>\n                                    </Card>\n                                </Row>\n                                <br/>\n                                {/* For tuition fee status */}\n                                <Row>  \n                                    <Card style={{ width: 240, height: 145}} hoverable onClick={userActions.logout}>\n                                        <LeftCircleTwoTone twoToneColor=\"#cf1b4b\"style={{ fontSize: '40px', display: 'inline-block', verticalAlign: 'middle' }}/>\n                                        <br/><br/><h5>Đăng xuất</h5>\n                                    </Card>\n                                </Row>\n                            </Col>\n                            </Row>\n                            <br/><br/>\n\n                            {(classWrapper.curClass) &&\n                                <>\n                                    <h4>Cố vấn học tập & theo dõi điểm</h4>\n                                    <Row>\n                                        <Col flex='520px'>\n                                            <Card hoverable style={{ width: 500, height: 520 }}>\n                                                <h5>Thông tin Cố vấn học tập</h5>\n                                                <h3>{teacherState.name}</h3><br/>\n                                                Vai trò<br/>\n                                                <h4>{teacherState.role == \"student\"? \"Sinh viên\" : \"Cố vấn học tập\"}</h4>\n                                                Số điện thoại<br/>\n                                                <h4>{teacherState.phone_number}</h4>\n                                                Email<br/>\n                                                <h4>{teacherState.email}</h4>\n                                            </Card>\n                                        </Col>\n                                        <Col flex='200px'>\n                                            <Row>  \n                                                <Link to={`/${classWrapper.curClass.class_id}/feed`}>\n                                                <Card hoverable style={{ width: 240 }}>\n                                                <BellTwoTone twoToneColor=\"#c98e20\"style={{ fontSize: '30px', display: 'inline-block', verticalAlign: 'middle' }}/>\n                                                <br/><br/><h4>Diễn đàn</h4>\n                                                </Card></Link>\n                                            </Row>\n                                            <br/>\n                                            {/* For tuition fee status */}\n                                            <Row>  \n                                                <Link to={`/chat/${teacherState.vnu_id}`}>\n                                                    <Card hoverable style={{ width: 240 }}>\n                                                    <MessageTwoTone twoToneColor=\"#5e20c9\"style={{ fontSize: '30px', display: 'inline-block', verticalAlign: 'middle' }}/>\n                                                    <br/><br/><h4>Nhắn tin với cố vấn học tập</h4>\n                                                </Card></Link>\n                                            </Row>\n                                            <br/>\n                                            {/* For tuition fee status */}\n                                            <Row>  \n                                                <Link to={`/personalscore`}>\n                                                <Card hoverable style={{ width: 240 }}>\n                                                    <InfoCircleTwoTone twoToneColor=\"#52c41a\"style={{ fontSize: '30px', display: 'inline-block', verticalAlign: 'middle' }}/>\n                                                    <br/><br/><h4>Bảng điểm cá nhân</h4>\n                                                    </Card></Link>\n                                            </Row>\n                                        </Col>\n                                        </Row>                                    \n                                    <Row>\n                                    <Col flex='260px'>\n                                        \n                                    </Col>\n                                    <Col flex='260px'>\n                                        \n                                    </Col>\n                                    </Row>\n                                                                        \n                                </>\n                            }\n\n                            \n                            <br/>\n                            <b>Ứng dụng Quản lý Sinh viên - Cố vấn học tập</b><br/>\n                            <b>Bài tập lớn môn Lập trình ứng dụng Web</b><br/>\n                            <b>Thực hiện bởi:</b> {\" Trần Xuân Bách, Đặng Thế Hoàng Anh, Nguyễn Việt Anh, Hoàng Hữu Bách, Nguyễn Bá Anh Tuấn\"}\n                            \n                            <br/>\n                        </div>\n                    </div>\n                </>\n            }\n        </>)\n}","import { BrowserRouter as Router,\n    Switch,\n    Route, \n    Redirect,\n    useParams, useLocation} from 'react-router-dom';\nimport { useRecoilValue, useRecoilState } from 'recoil';\n\nimport { Nav, PrivateRoute, ClassPicker } from '_components';\nimport { history } from '_helpers';\nimport { Home } from 'home';\nimport { Account } from '_components/account';\nimport { Dashboard } from '_components/dashboard';\nimport { Feed } from '_components/feed';\nimport { Chat } from '_components/chat';\nimport { Profile } from '_components/profile';\nimport { StudentInfoList } from '_components/studentInfoList';\nimport { StudentScoreList, PersonalScore } from '_components/studentScoreList';\n\nimport { useAuthWrapper, useClassWrapper } from '_helpers';\nimport { authAtom, classPickerVisibleAtom } from '_state';\nimport { Layout, Button, Row, Col, } from 'antd';\n\nimport React, { useEffect, useState } from 'react';\nimport { loadingVisibleAtom } from '_state';\nimport Title from 'antd/lib/typography/Title';\nimport { useUserActions } from '_actions';\nimport {Notification} from './_components/bach_component/Notification/Notification'\nimport { socketWrapper } from '_helpers/socket-wrapper';\nimport Socket from '_components/bach_component/Socket/socket';\nimport LinearProgress from '@mui/material/LinearProgress';\nimport { DBPortal } from '_components/dbportal/DBPortal';\nimport { StuHome } from 'home/StuHome';\nconst style = { };\n\nconst { Header, Footer, Content } = Layout;\n\nexport { App };\n\nfunction App() {\n    const authWrapper = useAuthWrapper();\n    const classWrapper = useClassWrapper();\n    const [drawerVisible, setDrawerVisible] = useRecoilState(classPickerVisibleAtom);\n    const [loadingVisible, setLoadingVisible] = useRecoilState(loadingVisibleAtom);\n\n    const userData = JSON.parse(localStorage.getItem(\"userData\"));\n    \n    const userActions = useUserActions();\n    const showDrawer = () => {\n        classWrapper.getClassList();\n        setDrawerVisible(true);\n    };\n\n    const onDrawerClose = () => {\n        setDrawerVisible(false);\n    };\n  \n\n    return (\n        <div className={'app-container' + (authWrapper.tokenValue ? ' bg-light' : '')}>\n            {/* <div>{JSON.stringify(authWrapper.tokenValue)}</div> */}\n            <Router history={history}>\n            {authWrapper.tokenValue && <Socket></Socket>}\n            \n            <Layout>\n                <Header style={{ position: 'sticky', top: 0, zIndex: 1, width: '100%' }}>\n                    <Row gutter={0}>\n                        <Col className=\"gutter-row\" flex=\"1 1 500px\">\n                            <div style={style}>\n                                <Title style={{ padding: '15px 0px 0px 0px', color: 'white' }} level={3}> Student Advisor Web App </Title>\n                            </div>\n                        </Col>\n                        <Col style={{width:\"250px\"}} span='auto'>\n                        <div>\n                            <div style={{color: 'white', fontSize: '16px', textAlign: 'right', marginRight:'50px'}}> \n                                <b>{ClassNameDisplay() + \"    \"} </b>\n                            </div>\n                        </div>\n                        </Col>\n                            {\n                            (authWrapper.tokenValue != \"\" & userData?.role == \"teacher\") &&\n                            <Col span='auto' >\n                            \n                            <div style={{'marginLeft': 'auto','marginRight': 'auto' }}>\n                                <Button type=\"primary\" style={{'marginLeft': 'auto','marginRight': 'auto' }} onClick={showDrawer}>\n                                    Chọn lớp\n                                </Button>\n                            </div>\n                            </Col>\n                            }\n                            \n                    </Row>\n                </Header> \n                <Layout>\n                    <Nav onLogout = {userActions.logout} auth = {authWrapper.tokenValue} userData = {userData} classID = {classWrapper.curClass ? classWrapper.curClass.class_id : \"\"}/>\n                     \n                <Layout>\n\n                    <Content style={{ margin: '20px 16px' } }>\n                        <Switch>\n                          <PrivateRoute exact path=\"/\" component={Home} />\n                          {/* <PrivateRoute exact path=\"/:classID\" children={<Child classID=\"123\"/>} component={Child}/>  */}\n                          <Route path=\"/account\" component={Account} />\n                          <PrivateRoute path=\"/chat\" component={Chat} />\n                          <PrivateRoute path=\"/profile\" component={Profile} />\n                          <PrivateRoute exact path=\"/dbportal\" component={DBPortal} />\n                          <PrivateRoute path=\"/:classID\" component={Child} />\n                          <Redirect from=\"*\" to=\"/\" />\n                        </Switch>\n                    </Content>\n    \n             </Layout>\n             </Layout> \n            </Layout>\n            \n            <ClassPicker drawerVisible = {drawerVisible} setDrawerVisible = {setDrawerVisible} onDrawerClose={onDrawerClose}/>\n            <Notification></Notification>\n            <LinearProgress sx={{position:\"fixed\", width: \"100%\", top: \"0px\", zIndex:2, visibility: (loadingVisible ? \"visible\" : \"hidden\")}} />\n            </Router>\n        </div>\n    );\n}\n\nfunction Child(props) {\n    let {classID} = useParams();\n    const userData = JSON.parse(localStorage.getItem(\"userData\"));\n    const classWrapper = useClassWrapper();\n    const [loaded, setloaded] = useState(false);\n    // console.log('hello');\n    const location  = useLocation()\n    // let { path } = match;\n    // console.log(path);\n    useEffect(() => {\n        classWrapper.chooseClassById(classID).then(data => {\n            setloaded(true)\n        });\n        console.log(\"Child component construct, classID: \", classID)\n    },[])\n\n    return (\n    (!classWrapper.curClass && loaded) ? <Redirect from=\"*\" to=\"/\" /> :\n        <>\n        \n            {(classWrapper.curClass) &&  \n                <>\n                    {(userData.role == \"teacher\") &&\n                        <>\n                            <Switch>\n                            <PrivateRoute exact path=\"/:classID/\" component={Home} />\n                            <PrivateRoute exact path=\"/:classID/dashboard\" component={Dashboard} />\n                            <PrivateRoute exact path=\"/:classID/studentinfo\" component={StudentInfoList} />\n                            <PrivateRoute exact path=\"/:classID/studentscore\" component={StudentScoreList} />\n                            <PrivateRoute exact path=\"/:classID/feed\" component={Feed} />\n                            <Redirect from=\"*\" to={`/${classWrapper.curClass.class_id}/dashboard`} />\n                            </Switch>\n                        </>\n                    }\n                    {(userData.role == \"student\") &&\n                        <>\n                            <Switch>\n                            <PrivateRoute exact path=\"/\" component={Home} />\n                            {/* <PrivateRoute exact path=\"/:classID/studentinfo\" component={StudentInfoList} />\n                            <PrivateRoute exact path=\"/:classID/studentscore\" component={StudentScoreList} /> */}\n                            <PrivateRoute exact path=\"/stuhome\" component={StuHome} />\n                            <PrivateRoute exact path=\"/:classID/feed\" component={Feed} />\n                            <PrivateRoute path=\"/personalscore\" component={PersonalScore}/>\n                            <Redirect from=\"*\" to={`/${classWrapper.curClass.class_id}/feed`} />\n                            </Switch>\n                        </>\n                    }\n                    {(userData.role == \"admin\") &&\n                        <>\n                            <Switch>\n                            {/* route admin here */}\n                            </Switch>\n                        </>\n                    }\n                </>\n            }\n            \n        </>\n    );\n  }\n\nfunction ClassNameDisplay(){\n    const auth = useRecoilValue(authAtom);\n    const classWrapper = useClassWrapper();\n    if (auth) {\n        if (classWrapper.curClass) {\n            return classWrapper.curClass.class_name;\n        }\n        return \"Chưa chọn lớp\";\n    }    \n    localStorage.removeItem('currentClass');\n    return \"\";\n}\n\n\n// function App() {\n//     const authWrapper = useAuthWrapper();\n//     return (\n//         <div className={'app-container' + (authWrapper.tokenValue ? ' bg-light' : '')}>\n//             {/* <div>{JSON.stringify(authWrapper.tokenValue)}</div> */}\n//             <Router history={history}>\n//             <Layout>\n//                 <Header style={{ padding: '20px 0px 2px 20px', height: '70px' }}>\n//                     <Title style={{ padding: 0, color: 'white' }} level={3}>Student Advisor Web App</Title>\n//                 </Header>\n//             </Layout>\n//             <Layout>\n//                 <Nav />\n//                 <Layout>\n//                     <Content style={{ margin: '20px 16px' }}>\n//                         <Switch>\n//                           <PrivateRoute exact path=\"/\" component={Home} />\n//                           <PrivateRoute exact path=\"/dashboard\" component={Dashboard} />\n//                           <PrivateRoute exact path=\"/studentinfo\" component={StudentInfoList} />\n//                           <PrivateRoute exact path=\"/studentscore\" component={StudentScoreList} />\n//                           <PrivateRoute exact path=\"/feed\" component={Feed} />\n//                           <PrivateRoute exact path=\"/chat\" component={Chat} />\n//                           <PrivateRoute exact path=\"/profile\" component={Profile} />\n//                           {/* <PrivateRoute path=\"/users\" component={Users} /> */}\n//                           <Route path=\"/account\" component={Account} />\n//                           <Redirect from=\"*\" to=\"/\" />\n//                         </Switch>\n//                     </Content>\n//                     <Footer style={{ textAlign: 'center' }}>\n//                         Phần mềm quản lý CVHT & SV\n//                         <br/>\n//                         Thực hiện bởi @vakoyomi, @miaht94, @anhbomx13, @h2b, @tuna\n//                     </Footer>\n//                </Layout>\n//              </Layout>\n//             </Router>\n//         </div>        \n//     );\n// }","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { RecoilRoot } from 'recoil';\nimport RecoilNexus from \"recoil-nexus\";\nimport 'index.css';\nimport { App } from 'App';\n\n// setup fake backend\n// import { fakeBackend } from '_helpers';\n// fakeBackend();\n\nReactDOM.render(\n    <React.StrictMode>\n        <RecoilRoot>\n            <RecoilNexus />\n            <App />\n        </RecoilRoot>\n    </React.StrictMode>,\n    document.getElementById('app')\n);\n"],"sourceRoot":""}